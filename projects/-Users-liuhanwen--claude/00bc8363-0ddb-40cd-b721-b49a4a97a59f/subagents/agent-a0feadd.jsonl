{"parentUuid":null,"isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":"The user wants to know how to enhance Claude CLI (Claude Code). Please provide comprehensive information about:\n\n1. MCP (Model Context Protocol) servers - how to add them, what they do, popular ones\n2. Hooks - what they are and how to use them\n3. Custom slash commands/skills\n4. Settings and configuration options\n5. IDE integrations\n6. Any other extension mechanisms\n\nFocus on practical ways to extend Claude CLI's capabilities."},"uuid":"e4882485-7410-4c1c-952c-69e5873cce17","timestamp":"2026-01-18T08:08:46.215Z"}
{"parentUuid":"e4882485-7410-4c1c-952c-69e5873cce17","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01MQPxs9gNftup4rZSLAesRa","type":"message","role":"assistant","content":[{"type":"text","text":"I'll fetch the comprehensive Claude Code documentation to provide you with detailed information on all these extension mechanisms."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":4576,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":4576,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXEW5VMU42t8iJrqmWEQu","type":"assistant","uuid":"f23de7c9-8d51-43dc-83b0-d32e654e1f90","timestamp":"2026-01-18T08:08:47.291Z"}
{"parentUuid":"f23de7c9-8d51-43dc-83b0-d32e654e1f90","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01MQPxs9gNftup4rZSLAesRa","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01DFAokCAVdi47uduVFZJEGe","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/claude_code_docs_map.md","prompt":"Provide the list of all documentation pages and their URLs"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":2,"cache_creation_input_tokens":4576,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":4576,"ephemeral_1h_input_tokens":0},"output_tokens":3,"service_tier":"standard"}},"requestId":"req_011CXEW5VMU42t8iJrqmWEQu","type":"assistant","uuid":"13bf8f3c-ebad-4dd5-9b52-69a542f42c2a","timestamp":"2026-01-18T08:08:48.005Z"}
{"parentUuid":"13bf8f3c-ebad-4dd5-9b52-69a542f42c2a","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01DFAokCAVdi47uduVFZJEGe","type":"tool_result","content":"# null\n\n# Claude Code Documentation Map\n\nThis is a comprehensive map of all Claude Code documentation pages with their headings, designed for easy navigation by LLMs.\n\n> **Note:** This file is auto-generated by GitHub Actions. Do not edit manually.\n> Last updated: 2026-01-14 04:18:45 UTC\n\n## Document Structure\n\nThis map uses a hierarchical structure:\n\n* **##** marks documentation groups (e.g., 'Getting started')\n* **###** marks individual documentation pages\n* **Nested bullets** show the heading structure within each page\n* Each page title links to the full documentation\n\n## Getting started\n\n### [overview](https://code.claude.com/docs/en/overview.md)\n\n* Get started in 30 seconds\n* What Claude Code does for you\n* Why developers love Claude Code\n* Next steps\n* Additional resources\n\n### [quickstart](https://code.claude.com/docs/en/quickstart.md)\n\n* Before you begin\n* Step 1: Install Claude Code\n* Step 2: Log in to your account\n* Step 3: Start your first session\n* Step 4: Ask your first question\n* Step 5: Make your first code change\n* Step 6: Use Git with Claude Code\n* Step 7: Fix a bug or add a feature\n* Step 8: Test out other common workflows\n* Essential commands\n* Pro tips for beginners\n* What's next?\n* Getting help\n\n### [common-workflows](https://code.claude.com/docs/en/common-workflows.md)\n\n* Understand new codebases\n  * Get a quick codebase overview\n  * Find relevant code\n* Fix bugs efficiently\n* Refactor code\n* Use specialized subagents\n* Use Plan Mode for safe code analysis\n  * When to use Plan Mode\n  * How to use Plan Mode\n  * Example: Planning a complex refactor\n  * Configure Plan Mode as default\n* Let Claude interview you\n* Work with tests\n* Create pull requests\n* Handle documentation\n* Work with images\n* Reference files and directories\n* Use extended thinking (thinking mode)\n  * Per-request thinking with `ultrathink`\n  * How extended thinking token budgets work\n* Resume previous conversations\n  * Name your sessions\n  * Use the session picker\n* Run parallel Claude Code sessions with Git worktrees\n* Use Claude as a unix-style utility\n  * Add Claude to your verification process\n  * Pipe in, pipe out\n  * Control output format\n* Create custom slash commands\n  * Create project-specific commands\n  * Add command arguments with \\$ARGUMENTS\n  * Create personal slash commands\n* Ask Claude about its capabilities\n  * Example questions\n* Next steps\n\n### [changelog](https://code.claude.com/docs/en/changelog.md)\n\n* (No headings found)\n\n## Outside of the terminal\n\n### [claude-code-on-the-web](https://code.claude.com/docs/en/claude-code-on-the-web.md)\n\n* What is Claude Code on the web?\n* Who can use Claude Code on the web?\n* Getting started\n* How it works\n* Moving tasks between web and terminal\n  * From terminal to web\n    * Tips for background tasks\n  * From web to terminal\n    * Requirements for teleporting\n* Cloud environment\n  * Default image\n    * Checking available tools\n    * Language-specific setups\n    * Databases\n  * Environment configuration\n  * Dependency management\n    * Local vs remote execution\n    * Persisting environment variables\n* Network access and security\n  * Network policy\n    * GitHub proxy\n    * Security proxy\n  * Access levels\n  * Default allowed domains\n    * Anthropic Services\n    * Version Control\n    * Container Registries\n    * Cloud Platforms\n    * Package Managers - JavaScript/Node\n    * Package Managers - Python\n    * Package Managers - Ruby\n    * Package Managers - Rust\n    * Package Managers - Go\n    * Package Managers - JVM\n    * Package Managers - Other Languages\n    * Linux Distributions\n    * Development Tools & Platforms\n    * Cloud Services & Monitoring\n    * Content Delivery & Mirrors\n    * Schema & Configuration\n  * Security best practices for customized network access\n* Security and isolation\n* Pricing and rate limits\n* Limitations\n* Best practices\n* Related resources\n\n### [desktop](https://code.claude.com/docs/en/desktop.md)\n\n* Claude Code on desktop (Preview)\n* Installation\n* Features\n* Using Git worktrees\n  * Copying files ignored with `.gitignore`\n  * Launch Claude Code on the web\n* Bundled Claude Code version\n* Environment configuration\n  * Custom environment variables\n* Enterprise configuration\n* Related resources\n\n### [chrome](https://code.claude.com/docs/en/chrome.md)\n\n* What the integration enables\n* Prerequisites\n* How the integration works\n* Set up the integration\n* Try it out\n* Example workflows\n  * Test a local web application\n  * Debug with console logs\n  * Automate form filling\n  * Draft content in Google Docs\n  * Extract data from web pages\n  * Run multi-site workflows\n  * Record a demo GIF\n* Best practices\n* Troubleshooting\n  * Extension not detected\n  * Browser not responding\n  * First-time setup\n* Enable by default\n* See also\n\n### [vs-code](https://code.claude.com/docs/en/vs-code.md)\n\n* Prerequisites\n* Install the extension\n* Get started\n* Customize your workflow\n  * Change the layout\n  * Switch to terminal mode\n* VS Code commands and shortcuts\n* Configure settings\n* Use third-party providers\n* VS Code extension vs. Claude Code CLI\n  * Run CLI in VS Code\n  * Switch between extension and CLI\n* Security considerations\n* Fix common issues\n  * Extension won't install\n  * Spark icon not visible\n  * Claude Code never responds\n  * Standalone CLI not connecting to IDE\n* Uninstall the extension\n* Next steps\n\n### [jetbrains](https://code.claude.com/docs/en/jetbrains.md)\n\n* Supported IDEs\n* Features\n* Installation\n  * Marketplace Installation\n* Usage\n  * From Your IDE\n  * From External Terminals\n* Configuration\n  * Claude Code Settings\n  * Plugin Settings\n    * General Settings\n    * ESC Key Configuration\n* Special Configurations\n  * Remote Development\n  * WSL Configuration\n* Troubleshooting\n  * Plugin Not Working\n  * IDE Not Detected\n  * Command Not Found\n* Security Considerations\n\n### [github-actions](https://code.claude.com/docs/en/github-actions.md)\n\n* Why use Claude Code GitHub Actions?\n* What can Claude do?\n  * Claude Code Action\n* Setup\n* Quick setup\n* Manual setup\n* Upgrading from Beta\n  * Essential changes\n  * Breaking Changes Reference\n  * Before and After Example\n* Example use cases\n  * Basic workflow\n  * Using slash commands\n  * Custom automation with prompts\n  * Common use cases\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Configuration examples\n* Using with AWS Bedrock & Google Vertex AI\n  * Prerequisites\n    * For Google Cloud Vertex AI:\n    * For AWS Bedrock:\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * CI not running on Claude's commits\n  * Authentication errors\n* Advanced configuration\n  * Action parameters\n    * Pass CLI arguments\n  * Alternative integration methods\n  * Customizing Claude's behavior\n\n### [gitlab-ci-cd](https://code.claude.com/docs/en/gitlab-ci-cd.md)\n\n* Why use Claude Code with GitLab?\n* How it works\n* What can Claude do?\n* Setup\n  * Quick setup\n  * Manual setup (recommended for production)\n* Example use cases\n  * Turn issues into MRs\n  * Get implementation help\n  * Fix bugs quickly\n* Using with AWS Bedrock & Google Vertex AI\n* Configuration examples\n  * Basic .gitlab-ci.yml (Claude API)\n  * AWS Bedrock job example (OIDC)\n  * Google Vertex AI job example (Workload Identity Federation)\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Security and governance\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * Job can't write comments or open MRs\n  * Authentication errors\n* Advanced configuration\n  * Common parameters and variables\n  * Customizing Claude's behavior\n\n### [slack](https://code.claude.com/docs/en/slack.md)\n\n* Use cases\n* Prerequisites\n* Setting up Claude Code in Slack\n* How it works\n  * Automatic detection\n  * Context gathering\n  * Session flow\n* User interface elements\n  * App Home\n  * Message actions\n  * Repository selection\n* Access and permissions\n  * User-level access\n  * Workspace admin permissions\n* What's accessible where\n* Best practices\n  * Writing effective requests\n  * When to use Slack vs. web\n* Troubleshooting\n  * Sessions not starting\n  * Repository not showing\n  * Wrong repository selected\n  * Authentication errors\n  * Session expiration\n* Current limitations\n* Related resources\n\n## Build with Claude Code\n\n### [sub-agents](https://code.claude.com/docs/en/sub-agents.md)\n\n* Built-in subagents\n* Quickstart: create your first subagent\n* Configure subagents\n  * Use the /agents command\n  * Choose the subagent scope\n  * Write subagent files\n    * Supported frontmatter fields\n  * Choose a model\n  * Control subagent capabilities\n    * Available tools\n    * Permission modes\n    * Conditional rules with hooks\n    * Disable specific subagents\n  * Define hooks for subagents\n    * Hooks in subagent frontmatter\n    * Project-level hooks for subagent events\n* Work with subagents\n  * Understand automatic delegation\n  * Run subagents in foreground or background\n  * Common patterns\n    * Isolate high-volume operations\n    * Run parallel research\n    * Chain subagents\n  * Choose between subagents and main conversation\n  * Manage subagent context\n    * Resume subagents\n    * Auto-compaction\n* Example subagents\n  * Code reviewer\n  * Debugger\n  * Data scientist\n  * Database query validator\n* Next steps\n\n### [plugins](https://code.claude.com/docs/en/plugins.md)\n\n* When to use plugins vs standalone configuration\n* Quickstart\n  * Prerequisites\n  * Create your first plugin\n* Hello Command\n* Hello Command\n  * Plugin structure overview\n  * Develop more complex plugins\n    * Add Skills to your plugin\n    * Add LSP servers to your plugin\n    * Organize complex plugins\n    * Test your plugins locally\n    * Debug plugin issues\n    * Share your plugins\n  * Convert existing configurations to plugins\n    * Migration steps\n    * What changes when migrating\n  * Next steps\n    * For plugin users\n    * For plugin developers\n\n### [discover-plugins](https://code.claude.com/docs/en/discover-plugins.md)\n\n* How marketplaces work\n* Official Anthropic marketplace\n  * Code intelligence\n  * External integrations\n  * Development workflows\n  * Output styles\n* Try it: add the demo marketplace\n* Add marketplaces\n  * Add from GitHub\n  * Add from other Git hosts\n  * Add from local paths\n  * Add from remote URLs\n* Install plugins\n* Manage installed plugins\n* Manage marketplaces\n  * Use the interactive interface\n  * Use CLI commands\n  * Configure auto-updates\n* Configure team marketplaces\n* Troubleshooting\n  * /plugin command not recognized\n  * Common issues\n* Next steps\n\n### [skills](https://code.claude.com/docs/en/skills.md)\n\n* Create your first Skill\n* How Skills work\n  * Where Skills live\n  * When to use Skills versus other options\n* Configure Skills\n  * Write SKILL.md\n    * Available metadata fields\n  * Update or delete a Skill\n  * Add supporting files with progressive disclosure\n    * Example: multi-file Skill structure\n  * Restrict tool access with allowed-tools\n  * Run Skills in a forked context\n  * Define hooks for Skills\n  * Control Skill visibility\n    * When to use each setting\n    * Example: model-only Skill\n  * Skills and subagents\n    * Give a subagent access to Skills\n    * Run a Skill in a subagent context\n  * Distribute Skills\n* Examples\n  * Simple Skill (single file)\n  * Use multiple files\n* Troubleshooting\n  * View and test Skills\n  * Skill not triggering\n  * Skill doesn't load\n  * Skill has errors\n  * Multiple Skills conflict\n  * Plugin Skills not appearing\n* Next steps\n\n### [output-styles](https://code.claude.com/docs/en/output-styles.md)\n\n* Built-in output styles\n* How output styles work\n* Change your output style\n* Create a custom output style\n  * Frontmatter\n* Comparisons to related features\n  * Output Styles vs. CLAUDE.md vs. --append-system-prompt\n  * Output Styles vs. [Agents](/en/sub-agents)\n  * Output Styles vs. [Custom Slash Commands](/en/slash-commands)\n\n### [hooks-guide](https://code.claude.com/docs/en/hooks-guide.md)\n\n* Hook Events Overview\n* Quickstart\n  * Prerequisites\n  * Step 1: Open hooks configuration\n  * Step 2: Add a matcher\n  * Step 3: Add the hook\n  * Step 4: Save your configuration\n  * Step 5: Verify your hook\n  * Step 6: Test your hook\n* More Examples\n  * Code Formatting Hook\n  * Markdown Formatting Hook\n  * Custom Notification Hook\n  * File Protection Hook\n* Learn more\n\n### [headless](https://code.claude.com/docs/en/headless.md)\n\n* Basic usage\n* Examples\n  * Get structured output\n  * Auto-approve tools\n  * Create a commit\n  * Customize the system prompt\n  * Continue conversations\n* Next steps\n\n### [mcp](https://code.claude.com/docs/en/mcp.md)\n\n* What you can do with MCP\n* Popular MCP servers\n* Installing MCP servers\n  * Option 1: Add a remote HTTP server\n  * Option 2: Add a remote SSE server\n  * Option 3: Add a local stdio server\n  * Managing your servers\n  * Dynamic tool updates\n  * Plugin-provided MCP servers\n* MCP installation scopes\n  * Local scope\n  * Project scope\n  * User scope\n  * Choosing the right scope\n  * Scope hierarchy and precedence\n  * Environment variable expansion in `.mcp.json`\n* Practical examples\n  * Example: Monitor errors with Sentry\n  * Example: Connect to GitHub for code reviews\n  * Example: Query your PostgreSQL database\n* Authenticate with remote MCP servers\n* Add MCP servers from JSON configuration\n* Import MCP servers from Claude Desktop\n* Use Claude Code as an MCP server\n* MCP output limits and warnings\n* Use MCP resources\n  * Reference MCP resources\n* Use MCP prompts as slash commands\n  * Execute MCP prompts\n* Managed MCP configuration\n  * Option 1: Exclusive control with managed-mcp.json\n  * Option 2: Policy-based control with allowlists and denylists\n    * Restriction options\n    * Example configuration\n    * How command-based restrictions work\n    * How URL-based restrictions work\n    * Allowlist behavior (`allowedMcpServers`)\n    * Denylist behavior (`deniedMcpServers`)\n    * Important notes\n\n### [troubleshooting](https://code.claude.com/docs/en/troubleshooting.md)\n\n* Common installation issues\n  * Windows installation issues: errors in WSL\n  * Linux and Mac installation issues: permission or command not found errors\n    * Recommended solution: Native Claude Code installation\n  * Windows: \"Claude Code on Windows requires git-bash\"\n  * Windows: \"installMethod is native, but claude command not found\"\n* Permissions and authentication\n  * Repeated permission prompts\n  * Authentication issues\n* Configuration file locations\n  * Resetting configuration\n* Performance and stability\n  * High CPU or memory usage\n  * Command hangs or freezes\n  * Search and discovery issues\n  * Slow or incomplete search results on WSL\n* IDE integration issues\n  * JetBrains IDE not detected on WSL2\n    * WSL2 networking modes\n  * Reporting Windows IDE integration issues (both native and WSL)\n  * Escape key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals\n* Markdown formatting issues\n  * Missing language tags in code blocks\n  * Inconsistent spacing and formatting\n  * Best practices for markdown generation\n* Getting more help\n\n## Deployment\n\n### [third-party-integrations](https://code.claude.com/docs/en/third-party-integrations.md)\n\n* Compare deployment options\n* Configure proxies and gateways\n  * Amazon Bedrock\n  * Microsoft Foundry\n  * Google Vertex AI\n* Best practices for organizations\n  * Invest in documentation and memory\n  * Simplify deployment\n  * Start with guided usage\n  * Configure security policies\n  * Leverage MCP for integrations\n* Next steps\n\n### [amazon-bedrock](https://code.claude.com/docs/en/amazon-bedrock.md)\n\n* Prerequisites\n* Setup\n  * 1. Submit use case details\n  * 2. Configure AWS credentials\n    * Advanced credential configuration\n      * Example configuration\n      * Configuration settings explained\n  * 3. Configure Claude Code\n  * 4. Model configuration\n  * 5. Output token configuration\n* IAM configuration\n* Troubleshooting\n* Additional resources\n\n### [google-vertex-ai](https://code.claude.com/docs/en/google-vertex-ai.md)\n\n* Prerequisites\n* Region Configuration\n* Setup\n  * 1. Enable Vertex AI API\n  * 2. Request model access\n  * 3. Configure GCP credentials\n  * 4. Configure Claude Code\n  * 5. Model configuration\n* IAM configuration\n* 1M token context window\n* Troubleshooting\n* Additional resources\n\n### [microsoft-foundry](https://code.claude.com/docs/en/microsoft-foundry.md)\n\n* Prerequisites\n* Setup\n  * 1. Provision Microsoft Foundry resource\n  * 2. Configure Azure credentials\n  * 3. Configure Claude Code\n* Azure RBAC configuration\n* Troubleshooting\n* Additional resources\n\n### [network-config](https://code.claude.com/docs/en/network-config.md)\n\n* Proxy configuration\n  * Environment variables\n  * Basic authentication\n* Custom CA certificates\n* mTLS authentication\n* Network access requirements\n* Additional resources\n\n### [llm-gateway](https://code.claude.com/docs/en/llm-gateway.md)\n\n* Gateway requirements\n* Configuration\n  * Model selection\n* LiteLLM configuration\n  * Prerequisites\n  * Basic LiteLLM setup\n    * Authentication methods\n      * Static API key\n      * Dynamic API key with helper\n    * Unified endpoint (recommended)\n    * Provider-specific pass-through endpoints (alternative)\n      * Claude API through LiteLLM\n      * Amazon Bedrock through LiteLLM\n      * Google Vertex AI through LiteLLM\n* Additional resources\n\n### [devcontainer](https://code.claude.com/docs/en/devcontainer.md)\n\n* Key features\n* Getting started in 4 steps\n* Configuration breakdown\n* Security features\n* Customization options\n* Example use cases\n  * Secure client work\n  * Team onboarding\n  * Consistent CI/CD environments\n* Related resources\n\n### [sandboxing](https://code.claude.com/docs/en/sandboxing.md)\n\n* Overview\n* Why sandboxing matters\n* How it works\n  * Filesystem isolation\n  * Network isolation\n  * OS-level enforcement\n* Getting started\n  * Enable sandboxing\n  * Sandbox modes\n  * Configure sandboxing\n* Security benefits\n  * Protection against prompt injection\n  * Reduced attack surface\n  * Transparent operation\n* Security Limitations\n* Advanced usage\n  * Custom proxy configuration\n  * Integration with existing security tools\n* Best practices\n* Open source\n* Limitations\n* See also\n\n## Administration\n\n### [setup](https://code.claude.com/docs/en/setup.md)\n\n* System requirements\n  * Additional dependencies\n* Installation\n  * Authentication\n    * For individuals\n    * For teams and organizations\n  * Install a specific version\n  * Binary integrity and code signing\n* NPM installation (deprecated)\n* Windows setup\n* Update Claude Code\n  * Auto updates\n  * Configure release channel\n  * Disable auto-updates\n  * Update manually\n* Uninstall Claude Code\n  * Native installation\n  * Homebrew installation\n  * WinGet installation\n  * NPM installation\n  * Clean up configuration files (optional)\n\n### [iam](https://code.claude.com/docs/en/iam.md)\n\n* Authentication methods\n  * Claude for Teams or Enterprise (recommended)\n  * Claude Console authentication\n  * Cloud provider authentication\n* Access control and permissions\n  * Permission system\n  * Configuring permissions\n    * Permission modes\n    * Working directories\n    * Tool-specific permission rules\n  * Additional permission control with hooks\n  * Managed settings\n  * Settings precedence\n* Credential management\n\n### [security](https://code.claude.com/docs/en/security.md)\n\n* How we approach security\n  * Security foundation\n  * Permission-based architecture\n  * Built-in protections\n  * User responsibility\n* Protect against prompt injection\n  * Core protections\n  * Privacy safeguards\n  * Additional safeguards\n* MCP security\n* IDE security\n* Cloud execution security\n* Security best practices\n  * Working with sensitive code\n  * Team security\n  * Reporting security issues\n* Related resources\n\n### [data-usage](https://code.claude.com/docs/en/data-usage.md)\n\n* Data policies\n  * Data training policy\n  * Development Partner Program\n  * Feedback using the `/bug` command\n  * Session quality surveys\n  * Data retention\n* Data access\n* Local Claude Code: Data flow and dependencies\n  * Cloud execution: Data flow and dependencies\n* Telemetry services\n* Default behaviors by API provider\n\n### [monitoring-usage](https://code.claude.com/docs/en/monitoring-usage.md)\n\n* Quick start\n* Administrator configuration\n* Configuration details\n  * Common configuration variables\n  * Metrics cardinality control\n  * Dynamic headers\n    * Settings configuration\n    * Script requirements\n    * Refresh behavior\n  * Multi-team organization support\n  * Example configurations\n* Available metrics and events\n  * Standard attributes\n  * Metrics\n  * Metric details\n    * Session counter\n    * Lines of code counter\n    * Pull request counter\n    * Commit counter\n    * Cost counter\n    * Token counter\n    * Code edit tool decision counter\n    * Active time counter\n  * Events\n    * User prompt event\n    * Tool result event\n    * API request event\n    * API error event\n    * Tool decision event\n* Interpreting metrics and events data\n  * Usage monitoring\n  * Cost monitoring\n  * Alerting and segmentation\n  * Event analysis\n* Backend considerations\n  * For metrics\n  * For events/logs\n* Service information\n* ROI measurement resources\n* Security/privacy considerations\n* Monitoring Claude Code on Amazon Bedrock\n\n### [costs](https://code.claude.com/docs/en/costs.md)\n\n* Track your costs\n  * Using the `/cost` command\n  * Additional tracking options\n* Managing costs for teams\n  * Rate limit recommendations\n* Reduce token usage\n* Background token usage\n* Tracking version changes and updates\n  * Current version information\n  * Understanding changes in Claude Code behavior\n  * When cost reporting changes\n\n### [analytics](https://code.claude.com/docs/en/analytics.md)\n\n* Access analytics\n  * Required roles\n* Available metrics\n  * Lines of code accepted\n  * Suggestion accept rate\n  * Activity\n  * Spend\n  * Team insights\n* Using analytics effectively\n  * Monitor adoption\n  * Measure productivity\n* Related resources\n\n### [plugin-marketplaces](https://code.claude.com/docs/en/plugin-marketplaces.md)\n\n* Overview\n* Walkthrough: create a local marketplace\n* Create the marketplace file\n* Marketplace schema\n  * Required fields\n  * Owner fields\n  * Optional metadata\n* Plugin entries\n  * Required fields\n  * Optional plugin fields\n* Plugin sources\n  * Relative paths\n  * GitHub repositories\n  * Git repositories\n  * Advanced plugin entries\n* Host and distribute marketplaces\n  * Host on GitHub (recommended)\n  * Host on other git services\n  * Private repositories\n  * Test locally before distribution\n  * Require marketplaces for your team\n  * Managed marketplace restrictions\n    * Common configurations\n    * How restrictions work\n* Validation and testing\n* Troubleshooting\n  * Marketplace not loading\n  * Marketplace validation errors\n  * Plugin installation failures\n  * Private repository authentication fails\n  * Plugins with relative paths fail in URL-based marketplaces\n  * Files not found after installation\n* See also\n\n## Configuration\n\n### [settings](https://code.claude.com/docs/en/settings.md)\n\n* Configuration scopes\n  * Available scopes\n  * When to use each scope\n  * How scopes interact\n  * What uses scopes\n* Settings files\n  * Available settings\n  * Permission settings\n  * Sandbox settings\n  * Attribution settings\n  * File suggestion settings\n  * Hook configuration\n  * Settings precedence\n  * Key points about the configuration system\n  * System prompt\n  * Excluding sensitive files\n* Subagent configuration\n* Plugin configuration\n  * Plugin settings\n    * `enabledPlugins`\n    * `extraKnownMarketplaces`\n    * `strictKnownMarketplaces`\n  * Managing plugins\n* Environment variables\n* Tools available to Claude\n  * Bash tool behavior\n  * Extending tools with hooks\n* See also\n\n### [terminal-config](https://code.claude.com/docs/en/terminal-config.md)\n\n* Themes and appearance\n* Line breaks\n* Notification setup\n  * iTerm 2 system notifications\n  * Custom notification hooks\n* Handling large inputs\n* Vim Mode\n\n### [model-config](https://code.claude.com/docs/en/model-config.md)\n\n* Available models\n  * Model aliases\n  * Setting your model\n* Special model behavior\n  * `default` model setting\n  * `opusplan` model setting\n  * Extended context with \\[1m]\n* Checking your current model\n* Environment variables\n  * Prompt caching configuration\n\n### [memory](https://code.claude.com/docs/en/memory.md)\n\n* Determine memory type\n* CLAUDE.md imports\n* How Claude looks up memories\n* Directly edit memories with `/memory`\n* Set up project memory\n* Modular rules with `.claude/rules/`\n  * Basic structure\n  * Path-specific rules\n  * Glob patterns\n  * Subdirectories\n  * Symlinks\n  * User-level rules\n* Organization-level memory management\n* Memory best practices\n\n### [statusline](https://code.claude.com/docs/en/statusline.md)\n\n* Create a custom status line\n* How it Works\n* JSON Input Structure\n* Example Scripts\n  * Simple Status Line\n  * Git-Aware Status Line\n  * Python Example\n  * Node.js Example\n  * Helper Function Approach\n  * Context Window Usage\n* Tips\n* Troubleshooting\n\n## Reference\n\n### [cli-reference](https://code.claude.com/docs/en/cli-reference.md)\n\n* CLI commands\n* CLI flags\n  * Agents flag format\n  * System prompt flags\n* See also\n\n### [interactive-mode](https://code.claude.com/docs/en/interactive-mode.md)\n\n* Keyboard shortcuts\n  * General controls\n  * Text editing\n  * Theme and display\n  * Multiline input\n  * Quick commands\n* Vim editor mode\n  * Mode switching\n  * Navigation (NORMAL mode)\n  * Editing (NORMAL mode)\n  * Text objects (NORMAL mode)\n* Command history\n  * Reverse search with Ctrl+R\n* Background bash commands\n  * How backgrounding works\n  * Bash mode with `!` prefix\n* See also\n\n### [slash-commands](https://code.claude.com/docs/en/slash-commands.md)\n\n* Built-in slash commands\n* Custom slash commands\n  * Syntax\n    * Parameters\n  * Command types\n    * Project commands\n    * Personal commands\n  * Features\n    * Namespacing\n    * Arguments\n      * All arguments with `$ARGUMENTS`\n      * Individual arguments with `$1`, `$2`, etc.\n    * Bash command execution\n    * File references\n    * Thinking mode\n  * Frontmatter\n    * Define hooks for commands\n* Plugin commands\n  * How plugin commands work\n  * Plugin command structure\n  * Invocation patterns\n* MCP slash commands\n  * Command format\n  * Features\n    * Dynamic discovery\n    * Arguments\n    * Naming conventions\n  * Managing MCP connections\n  * MCP permissions and wildcards\n* `Skill` tool\n  * What the `Skill` tool can invoke\n  * Encourage Claude to use specific commands\n  * Disable the `Skill` tool\n  * Disable specific commands or Skills\n  * `Skill` permission rules\n  * Character budget limit\n* Skills vs slash commands\n  * Use slash commands for\n  * Use Skills for\n  * Key differences\n  * Example comparison\n  * When to use each\n* See also\n\n### [checkpointing](https://code.claude.com/docs/en/checkpointing.md)\n\n* How checkpoints work\n  * Automatic tracking\n  * Rewinding changes\n* Common use cases\n* Limitations\n  * Bash command changes not tracked\n  * External changes not tracked\n  * Not a replacement for version control\n* See also\n\n### [hooks](https://code.claude.com/docs/en/hooks.md)\n\n* Configuration\n  * Structure\n  * Project-Specific Hook Scripts\n  * Plugin hooks\n  * Hooks in Skills, Agents, and Slash Commands\n* Prompt-Based Hooks\n  * How prompt-based hooks work\n  * Configuration\n  * Response schema\n  * Supported hook events\n  * Example: Intelligent Stop hook\n  * Example: SubagentStop with custom logic\n  * Comparison with bash command hooks\n  * Best practices\n* Hook Events\n  * PreToolUse\n  * PermissionRequest\n  * PostToolUse\n  * Notification\n  * UserPromptSubmit\n  * Stop\n  * SubagentStop\n  * PreCompact\n  * SessionStart\n    * Persisting environment variables\n  * SessionEnd\n* Hook Input\n  * PreToolUse Input\n    * Bash tool\n    * Write tool\n    * Edit tool\n    * Read tool\n  * PostToolUse Input\n  * Notification Input\n  * UserPromptSubmit Input\n  * Stop and SubagentStop Input\n  * PreCompact Input\n  * SessionStart Input\n  * SessionEnd Input\n* Hook Output\n  * Simple: Exit Code\n    * Exit Code 2 Behavior\n  * Advanced: JSON Output\n    * Common JSON Fields\n    * `PreToolUse` Decision Control\n    * `PermissionRequest` Decision Control\n    * `PostToolUse` Decision Control\n    * `UserPromptSubmit` Decision Control\n    * `Stop`/`SubagentStop` Decision Control\n    * `SessionStart` Decision Control\n    * `SessionEnd` Decision Control\n    * Exit Code Example: Bash Command Validation\n    * JSON Output Example: UserPromptSubmit to Add Context and Validation\n    * JSON Output Example: PreToolUse with Approval\n* Working with MCP Tools\n  * MCP Tool Naming\n  * Configuring Hooks for MCP Tools\n* Examples\n* Security Considerations\n  * Disclaimer\n  * Security Best Practices\n  * Configuration Safety\n* Hook Execution Details\n* Debugging\n  * Basic Troubleshooting\n  * Advanced Debugging\n  * Debug Output Example\n\n### [plugins-reference](https://code.claude.com/docs/en/plugins-reference.md)\n\n* Plugin components reference\n  * Commands\n  * Agents\n  * Skills\n  * Hooks\n  * MCP servers\n  * LSP servers\n* Plugin installation scopes\n* Plugin manifest schema\n  * Complete schema\n  * Required fields\n  * Metadata fields\n  * Component path fields\n  * Path behavior rules\n  * Environment variables\n* Plugin caching and file resolution\n  * How plugin caching works\n  * Path traversal limitations\n  * Working with external dependencies\n* Plugin directory structure\n  * Standard plugin layout\n  * File locations reference\n* CLI commands reference\n  * plugin install\n  * plugin uninstall\n  * plugin enable\n  * plugin disable\n  * plugin update\n* Debugging and development tools\n  * Debugging commands\n  * Common issues\n  * Example error messages\n  * Hook troubleshooting\n  * MCP server troubleshooting\n  * Directory structure mistakes\n* Distribution and versioning reference\n  * Version management\n* See also\n\n## Resources\n\n### [legal-and-compliance](https://code.claude.com/docs/en/legal-and-compliance.md)\n\n* Legal agreements\n  * License\n  * Commercial agreements\n* Compliance\n  * Healthcare compliance (BAA)\n* Security and trust\n  * Trust and safety\n  * Security vulnerability reporting\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"79fa4565-affe-492f-8ff1-9ce75c6691b6","timestamp":"2026-01-18T08:08:48.248Z","toolUseResult":{"bytes":30307,"code":200,"codeText":"OK","result":"# null\n\n# Claude Code Documentation Map\n\nThis is a comprehensive map of all Claude Code documentation pages with their headings, designed for easy navigation by LLMs.\n\n> **Note:** This file is auto-generated by GitHub Actions. Do not edit manually.\n> Last updated: 2026-01-14 04:18:45 UTC\n\n## Document Structure\n\nThis map uses a hierarchical structure:\n\n* **##** marks documentation groups (e.g., 'Getting started')\n* **###** marks individual documentation pages\n* **Nested bullets** show the heading structure within each page\n* Each page title links to the full documentation\n\n## Getting started\n\n### [overview](https://code.claude.com/docs/en/overview.md)\n\n* Get started in 30 seconds\n* What Claude Code does for you\n* Why developers love Claude Code\n* Next steps\n* Additional resources\n\n### [quickstart](https://code.claude.com/docs/en/quickstart.md)\n\n* Before you begin\n* Step 1: Install Claude Code\n* Step 2: Log in to your account\n* Step 3: Start your first session\n* Step 4: Ask your first question\n* Step 5: Make your first code change\n* Step 6: Use Git with Claude Code\n* Step 7: Fix a bug or add a feature\n* Step 8: Test out other common workflows\n* Essential commands\n* Pro tips for beginners\n* What's next?\n* Getting help\n\n### [common-workflows](https://code.claude.com/docs/en/common-workflows.md)\n\n* Understand new codebases\n  * Get a quick codebase overview\n  * Find relevant code\n* Fix bugs efficiently\n* Refactor code\n* Use specialized subagents\n* Use Plan Mode for safe code analysis\n  * When to use Plan Mode\n  * How to use Plan Mode\n  * Example: Planning a complex refactor\n  * Configure Plan Mode as default\n* Let Claude interview you\n* Work with tests\n* Create pull requests\n* Handle documentation\n* Work with images\n* Reference files and directories\n* Use extended thinking (thinking mode)\n  * Per-request thinking with `ultrathink`\n  * How extended thinking token budgets work\n* Resume previous conversations\n  * Name your sessions\n  * Use the session picker\n* Run parallel Claude Code sessions with Git worktrees\n* Use Claude as a unix-style utility\n  * Add Claude to your verification process\n  * Pipe in, pipe out\n  * Control output format\n* Create custom slash commands\n  * Create project-specific commands\n  * Add command arguments with \\$ARGUMENTS\n  * Create personal slash commands\n* Ask Claude about its capabilities\n  * Example questions\n* Next steps\n\n### [changelog](https://code.claude.com/docs/en/changelog.md)\n\n* (No headings found)\n\n## Outside of the terminal\n\n### [claude-code-on-the-web](https://code.claude.com/docs/en/claude-code-on-the-web.md)\n\n* What is Claude Code on the web?\n* Who can use Claude Code on the web?\n* Getting started\n* How it works\n* Moving tasks between web and terminal\n  * From terminal to web\n    * Tips for background tasks\n  * From web to terminal\n    * Requirements for teleporting\n* Cloud environment\n  * Default image\n    * Checking available tools\n    * Language-specific setups\n    * Databases\n  * Environment configuration\n  * Dependency management\n    * Local vs remote execution\n    * Persisting environment variables\n* Network access and security\n  * Network policy\n    * GitHub proxy\n    * Security proxy\n  * Access levels\n  * Default allowed domains\n    * Anthropic Services\n    * Version Control\n    * Container Registries\n    * Cloud Platforms\n    * Package Managers - JavaScript/Node\n    * Package Managers - Python\n    * Package Managers - Ruby\n    * Package Managers - Rust\n    * Package Managers - Go\n    * Package Managers - JVM\n    * Package Managers - Other Languages\n    * Linux Distributions\n    * Development Tools & Platforms\n    * Cloud Services & Monitoring\n    * Content Delivery & Mirrors\n    * Schema & Configuration\n  * Security best practices for customized network access\n* Security and isolation\n* Pricing and rate limits\n* Limitations\n* Best practices\n* Related resources\n\n### [desktop](https://code.claude.com/docs/en/desktop.md)\n\n* Claude Code on desktop (Preview)\n* Installation\n* Features\n* Using Git worktrees\n  * Copying files ignored with `.gitignore`\n  * Launch Claude Code on the web\n* Bundled Claude Code version\n* Environment configuration\n  * Custom environment variables\n* Enterprise configuration\n* Related resources\n\n### [chrome](https://code.claude.com/docs/en/chrome.md)\n\n* What the integration enables\n* Prerequisites\n* How the integration works\n* Set up the integration\n* Try it out\n* Example workflows\n  * Test a local web application\n  * Debug with console logs\n  * Automate form filling\n  * Draft content in Google Docs\n  * Extract data from web pages\n  * Run multi-site workflows\n  * Record a demo GIF\n* Best practices\n* Troubleshooting\n  * Extension not detected\n  * Browser not responding\n  * First-time setup\n* Enable by default\n* See also\n\n### [vs-code](https://code.claude.com/docs/en/vs-code.md)\n\n* Prerequisites\n* Install the extension\n* Get started\n* Customize your workflow\n  * Change the layout\n  * Switch to terminal mode\n* VS Code commands and shortcuts\n* Configure settings\n* Use third-party providers\n* VS Code extension vs. Claude Code CLI\n  * Run CLI in VS Code\n  * Switch between extension and CLI\n* Security considerations\n* Fix common issues\n  * Extension won't install\n  * Spark icon not visible\n  * Claude Code never responds\n  * Standalone CLI not connecting to IDE\n* Uninstall the extension\n* Next steps\n\n### [jetbrains](https://code.claude.com/docs/en/jetbrains.md)\n\n* Supported IDEs\n* Features\n* Installation\n  * Marketplace Installation\n* Usage\n  * From Your IDE\n  * From External Terminals\n* Configuration\n  * Claude Code Settings\n  * Plugin Settings\n    * General Settings\n    * ESC Key Configuration\n* Special Configurations\n  * Remote Development\n  * WSL Configuration\n* Troubleshooting\n  * Plugin Not Working\n  * IDE Not Detected\n  * Command Not Found\n* Security Considerations\n\n### [github-actions](https://code.claude.com/docs/en/github-actions.md)\n\n* Why use Claude Code GitHub Actions?\n* What can Claude do?\n  * Claude Code Action\n* Setup\n* Quick setup\n* Manual setup\n* Upgrading from Beta\n  * Essential changes\n  * Breaking Changes Reference\n  * Before and After Example\n* Example use cases\n  * Basic workflow\n  * Using slash commands\n  * Custom automation with prompts\n  * Common use cases\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Configuration examples\n* Using with AWS Bedrock & Google Vertex AI\n  * Prerequisites\n    * For Google Cloud Vertex AI:\n    * For AWS Bedrock:\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * CI not running on Claude's commits\n  * Authentication errors\n* Advanced configuration\n  * Action parameters\n    * Pass CLI arguments\n  * Alternative integration methods\n  * Customizing Claude's behavior\n\n### [gitlab-ci-cd](https://code.claude.com/docs/en/gitlab-ci-cd.md)\n\n* Why use Claude Code with GitLab?\n* How it works\n* What can Claude do?\n* Setup\n  * Quick setup\n  * Manual setup (recommended for production)\n* Example use cases\n  * Turn issues into MRs\n  * Get implementation help\n  * Fix bugs quickly\n* Using with AWS Bedrock & Google Vertex AI\n* Configuration examples\n  * Basic .gitlab-ci.yml (Claude API)\n  * AWS Bedrock job example (OIDC)\n  * Google Vertex AI job example (Workload Identity Federation)\n* Best practices\n  * CLAUDE.md configuration\n  * Security considerations\n  * Optimizing performance\n  * CI costs\n* Security and governance\n* Troubleshooting\n  * Claude not responding to @claude commands\n  * Job can't write comments or open MRs\n  * Authentication errors\n* Advanced configuration\n  * Common parameters and variables\n  * Customizing Claude's behavior\n\n### [slack](https://code.claude.com/docs/en/slack.md)\n\n* Use cases\n* Prerequisites\n* Setting up Claude Code in Slack\n* How it works\n  * Automatic detection\n  * Context gathering\n  * Session flow\n* User interface elements\n  * App Home\n  * Message actions\n  * Repository selection\n* Access and permissions\n  * User-level access\n  * Workspace admin permissions\n* What's accessible where\n* Best practices\n  * Writing effective requests\n  * When to use Slack vs. web\n* Troubleshooting\n  * Sessions not starting\n  * Repository not showing\n  * Wrong repository selected\n  * Authentication errors\n  * Session expiration\n* Current limitations\n* Related resources\n\n## Build with Claude Code\n\n### [sub-agents](https://code.claude.com/docs/en/sub-agents.md)\n\n* Built-in subagents\n* Quickstart: create your first subagent\n* Configure subagents\n  * Use the /agents command\n  * Choose the subagent scope\n  * Write subagent files\n    * Supported frontmatter fields\n  * Choose a model\n  * Control subagent capabilities\n    * Available tools\n    * Permission modes\n    * Conditional rules with hooks\n    * Disable specific subagents\n  * Define hooks for subagents\n    * Hooks in subagent frontmatter\n    * Project-level hooks for subagent events\n* Work with subagents\n  * Understand automatic delegation\n  * Run subagents in foreground or background\n  * Common patterns\n    * Isolate high-volume operations\n    * Run parallel research\n    * Chain subagents\n  * Choose between subagents and main conversation\n  * Manage subagent context\n    * Resume subagents\n    * Auto-compaction\n* Example subagents\n  * Code reviewer\n  * Debugger\n  * Data scientist\n  * Database query validator\n* Next steps\n\n### [plugins](https://code.claude.com/docs/en/plugins.md)\n\n* When to use plugins vs standalone configuration\n* Quickstart\n  * Prerequisites\n  * Create your first plugin\n* Hello Command\n* Hello Command\n  * Plugin structure overview\n  * Develop more complex plugins\n    * Add Skills to your plugin\n    * Add LSP servers to your plugin\n    * Organize complex plugins\n    * Test your plugins locally\n    * Debug plugin issues\n    * Share your plugins\n  * Convert existing configurations to plugins\n    * Migration steps\n    * What changes when migrating\n  * Next steps\n    * For plugin users\n    * For plugin developers\n\n### [discover-plugins](https://code.claude.com/docs/en/discover-plugins.md)\n\n* How marketplaces work\n* Official Anthropic marketplace\n  * Code intelligence\n  * External integrations\n  * Development workflows\n  * Output styles\n* Try it: add the demo marketplace\n* Add marketplaces\n  * Add from GitHub\n  * Add from other Git hosts\n  * Add from local paths\n  * Add from remote URLs\n* Install plugins\n* Manage installed plugins\n* Manage marketplaces\n  * Use the interactive interface\n  * Use CLI commands\n  * Configure auto-updates\n* Configure team marketplaces\n* Troubleshooting\n  * /plugin command not recognized\n  * Common issues\n* Next steps\n\n### [skills](https://code.claude.com/docs/en/skills.md)\n\n* Create your first Skill\n* How Skills work\n  * Where Skills live\n  * When to use Skills versus other options\n* Configure Skills\n  * Write SKILL.md\n    * Available metadata fields\n  * Update or delete a Skill\n  * Add supporting files with progressive disclosure\n    * Example: multi-file Skill structure\n  * Restrict tool access with allowed-tools\n  * Run Skills in a forked context\n  * Define hooks for Skills\n  * Control Skill visibility\n    * When to use each setting\n    * Example: model-only Skill\n  * Skills and subagents\n    * Give a subagent access to Skills\n    * Run a Skill in a subagent context\n  * Distribute Skills\n* Examples\n  * Simple Skill (single file)\n  * Use multiple files\n* Troubleshooting\n  * View and test Skills\n  * Skill not triggering\n  * Skill doesn't load\n  * Skill has errors\n  * Multiple Skills conflict\n  * Plugin Skills not appearing\n* Next steps\n\n### [output-styles](https://code.claude.com/docs/en/output-styles.md)\n\n* Built-in output styles\n* How output styles work\n* Change your output style\n* Create a custom output style\n  * Frontmatter\n* Comparisons to related features\n  * Output Styles vs. CLAUDE.md vs. --append-system-prompt\n  * Output Styles vs. [Agents](/en/sub-agents)\n  * Output Styles vs. [Custom Slash Commands](/en/slash-commands)\n\n### [hooks-guide](https://code.claude.com/docs/en/hooks-guide.md)\n\n* Hook Events Overview\n* Quickstart\n  * Prerequisites\n  * Step 1: Open hooks configuration\n  * Step 2: Add a matcher\n  * Step 3: Add the hook\n  * Step 4: Save your configuration\n  * Step 5: Verify your hook\n  * Step 6: Test your hook\n* More Examples\n  * Code Formatting Hook\n  * Markdown Formatting Hook\n  * Custom Notification Hook\n  * File Protection Hook\n* Learn more\n\n### [headless](https://code.claude.com/docs/en/headless.md)\n\n* Basic usage\n* Examples\n  * Get structured output\n  * Auto-approve tools\n  * Create a commit\n  * Customize the system prompt\n  * Continue conversations\n* Next steps\n\n### [mcp](https://code.claude.com/docs/en/mcp.md)\n\n* What you can do with MCP\n* Popular MCP servers\n* Installing MCP servers\n  * Option 1: Add a remote HTTP server\n  * Option 2: Add a remote SSE server\n  * Option 3: Add a local stdio server\n  * Managing your servers\n  * Dynamic tool updates\n  * Plugin-provided MCP servers\n* MCP installation scopes\n  * Local scope\n  * Project scope\n  * User scope\n  * Choosing the right scope\n  * Scope hierarchy and precedence\n  * Environment variable expansion in `.mcp.json`\n* Practical examples\n  * Example: Monitor errors with Sentry\n  * Example: Connect to GitHub for code reviews\n  * Example: Query your PostgreSQL database\n* Authenticate with remote MCP servers\n* Add MCP servers from JSON configuration\n* Import MCP servers from Claude Desktop\n* Use Claude Code as an MCP server\n* MCP output limits and warnings\n* Use MCP resources\n  * Reference MCP resources\n* Use MCP prompts as slash commands\n  * Execute MCP prompts\n* Managed MCP configuration\n  * Option 1: Exclusive control with managed-mcp.json\n  * Option 2: Policy-based control with allowlists and denylists\n    * Restriction options\n    * Example configuration\n    * How command-based restrictions work\n    * How URL-based restrictions work\n    * Allowlist behavior (`allowedMcpServers`)\n    * Denylist behavior (`deniedMcpServers`)\n    * Important notes\n\n### [troubleshooting](https://code.claude.com/docs/en/troubleshooting.md)\n\n* Common installation issues\n  * Windows installation issues: errors in WSL\n  * Linux and Mac installation issues: permission or command not found errors\n    * Recommended solution: Native Claude Code installation\n  * Windows: \"Claude Code on Windows requires git-bash\"\n  * Windows: \"installMethod is native, but claude command not found\"\n* Permissions and authentication\n  * Repeated permission prompts\n  * Authentication issues\n* Configuration file locations\n  * Resetting configuration\n* Performance and stability\n  * High CPU or memory usage\n  * Command hangs or freezes\n  * Search and discovery issues\n  * Slow or incomplete search results on WSL\n* IDE integration issues\n  * JetBrains IDE not detected on WSL2\n    * WSL2 networking modes\n  * Reporting Windows IDE integration issues (both native and WSL)\n  * Escape key not working in JetBrains (IntelliJ, PyCharm, etc.) terminals\n* Markdown formatting issues\n  * Missing language tags in code blocks\n  * Inconsistent spacing and formatting\n  * Best practices for markdown generation\n* Getting more help\n\n## Deployment\n\n### [third-party-integrations](https://code.claude.com/docs/en/third-party-integrations.md)\n\n* Compare deployment options\n* Configure proxies and gateways\n  * Amazon Bedrock\n  * Microsoft Foundry\n  * Google Vertex AI\n* Best practices for organizations\n  * Invest in documentation and memory\n  * Simplify deployment\n  * Start with guided usage\n  * Configure security policies\n  * Leverage MCP for integrations\n* Next steps\n\n### [amazon-bedrock](https://code.claude.com/docs/en/amazon-bedrock.md)\n\n* Prerequisites\n* Setup\n  * 1. Submit use case details\n  * 2. Configure AWS credentials\n    * Advanced credential configuration\n      * Example configuration\n      * Configuration settings explained\n  * 3. Configure Claude Code\n  * 4. Model configuration\n  * 5. Output token configuration\n* IAM configuration\n* Troubleshooting\n* Additional resources\n\n### [google-vertex-ai](https://code.claude.com/docs/en/google-vertex-ai.md)\n\n* Prerequisites\n* Region Configuration\n* Setup\n  * 1. Enable Vertex AI API\n  * 2. Request model access\n  * 3. Configure GCP credentials\n  * 4. Configure Claude Code\n  * 5. Model configuration\n* IAM configuration\n* 1M token context window\n* Troubleshooting\n* Additional resources\n\n### [microsoft-foundry](https://code.claude.com/docs/en/microsoft-foundry.md)\n\n* Prerequisites\n* Setup\n  * 1. Provision Microsoft Foundry resource\n  * 2. Configure Azure credentials\n  * 3. Configure Claude Code\n* Azure RBAC configuration\n* Troubleshooting\n* Additional resources\n\n### [network-config](https://code.claude.com/docs/en/network-config.md)\n\n* Proxy configuration\n  * Environment variables\n  * Basic authentication\n* Custom CA certificates\n* mTLS authentication\n* Network access requirements\n* Additional resources\n\n### [llm-gateway](https://code.claude.com/docs/en/llm-gateway.md)\n\n* Gateway requirements\n* Configuration\n  * Model selection\n* LiteLLM configuration\n  * Prerequisites\n  * Basic LiteLLM setup\n    * Authentication methods\n      * Static API key\n      * Dynamic API key with helper\n    * Unified endpoint (recommended)\n    * Provider-specific pass-through endpoints (alternative)\n      * Claude API through LiteLLM\n      * Amazon Bedrock through LiteLLM\n      * Google Vertex AI through LiteLLM\n* Additional resources\n\n### [devcontainer](https://code.claude.com/docs/en/devcontainer.md)\n\n* Key features\n* Getting started in 4 steps\n* Configuration breakdown\n* Security features\n* Customization options\n* Example use cases\n  * Secure client work\n  * Team onboarding\n  * Consistent CI/CD environments\n* Related resources\n\n### [sandboxing](https://code.claude.com/docs/en/sandboxing.md)\n\n* Overview\n* Why sandboxing matters\n* How it works\n  * Filesystem isolation\n  * Network isolation\n  * OS-level enforcement\n* Getting started\n  * Enable sandboxing\n  * Sandbox modes\n  * Configure sandboxing\n* Security benefits\n  * Protection against prompt injection\n  * Reduced attack surface\n  * Transparent operation\n* Security Limitations\n* Advanced usage\n  * Custom proxy configuration\n  * Integration with existing security tools\n* Best practices\n* Open source\n* Limitations\n* See also\n\n## Administration\n\n### [setup](https://code.claude.com/docs/en/setup.md)\n\n* System requirements\n  * Additional dependencies\n* Installation\n  * Authentication\n    * For individuals\n    * For teams and organizations\n  * Install a specific version\n  * Binary integrity and code signing\n* NPM installation (deprecated)\n* Windows setup\n* Update Claude Code\n  * Auto updates\n  * Configure release channel\n  * Disable auto-updates\n  * Update manually\n* Uninstall Claude Code\n  * Native installation\n  * Homebrew installation\n  * WinGet installation\n  * NPM installation\n  * Clean up configuration files (optional)\n\n### [iam](https://code.claude.com/docs/en/iam.md)\n\n* Authentication methods\n  * Claude for Teams or Enterprise (recommended)\n  * Claude Console authentication\n  * Cloud provider authentication\n* Access control and permissions\n  * Permission system\n  * Configuring permissions\n    * Permission modes\n    * Working directories\n    * Tool-specific permission rules\n  * Additional permission control with hooks\n  * Managed settings\n  * Settings precedence\n* Credential management\n\n### [security](https://code.claude.com/docs/en/security.md)\n\n* How we approach security\n  * Security foundation\n  * Permission-based architecture\n  * Built-in protections\n  * User responsibility\n* Protect against prompt injection\n  * Core protections\n  * Privacy safeguards\n  * Additional safeguards\n* MCP security\n* IDE security\n* Cloud execution security\n* Security best practices\n  * Working with sensitive code\n  * Team security\n  * Reporting security issues\n* Related resources\n\n### [data-usage](https://code.claude.com/docs/en/data-usage.md)\n\n* Data policies\n  * Data training policy\n  * Development Partner Program\n  * Feedback using the `/bug` command\n  * Session quality surveys\n  * Data retention\n* Data access\n* Local Claude Code: Data flow and dependencies\n  * Cloud execution: Data flow and dependencies\n* Telemetry services\n* Default behaviors by API provider\n\n### [monitoring-usage](https://code.claude.com/docs/en/monitoring-usage.md)\n\n* Quick start\n* Administrator configuration\n* Configuration details\n  * Common configuration variables\n  * Metrics cardinality control\n  * Dynamic headers\n    * Settings configuration\n    * Script requirements\n    * Refresh behavior\n  * Multi-team organization support\n  * Example configurations\n* Available metrics and events\n  * Standard attributes\n  * Metrics\n  * Metric details\n    * Session counter\n    * Lines of code counter\n    * Pull request counter\n    * Commit counter\n    * Cost counter\n    * Token counter\n    * Code edit tool decision counter\n    * Active time counter\n  * Events\n    * User prompt event\n    * Tool result event\n    * API request event\n    * API error event\n    * Tool decision event\n* Interpreting metrics and events data\n  * Usage monitoring\n  * Cost monitoring\n  * Alerting and segmentation\n  * Event analysis\n* Backend considerations\n  * For metrics\n  * For events/logs\n* Service information\n* ROI measurement resources\n* Security/privacy considerations\n* Monitoring Claude Code on Amazon Bedrock\n\n### [costs](https://code.claude.com/docs/en/costs.md)\n\n* Track your costs\n  * Using the `/cost` command\n  * Additional tracking options\n* Managing costs for teams\n  * Rate limit recommendations\n* Reduce token usage\n* Background token usage\n* Tracking version changes and updates\n  * Current version information\n  * Understanding changes in Claude Code behavior\n  * When cost reporting changes\n\n### [analytics](https://code.claude.com/docs/en/analytics.md)\n\n* Access analytics\n  * Required roles\n* Available metrics\n  * Lines of code accepted\n  * Suggestion accept rate\n  * Activity\n  * Spend\n  * Team insights\n* Using analytics effectively\n  * Monitor adoption\n  * Measure productivity\n* Related resources\n\n### [plugin-marketplaces](https://code.claude.com/docs/en/plugin-marketplaces.md)\n\n* Overview\n* Walkthrough: create a local marketplace\n* Create the marketplace file\n* Marketplace schema\n  * Required fields\n  * Owner fields\n  * Optional metadata\n* Plugin entries\n  * Required fields\n  * Optional plugin fields\n* Plugin sources\n  * Relative paths\n  * GitHub repositories\n  * Git repositories\n  * Advanced plugin entries\n* Host and distribute marketplaces\n  * Host on GitHub (recommended)\n  * Host on other git services\n  * Private repositories\n  * Test locally before distribution\n  * Require marketplaces for your team\n  * Managed marketplace restrictions\n    * Common configurations\n    * How restrictions work\n* Validation and testing\n* Troubleshooting\n  * Marketplace not loading\n  * Marketplace validation errors\n  * Plugin installation failures\n  * Private repository authentication fails\n  * Plugins with relative paths fail in URL-based marketplaces\n  * Files not found after installation\n* See also\n\n## Configuration\n\n### [settings](https://code.claude.com/docs/en/settings.md)\n\n* Configuration scopes\n  * Available scopes\n  * When to use each scope\n  * How scopes interact\n  * What uses scopes\n* Settings files\n  * Available settings\n  * Permission settings\n  * Sandbox settings\n  * Attribution settings\n  * File suggestion settings\n  * Hook configuration\n  * Settings precedence\n  * Key points about the configuration system\n  * System prompt\n  * Excluding sensitive files\n* Subagent configuration\n* Plugin configuration\n  * Plugin settings\n    * `enabledPlugins`\n    * `extraKnownMarketplaces`\n    * `strictKnownMarketplaces`\n  * Managing plugins\n* Environment variables\n* Tools available to Claude\n  * Bash tool behavior\n  * Extending tools with hooks\n* See also\n\n### [terminal-config](https://code.claude.com/docs/en/terminal-config.md)\n\n* Themes and appearance\n* Line breaks\n* Notification setup\n  * iTerm 2 system notifications\n  * Custom notification hooks\n* Handling large inputs\n* Vim Mode\n\n### [model-config](https://code.claude.com/docs/en/model-config.md)\n\n* Available models\n  * Model aliases\n  * Setting your model\n* Special model behavior\n  * `default` model setting\n  * `opusplan` model setting\n  * Extended context with \\[1m]\n* Checking your current model\n* Environment variables\n  * Prompt caching configuration\n\n### [memory](https://code.claude.com/docs/en/memory.md)\n\n* Determine memory type\n* CLAUDE.md imports\n* How Claude looks up memories\n* Directly edit memories with `/memory`\n* Set up project memory\n* Modular rules with `.claude/rules/`\n  * Basic structure\n  * Path-specific rules\n  * Glob patterns\n  * Subdirectories\n  * Symlinks\n  * User-level rules\n* Organization-level memory management\n* Memory best practices\n\n### [statusline](https://code.claude.com/docs/en/statusline.md)\n\n* Create a custom status line\n* How it Works\n* JSON Input Structure\n* Example Scripts\n  * Simple Status Line\n  * Git-Aware Status Line\n  * Python Example\n  * Node.js Example\n  * Helper Function Approach\n  * Context Window Usage\n* Tips\n* Troubleshooting\n\n## Reference\n\n### [cli-reference](https://code.claude.com/docs/en/cli-reference.md)\n\n* CLI commands\n* CLI flags\n  * Agents flag format\n  * System prompt flags\n* See also\n\n### [interactive-mode](https://code.claude.com/docs/en/interactive-mode.md)\n\n* Keyboard shortcuts\n  * General controls\n  * Text editing\n  * Theme and display\n  * Multiline input\n  * Quick commands\n* Vim editor mode\n  * Mode switching\n  * Navigation (NORMAL mode)\n  * Editing (NORMAL mode)\n  * Text objects (NORMAL mode)\n* Command history\n  * Reverse search with Ctrl+R\n* Background bash commands\n  * How backgrounding works\n  * Bash mode with `!` prefix\n* See also\n\n### [slash-commands](https://code.claude.com/docs/en/slash-commands.md)\n\n* Built-in slash commands\n* Custom slash commands\n  * Syntax\n    * Parameters\n  * Command types\n    * Project commands\n    * Personal commands\n  * Features\n    * Namespacing\n    * Arguments\n      * All arguments with `$ARGUMENTS`\n      * Individual arguments with `$1`, `$2`, etc.\n    * Bash command execution\n    * File references\n    * Thinking mode\n  * Frontmatter\n    * Define hooks for commands\n* Plugin commands\n  * How plugin commands work\n  * Plugin command structure\n  * Invocation patterns\n* MCP slash commands\n  * Command format\n  * Features\n    * Dynamic discovery\n    * Arguments\n    * Naming conventions\n  * Managing MCP connections\n  * MCP permissions and wildcards\n* `Skill` tool\n  * What the `Skill` tool can invoke\n  * Encourage Claude to use specific commands\n  * Disable the `Skill` tool\n  * Disable specific commands or Skills\n  * `Skill` permission rules\n  * Character budget limit\n* Skills vs slash commands\n  * Use slash commands for\n  * Use Skills for\n  * Key differences\n  * Example comparison\n  * When to use each\n* See also\n\n### [checkpointing](https://code.claude.com/docs/en/checkpointing.md)\n\n* How checkpoints work\n  * Automatic tracking\n  * Rewinding changes\n* Common use cases\n* Limitations\n  * Bash command changes not tracked\n  * External changes not tracked\n  * Not a replacement for version control\n* See also\n\n### [hooks](https://code.claude.com/docs/en/hooks.md)\n\n* Configuration\n  * Structure\n  * Project-Specific Hook Scripts\n  * Plugin hooks\n  * Hooks in Skills, Agents, and Slash Commands\n* Prompt-Based Hooks\n  * How prompt-based hooks work\n  * Configuration\n  * Response schema\n  * Supported hook events\n  * Example: Intelligent Stop hook\n  * Example: SubagentStop with custom logic\n  * Comparison with bash command hooks\n  * Best practices\n* Hook Events\n  * PreToolUse\n  * PermissionRequest\n  * PostToolUse\n  * Notification\n  * UserPromptSubmit\n  * Stop\n  * SubagentStop\n  * PreCompact\n  * SessionStart\n    * Persisting environment variables\n  * SessionEnd\n* Hook Input\n  * PreToolUse Input\n    * Bash tool\n    * Write tool\n    * Edit tool\n    * Read tool\n  * PostToolUse Input\n  * Notification Input\n  * UserPromptSubmit Input\n  * Stop and SubagentStop Input\n  * PreCompact Input\n  * SessionStart Input\n  * SessionEnd Input\n* Hook Output\n  * Simple: Exit Code\n    * Exit Code 2 Behavior\n  * Advanced: JSON Output\n    * Common JSON Fields\n    * `PreToolUse` Decision Control\n    * `PermissionRequest` Decision Control\n    * `PostToolUse` Decision Control\n    * `UserPromptSubmit` Decision Control\n    * `Stop`/`SubagentStop` Decision Control\n    * `SessionStart` Decision Control\n    * `SessionEnd` Decision Control\n    * Exit Code Example: Bash Command Validation\n    * JSON Output Example: UserPromptSubmit to Add Context and Validation\n    * JSON Output Example: PreToolUse with Approval\n* Working with MCP Tools\n  * MCP Tool Naming\n  * Configuring Hooks for MCP Tools\n* Examples\n* Security Considerations\n  * Disclaimer\n  * Security Best Practices\n  * Configuration Safety\n* Hook Execution Details\n* Debugging\n  * Basic Troubleshooting\n  * Advanced Debugging\n  * Debug Output Example\n\n### [plugins-reference](https://code.claude.com/docs/en/plugins-reference.md)\n\n* Plugin components reference\n  * Commands\n  * Agents\n  * Skills\n  * Hooks\n  * MCP servers\n  * LSP servers\n* Plugin installation scopes\n* Plugin manifest schema\n  * Complete schema\n  * Required fields\n  * Metadata fields\n  * Component path fields\n  * Path behavior rules\n  * Environment variables\n* Plugin caching and file resolution\n  * How plugin caching works\n  * Path traversal limitations\n  * Working with external dependencies\n* Plugin directory structure\n  * Standard plugin layout\n  * File locations reference\n* CLI commands reference\n  * plugin install\n  * plugin uninstall\n  * plugin enable\n  * plugin disable\n  * plugin update\n* Debugging and development tools\n  * Debugging commands\n  * Common issues\n  * Example error messages\n  * Hook troubleshooting\n  * MCP server troubleshooting\n  * Directory structure mistakes\n* Distribution and versioning reference\n  * Version management\n* See also\n\n## Resources\n\n### [legal-and-compliance](https://code.claude.com/docs/en/legal-and-compliance.md)\n\n* Legal agreements\n  * License\n  * Commercial agreements\n* Compliance\n  * Healthcare compliance (BAA)\n* Security and trust\n  * Trust and safety\n  * Security vulnerability reporting\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":205,"url":"https://code.claude.com/docs/en/claude_code_docs_map.md"},"sourceToolAssistantUUID":"13bf8f3c-ebad-4dd5-9b52-69a542f42c2a"}
{"parentUuid":"79fa4565-affe-492f-8ff1-9ce75c6691b6","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01C2TC9KnQPVPxhwbAwSCUR2","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me fetch the detailed documentation for the key topics:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":8226,"cache_read_input_tokens":4576,"cache_creation":{"ephemeral_5m_input_tokens":8226,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5dw9ximkNueVRrh9E","type":"assistant","uuid":"e42e04fb-c888-4fac-9624-902c268e90c5","timestamp":"2026-01-18T08:08:49.859Z"}
{"parentUuid":"e42e04fb-c888-4fac-9624-902c268e90c5","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01C2TC9KnQPVPxhwbAwSCUR2","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01QUQXbjgmztX9WLhgBmNSji","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/mcp.md","prompt":"Provide complete information about MCP servers, how to install them, popular ones, and practical examples"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":8226,"cache_read_input_tokens":4576,"cache_creation":{"ephemeral_5m_input_tokens":8226,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5dw9ximkNueVRrh9E","type":"assistant","uuid":"b98879d2-d335-4635-a993-1957126907e7","timestamp":"2026-01-18T08:08:50.426Z"}
{"parentUuid":"b98879d2-d335-4635-a993-1957126907e7","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01C2TC9KnQPVPxhwbAwSCUR2","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01LwzPQaZJPFNYjTT2njAuBw","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/hooks-guide.md","prompt":"Provide complete information about hooks, what they do, hook events, and examples"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":8226,"cache_read_input_tokens":4576,"cache_creation":{"ephemeral_5m_input_tokens":8226,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5dw9ximkNueVRrh9E","type":"assistant","uuid":"714eb065-341e-4300-b830-e94b08525e13","timestamp":"2026-01-18T08:08:50.840Z"}
{"parentUuid":"714eb065-341e-4300-b830-e94b08525e13","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01C2TC9KnQPVPxhwbAwSCUR2","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01V4zZg8PoJUxS31YduNvbbp","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/skills.md","prompt":"Provide complete information about custom skills/slash commands, how to create and configure them"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":8226,"cache_read_input_tokens":4576,"cache_creation":{"ephemeral_5m_input_tokens":8226,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5dw9ximkNueVRrh9E","type":"assistant","uuid":"cb37726e-5c52-4692-83cb-a780a3c7f4c5","timestamp":"2026-01-18T08:08:51.207Z"}
{"parentUuid":"cb37726e-5c52-4692-83cb-a780a3c7f4c5","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01C2TC9KnQPVPxhwbAwSCUR2","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01UvB78c8cHdckJMFV2uGJas","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/settings.md","prompt":"Provide complete information about settings, configuration options, and configuration scopes"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":5,"cache_creation_input_tokens":8226,"cache_read_input_tokens":4576,"cache_creation":{"ephemeral_5m_input_tokens":8226,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5dw9ximkNueVRrh9E","type":"assistant","uuid":"3f290e35-856e-4814-a1de-1e5ebcb9590a","timestamp":"2026-01-18T08:08:51.517Z"}
{"parentUuid":"b98879d2-d335-4635-a993-1957126907e7","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01QUQXbjgmztX9WLhgBmNSji","type":"tool_result","content":"# Connect Claude Code to tools via MCP\n\n> Learn how to connect Claude Code to your tools with the Model Context Protocol.\n\nexport const MCPServersTable = ({platform = \"all\"}) => {\n  const ifYouAreAnAiAgentReadingThisYouShouldInsteadFetch = 'https://api.anthropic.com/mcp-registry/docs';\n  const [servers, setServers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchServers = async () => {\n      try {\n        setLoading(true);\n        const allServers = [];\n        let cursor = null;\n        do {\n          const url = new URL('https://api.anthropic.com/mcp-registry/v0/servers');\n          url.searchParams.set('version', 'latest');\n          url.searchParams.set('limit', '100');\n          if (cursor) {\n            url.searchParams.set('cursor', cursor);\n          }\n          const response = await fetch(url);\n          if (!response.ok) {\n            throw new Error(`Failed to fetch MCP registry: ${response.status}`);\n          }\n          const data = await response.json();\n          allServers.push(...data.servers);\n          cursor = data.metadata?.nextCursor || null;\n        } while (cursor);\n        const transformedServers = allServers.map(item => {\n          const server = item.server;\n          const meta = item._meta?.['com.anthropic.api/mcp-registry'] || ({});\n          const worksWith = meta.worksWith || [];\n          const availability = {\n            claudeCode: worksWith.includes('claude-code'),\n            mcpConnector: worksWith.includes('claude-api'),\n            claudeDesktop: worksWith.includes('claude-desktop')\n          };\n          const remoteUrl = server.remotes?.[0]?.url || meta.url;\n          const remoteType = server.remotes?.[0]?.type;\n          const isTemplatedUrl = remoteUrl?.includes('{');\n          let setupUrl;\n          if (isTemplatedUrl && meta.requiredFields) {\n            const urlField = meta.requiredFields.find(f => f.field === 'url');\n            setupUrl = urlField?.sourceUrl || meta.documentation;\n          }\n          const urls = {};\n          if (!isTemplatedUrl) {\n            if (remoteType === 'streamable-http') {\n              urls.http = remoteUrl;\n            } else if (remoteType === 'sse') {\n              urls.sse = remoteUrl;\n            }\n          }\n          let envVars = [];\n          if (server.packages && server.packages.length > 0) {\n            const npmPackage = server.packages.find(p => p.registryType === 'npm');\n            if (npmPackage) {\n              urls.stdio = `npx -y ${npmPackage.identifier}`;\n              if (npmPackage.environmentVariables) {\n                envVars = npmPackage.environmentVariables;\n              }\n            }\n          }\n          return {\n            name: meta.displayName || server.title || server.name,\n            description: meta.oneLiner || server.description,\n            documentation: meta.documentation,\n            urls: urls,\n            envVars: envVars,\n            availability: availability,\n            customCommands: meta.claudeCodeCopyText ? {\n              claudeCode: meta.claudeCodeCopyText\n            } : undefined,\n            setupUrl: setupUrl\n          };\n        });\n        setServers(transformedServers);\n        setError(null);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching MCP registry:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchServers();\n  }, []);\n  const generateClaudeCodeCommand = server => {\n    if (server.customCommands && server.customCommands.claudeCode) {\n      return server.customCommands.claudeCode;\n    }\n    const serverSlug = server.name.toLowerCase().replace(/[^a-z0-9]/g, '-');\n    if (server.urls.http) {\n      return `claude mcp add ${serverSlug} --transport http ${server.urls.http}`;\n    }\n    if (server.urls.sse) {\n      return `claude mcp add ${serverSlug} --transport sse ${server.urls.sse}`;\n    }\n    if (server.urls.stdio) {\n      const envFlags = server.envVars && server.envVars.length > 0 ? server.envVars.map(v => `--env ${v.name}=YOUR_${v.name}`).join(' ') : '';\n      const baseCommand = `claude mcp add ${serverSlug} --transport stdio`;\n      return envFlags ? `${baseCommand} ${envFlags} -- ${server.urls.stdio}` : `${baseCommand} -- ${server.urls.stdio}`;\n    }\n    return null;\n  };\n  if (loading) {\n    return <div>Loading MCP servers...</div>;\n  }\n  if (error) {\n    return <div>Error loading MCP servers: {error}</div>;\n  }\n  const filteredServers = servers.filter(server => {\n    if (platform === \"claudeCode\") {\n      return server.availability.claudeCode;\n    } else if (platform === \"mcpConnector\") {\n      return server.availability.mcpConnector;\n    } else if (platform === \"claudeDesktop\") {\n      return server.availability.claudeDesktop;\n    } else if (platform === \"all\") {\n      return true;\n    } else {\n      throw new Error(`Unknown platform: ${platform}`);\n    }\n  });\n  return <>\n      <style jsx>{`\n        .cards-container {\n          display: grid;\n          gap: 1rem;\n          margin-bottom: 2rem;\n        }\n        .server-card {\n          border: 1px solid var(--border-color, #e5e7eb);\n          border-radius: 6px;\n          padding: 1rem;\n        }\n        .command-row {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n        .command-row code {\n          font-size: 0.75rem;\n          overflow-x: auto;\n        }\n      `}</style>\n\n      <div className=\"cards-container\">\n        {filteredServers.map(server => {\n    const claudeCodeCommand = generateClaudeCodeCommand(server);\n    const mcpUrl = server.urls.http || server.urls.sse;\n    const commandToShow = platform === \"claudeCode\" ? claudeCodeCommand : mcpUrl;\n    return <div key={server.name} className=\"server-card\">\n              <div>\n                {server.documentation ? <a href={server.documentation}>\n                    <strong>{server.name}</strong>\n                  </a> : <strong>{server.name}</strong>}\n              </div>\n\n              <p style={{\n      margin: '0.5rem 0',\n      fontSize: '0.9rem'\n    }}>\n                {server.description}\n              </p>\n\n              {server.setupUrl && <p style={{\n      margin: '0.25rem 0',\n      fontSize: '0.8rem',\n      fontStyle: 'italic',\n      opacity: 0.7\n    }}>\n                  Requires user-specific URL.{' '}\n                  <a href={server.setupUrl} style={{\n      textDecoration: 'underline'\n    }}>\n                    Get your URL here\n                  </a>.\n                </p>}\n\n              {commandToShow && !server.setupUrl && <>\n                <p style={{\n      display: 'block',\n      fontSize: '0.75rem',\n      fontWeight: 500,\n      minWidth: 'fit-content',\n      marginTop: '0.5rem',\n      marginBottom: 0\n    }}>\n                  {platform === \"claudeCode\" ? \"Command\" : \"URL\"}\n                </p>\n                <div className=\"command-row\">\n                  <code>\n                    {commandToShow}\n                  </code>\n                </div>\n              </>}\n            </div>;\n  })}\n      </div>\n    </>;\n};\n\nClaude Code can connect to hundreds of external tools and data sources through the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction), an open source standard for AI-tool integrations. MCP servers give Claude Code access to your tools, databases, and APIs.\n\n## What you can do with MCP\n\nWith MCP servers connected, you can ask Claude Code to:\n\n* **Implement features from issue trackers**: \"Add the feature described in JIRA issue ENG-4521 and create a PR on GitHub.\"\n* **Analyze monitoring data**: \"Check Sentry and Statsig to check the usage of the feature described in ENG-4521.\"\n* **Query databases**: \"Find emails of 10 random users who used feature ENG-4521, based on our PostgreSQL database.\"\n* **Integrate designs**: \"Update our standard email template based on the new Figma designs that were posted in Slack\"\n* **Automate workflows**: \"Create Gmail drafts inviting these 10 users to a feedback session about the new feature.\"\n\n## Popular MCP servers\n\nHere are some commonly used MCP servers you can connect to Claude Code:\n\n<Warning>\n  Use third party MCP servers at your own risk - Anthropic has not verified\n  the correctness or security of all these servers.\n  Make sure you trust MCP servers you are installing.\n  Be especially careful when using MCP servers that could fetch untrusted\n  content, as these can expose you to prompt injection risk.\n</Warning>\n\n<MCPServersTable platform=\"claudeCode\" />\n\n<Note>\n  **Need a specific integration?** [Find hundreds more MCP servers on GitHub](https://github.com/modelcontextprotocol/servers), or build your own using the [MCP SDK](https://modelcontextprotocol.io/quickstart/server).\n</Note>\n\n## Installing MCP servers\n\nMCP servers can be configured in three different ways depending on your needs:\n\n### Option 1: Add a remote HTTP server\n\nHTTP servers are the recommended option for connecting to remote MCP servers. This is the most widely supported transport for cloud-based services.\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add --transport http <name> <url>\n\n# Real example: Connect to Notion\nclaude mcp add --transport http notion https://mcp.notion.com/mcp\n\n# Example with Bearer token\nclaude mcp add --transport http secure-api https://api.example.com/mcp \\\n  --header \"Authorization: Bearer your-token\"\n```\n\n### Option 2: Add a remote SSE server\n\n<Warning>\n  The SSE (Server-Sent Events) transport is deprecated. Use HTTP servers instead, where available.\n</Warning>\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add --transport sse <name> <url>\n\n# Real example: Connect to Asana\nclaude mcp add --transport sse asana https://mcp.asana.com/sse\n\n# Example with authentication header\nclaude mcp add --transport sse private-api https://api.company.com/sse \\\n  --header \"X-API-Key: your-key-here\"\n```\n\n### Option 3: Add a local stdio server\n\nStdio servers run as local processes on your machine. They're ideal for tools that need direct system access or custom scripts.\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add [options] <name> -- <command> [args...]\n\n# Real example: Add Airtable server\nclaude mcp add --transport stdio --env AIRTABLE_API_KEY=YOUR_KEY airtable \\\n  -- npx -y airtable-mcp-server\n```\n\n<Note>\n  **Important: Option ordering**\n\n  All options (`--transport`, `--env`, `--scope`, `--header`) must come **before** the server name. The `--` (double dash) then separates the server name from the command and arguments that get passed to the MCP server.\n\n  For example:\n\n  * `claude mcp add --transport stdio myserver -- npx server`  runs `npx server`\n  * `claude mcp add --transport stdio --env KEY=value myserver -- python server.py --port 8080`  runs `python server.py --port 8080` with `KEY=value` in environment\n\n  This prevents conflicts between Claude's flags and the server's flags.\n</Note>\n\n### Managing your servers\n\nOnce configured, you can manage your MCP servers with these commands:\n\n```bash  theme={null}\n# List all configured servers\nclaude mcp list\n\n# Get details for a specific server\nclaude mcp get github\n\n# Remove a server\nclaude mcp remove github\n\n# (within Claude Code) Check server status\n/mcp\n```\n\n### Dynamic tool updates\n\nClaude Code supports MCP `list_changed` notifications, allowing MCP servers to dynamically update their available tools, prompts, and resources without requiring you to disconnect and reconnect. When an MCP server sends a `list_changed` notification, Claude Code automatically refreshes the available capabilities from that server.\n\n<Tip>\n  Tips:\n\n  * Use the `--scope` flag to specify where the configuration is stored:\n    * `local` (default): Available only to you in the current project (was called `project` in older versions)\n    * `project`: Shared with everyone in the project via `.mcp.json` file\n    * `user`: Available to you across all projects (was called `global` in older versions)\n  * Set environment variables with `--env` flags (for example, `--env KEY=value`)\n  * Configure MCP server startup timeout using the MCP\\_TIMEOUT environment variable (for example, `MCP_TIMEOUT=10000 claude` sets a 10-second timeout)\n  * Claude Code will display a warning when MCP tool output exceeds 10,000 tokens. To increase this limit, set the `MAX_MCP_OUTPUT_TOKENS` environment variable (for example, `MAX_MCP_OUTPUT_TOKENS=50000`)\n  * Use `/mcp` to authenticate with remote servers that require OAuth 2.0 authentication\n</Tip>\n\n<Warning>\n  **Windows Users**: On native Windows (not WSL), local MCP servers that use `npx` require the `cmd /c` wrapper to ensure proper execution.\n\n  ```bash  theme={null}\n  # This creates command=\"cmd\" which Windows can execute\n  claude mcp add --transport stdio my-server -- cmd /c npx -y @some/package\n  ```\n\n  Without the `cmd /c` wrapper, you'll encounter \"Connection closed\" errors because Windows cannot directly execute `npx`. (See the note above for an explanation of the `--` parameter.)\n</Warning>\n\n### Plugin-provided MCP servers\n\n[Plugins](/en/plugins) can bundle MCP servers, automatically providing tools and integrations when the plugin is enabled. Plugin MCP servers work identically to user-configured servers.\n\n**How plugin MCP servers work**:\n\n* Plugins define MCP servers in `.mcp.json` at the plugin root or inline in `plugin.json`\n* When a plugin is enabled, its MCP servers start automatically\n* Plugin MCP tools appear alongside manually configured MCP tools\n* Plugin servers are managed through plugin installation (not `/mcp` commands)\n\n**Example plugin MCP configuration**:\n\nIn `.mcp.json` at plugin root:\n\n```json  theme={null}\n{\n  \"database-tools\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"DB_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\nOr inline in `plugin.json`:\n\n```json  theme={null}\n{\n  \"name\": \"my-plugin\",\n  \"mcpServers\": {\n    \"plugin-api\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/api-server\",\n      \"args\": [\"--port\", \"8080\"]\n    }\n  }\n}\n```\n\n**Plugin MCP features**:\n\n* **Automatic lifecycle**: Servers start when plugin enables, but you must restart Claude Code to apply MCP server changes (enabling or disabling)\n* **Environment variables**: Use `${CLAUDE_PLUGIN_ROOT}` for plugin-relative paths\n* **User environment access**: Access to same environment variables as manually configured servers\n* **Multiple transport types**: Support stdio, SSE, and HTTP transports (transport support may vary by server)\n\n**Viewing plugin MCP servers**:\n\n```bash  theme={null}\n# Within Claude Code, see all MCP servers including plugin ones\n/mcp\n```\n\nPlugin servers appear in the list with indicators showing they come from plugins.\n\n**Benefits of plugin MCP servers**:\n\n* **Bundled distribution**: Tools and servers packaged together\n* **Automatic setup**: No manual MCP configuration needed\n* **Team consistency**: Everyone gets the same tools when plugin is installed\n\nSee the [plugin components reference](/en/plugins-reference#mcp-servers) for details on bundling MCP servers with plugins.\n\n## MCP installation scopes\n\nMCP servers can be configured at three different scope levels, each serving distinct purposes for managing server accessibility and sharing. Understanding these scopes helps you determine the best way to configure servers for your specific needs.\n\n### Local scope\n\nLocal-scoped servers represent the default configuration level and are stored in `~/.claude.json` under your project's path. These servers remain private to you and are only accessible when working within the current project directory. This scope is ideal for personal development servers, experimental configurations, or servers containing sensitive credentials that shouldn't be shared.\n\n```bash  theme={null}\n# Add a local-scoped server (default)\nclaude mcp add --transport http stripe https://mcp.stripe.com\n\n# Explicitly specify local scope\nclaude mcp add --transport http stripe --scope local https://mcp.stripe.com\n```\n\n### Project scope\n\nProject-scoped servers enable team collaboration by storing configurations in a `.mcp.json` file at your project's root directory. This file is designed to be checked into version control, ensuring all team members have access to the same MCP tools and services. When you add a project-scoped server, Claude Code automatically creates or updates this file with the appropriate configuration structure.\n\n```bash  theme={null}\n# Add a project-scoped server\nclaude mcp add --transport http paypal --scope project https://mcp.paypal.com/mcp\n```\n\nThe resulting `.mcp.json` file follows a standardized format:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"shared-server\": {\n      \"command\": \"/path/to/server\",\n      \"args\": [],\n      \"env\": {}\n    }\n  }\n}\n```\n\nFor security reasons, Claude Code prompts for approval before using project-scoped servers from `.mcp.json` files. If you need to reset these approval choices, use the `claude mcp reset-project-choices` command.\n\n### User scope\n\nUser-scoped servers are stored in `~/.claude.json` and provide cross-project accessibility, making them available across all projects on your machine while remaining private to your user account. This scope works well for personal utility servers, development tools, or services you frequently use across different projects.\n\n```bash  theme={null}\n# Add a user server\nclaude mcp add --transport http hubspot --scope user https://mcp.hubspot.com/anthropic\n```\n\n### Choosing the right scope\n\nSelect your scope based on:\n\n* **Local scope**: Personal servers, experimental configurations, or sensitive credentials specific to one project\n* **Project scope**: Team-shared servers, project-specific tools, or services required for collaboration\n* **User scope**: Personal utilities needed across multiple projects, development tools, or frequently used services\n\n<Note>\n  **Where are MCP servers stored?**\n\n  * **User and local scope**: `~/.claude.json` (in the `mcpServers` field or under project paths)\n  * **Project scope**: `.mcp.json` in your project root (checked into source control)\n  * **Managed**: `managed-mcp.json` in system directories (see [Managed MCP configuration](#managed-mcp-configuration))\n</Note>\n\n### Scope hierarchy and precedence\n\nMCP server configurations follow a clear precedence hierarchy. When servers with the same name exist at multiple scopes, the system resolves conflicts by prioritizing local-scoped servers first, followed by project-scoped servers, and finally user-scoped servers. This design ensures that personal configurations can override shared ones when needed.\n\n### Environment variable expansion in `.mcp.json`\n\nClaude Code supports environment variable expansion in `.mcp.json` files, allowing teams to share configurations while maintaining flexibility for machine-specific paths and sensitive values like API keys.\n\n**Supported syntax:**\n\n* `${VAR}` - Expands to the value of environment variable `VAR`\n* `${VAR:-default}` - Expands to `VAR` if set, otherwise uses `default`\n\n**Expansion locations:**\nEnvironment variables can be expanded in:\n\n* `command` - The server executable path\n* `args` - Command-line arguments\n* `env` - Environment variables passed to the server\n* `url` - For HTTP server types\n* `headers` - For HTTP server authentication\n\n**Example with variable expansion:**\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"api-server\": {\n      \"type\": \"http\",\n      \"url\": \"${API_BASE_URL:-https://api.example.com}/mcp\",\n      \"headers\": {\n        \"Authorization\": \"Bearer ${API_KEY}\"\n      }\n    }\n  }\n}\n```\n\nIf a required environment variable is not set and has no default value, Claude Code will fail to parse the config.\n\n## Practical examples\n\n{/* ### Example: Automate browser testing with Playwright\n\n  ```bash\n  # 1. Add the Playwright MCP server\n  claude mcp add --transport stdio playwright -- npx -y @playwright/mcp@latest\n\n  # 2. Write and run browser tests\n  > \"Test if the login flow works with test@example.com\"\n  > \"Take a screenshot of the checkout page on mobile\"\n  > \"Verify that the search feature returns results\"\n  ``` */}\n\n### Example: Monitor errors with Sentry\n\n```bash  theme={null}\n# 1. Add the Sentry MCP server\nclaude mcp add --transport http sentry https://mcp.sentry.dev/mcp\n\n# 2. Use /mcp to authenticate with your Sentry account\n> /mcp\n\n# 3. Debug production issues\n> \"What are the most common errors in the last 24 hours?\"\n> \"Show me the stack trace for error ID abc123\"\n> \"Which deployment introduced these new errors?\"\n```\n\n### Example: Connect to GitHub for code reviews\n\n```bash  theme={null}\n# 1. Add the GitHub MCP server\nclaude mcp add --transport http github https://api.githubcopilot.com/mcp/\n\n# 2. In Claude Code, authenticate if needed\n> /mcp\n# Select \"Authenticate\" for GitHub\n\n# 3. Now you can ask Claude to work with GitHub\n> \"Review PR #456 and suggest improvements\"\n> \"Create a new issue for the bug we just found\"\n> \"Show me all open PRs assigned to me\"\n```\n\n### Example: Query your PostgreSQL database\n\n```bash  theme={null}\n# 1. Add the database server with your connection string\nclaude mcp add --transport stdio db -- npx -y @bytebase/dbhub \\\n  --dsn \"postgresql://readonly:pass@prod.db.com:5432/analytics\"\n\n# 2. Query your database naturally\n> \"What's our total revenue this month?\"\n> \"Show me the schema for the orders table\"\n> \"Find customers who haven't made a purchase in 90 days\"\n```\n\n## Authenticate with remote MCP servers\n\nMany cloud-based MCP servers require authentication. Claude Code supports OAuth 2.0 for secure connections.\n\n<Steps>\n  <Step title=\"Add the server that requires authentication\">\n    For example:\n\n    ```bash  theme={null}\n    claude mcp add --transport http sentry https://mcp.sentry.dev/mcp\n    ```\n  </Step>\n\n  <Step title=\"Use the /mcp command within Claude Code\">\n    In Claude code, use the command:\n\n    ```\n    > /mcp\n    ```\n\n    Then follow the steps in your browser to login.\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Authentication tokens are stored securely and refreshed automatically\n  * Use \"Clear authentication\" in the `/mcp` menu to revoke access\n  * If your browser doesn't open automatically, copy the provided URL\n  * OAuth authentication works with HTTP servers\n</Tip>\n\n## Add MCP servers from JSON configuration\n\nIf you have a JSON configuration for an MCP server, you can add it directly:\n\n<Steps>\n  <Step title=\"Add an MCP server from JSON\">\n    ```bash  theme={null}\n    # Basic syntax\n    claude mcp add-json <name> '<json>'\n\n    # Example: Adding an HTTP server with JSON configuration\n    claude mcp add-json weather-api '{\"type\":\"http\",\"url\":\"https://api.weather.com/mcp\",\"headers\":{\"Authorization\":\"Bearer token\"}}'\n\n    # Example: Adding a stdio server with JSON configuration\n    claude mcp add-json local-weather '{\"type\":\"stdio\",\"command\":\"/path/to/weather-cli\",\"args\":[\"--api-key\",\"abc123\"],\"env\":{\"CACHE_DIR\":\"/tmp\"}}'\n    ```\n  </Step>\n\n  <Step title=\"Verify the server was added\">\n    ```bash  theme={null}\n    claude mcp get weather-api\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Make sure the JSON is properly escaped in your shell\n  * The JSON must conform to the MCP server configuration schema\n  * You can use `--scope user` to add the server to your user configuration instead of the project-specific one\n</Tip>\n\n## Import MCP servers from Claude Desktop\n\nIf you've already configured MCP servers in Claude Desktop, you can import them:\n\n<Steps>\n  <Step title=\"Import servers from Claude Desktop\">\n    ```bash  theme={null}\n    # Basic syntax \n    claude mcp add-from-claude-desktop \n    ```\n  </Step>\n\n  <Step title=\"Select which servers to import\">\n    After running the command, you'll see an interactive dialog that allows you to select which servers you want to import.\n  </Step>\n\n  <Step title=\"Verify the servers were imported\">\n    ```bash  theme={null}\n    claude mcp list \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * This feature only works on macOS and Windows Subsystem for Linux (WSL)\n  * It reads the Claude Desktop configuration file from its standard location on those platforms\n  * Use the `--scope user` flag to add servers to your user configuration\n  * Imported servers will have the same names as in Claude Desktop\n  * If servers with the same names already exist, they will get a numerical suffix (for example, `server_1`)\n</Tip>\n\n## Use Claude Code as an MCP server\n\nYou can use Claude Code itself as an MCP server that other applications can connect to:\n\n```bash  theme={null}\n# Start Claude as a stdio MCP server\nclaude mcp serve\n```\n\nYou can use this in Claude Desktop by adding this configuration to claude\\_desktop\\_config.json:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"claude-code\": {\n      \"type\": \"stdio\",\n      \"command\": \"claude\",\n      \"args\": [\"mcp\", \"serve\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n<Warning>\n  **Configuring the executable path**: The `command` field must reference the Claude Code executable. If the `claude` command is not in your system's PATH, you'll need to specify the full path to the executable.\n\n  To find the full path:\n\n  ```bash  theme={null}\n  which claude\n  ```\n\n  Then use the full path in your configuration:\n\n  ```json  theme={null}\n  {\n    \"mcpServers\": {\n      \"claude-code\": {\n        \"type\": \"stdio\",\n        \"command\": \"/full/path/to/claude\",\n        \"args\": [\"mcp\", \"serve\"],\n        \"env\": {}\n      }\n    }\n  }\n  ```\n\n  Without the correct executable path, you'll encounter errors like `spawn claude ENOENT`.\n</Warning>\n\n<Tip>\n  Tips:\n\n  * The server provides access to Claude's tools like View, Edit, LS, etc.\n  * In Claude Desktop, try asking Claude to read files in a directory, make edits, and more.\n  * Note that this MCP server is only exposing Claude Code's tools to your MCP client, so your own client is responsible for implementing user confirmation for individual tool calls.\n</Tip>\n\n## MCP output limits and warnings\n\nWhen MCP tools produce large outputs, Claude Code helps manage the token usage to prevent overwhelming your conversation context:\n\n* **Output warning threshold**: Claude Code displays a warning when any MCP tool output exceeds 10,000 tokens\n* **Configurable limit**: You can adjust the maximum allowed MCP output tokens using the `MAX_MCP_OUTPUT_TOKENS` environment variable\n* **Default limit**: The default maximum is 25,000 tokens\n\nTo increase the limit for tools that produce large outputs:\n\n```bash  theme={null}\n# Set a higher limit for MCP tool outputs\nexport MAX_MCP_OUTPUT_TOKENS=50000\nclaude\n```\n\nThis is particularly useful when working with MCP servers that:\n\n* Query large datasets or databases\n* Generate detailed reports or documentation\n* Process extensive log files or debugging information\n\n<Warning>\n  If you frequently encounter output warnings with specific MCP servers, consider increasing the limit or configuring the server to paginate or filter its responses.\n</Warning>\n\n## Use MCP resources\n\nMCP servers can expose resources that you can reference using @ mentions, similar to how you reference files.\n\n### Reference MCP resources\n\n<Steps>\n  <Step title=\"List available resources\">\n    Type `@` in your prompt to see available resources from all connected MCP servers. Resources appear alongside files in the autocomplete menu.\n  </Step>\n\n  <Step title=\"Reference a specific resource\">\n    Use the format `@server:protocol://resource/path` to reference a resource:\n\n    ```\n    > Can you analyze @github:issue://123 and suggest a fix?\n    ```\n\n    ```\n    > Please review the API documentation at @docs:file://api/authentication\n    ```\n  </Step>\n\n  <Step title=\"Multiple resource references\">\n    You can reference multiple resources in a single prompt:\n\n    ```\n    > Compare @postgres:schema://users with @docs:file://database/user-model\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Resources are automatically fetched and included as attachments when referenced\n  * Resource paths are fuzzy-searchable in the @ mention autocomplete\n  * Claude Code automatically provides tools to list and read MCP resources when servers support them\n  * Resources can contain any type of content that the MCP server provides (text, JSON, structured data, etc.)\n</Tip>\n\n## Scale with MCP Tool Search\n\nWhen you have many MCP servers configured, tool definitions can consume a significant portion of your context window. MCP Tool Search solves this by dynamically loading tools on-demand instead of preloading all of them.\n\n### How it works\n\nClaude Code automatically enables Tool Search when your MCP tool descriptions would consume more than 10% of the context window. You can [adjust this threshold](#configure-tool-search) or disable tool search entirely. When triggered:\n\n1. MCP tools are deferred rather than loaded into context upfront\n2. Claude uses a search tool to discover relevant MCP tools when needed\n3. Only the tools Claude actually needs are loaded into context\n4. MCP tools continue to work exactly as before from your perspective\n\n### For MCP server authors\n\nIf you're building an MCP server, the server instructions field becomes more useful with Tool Search enabled. Server instructions help Claude understand when to search for your tools, similar to how [skills](/en/skills) work.\n\nAdd clear, descriptive server instructions that explain:\n\n* What category of tasks your tools handle\n* When Claude should search for your tools\n* Key capabilities your server provides\n\n### Configure tool search\n\nTool search runs in auto mode by default, meaning it activates only when your MCP tool definitions exceed the context threshold. If you have few tools, they load normally without tool search. This feature requires models that support `tool_reference` blocks: Sonnet 4 and later, or Opus 4 and later. Haiku models do not support tool search.\n\nControl tool search behavior with the `ENABLE_TOOL_SEARCH` environment variable:\n\n| Value      | Behavior                                                                           |\n| :--------- | :--------------------------------------------------------------------------------- |\n| `auto`     | Activates when MCP tools exceed 10% of context (default)                           |\n| `auto:<N>` | Activates at custom threshold, where `<N>` is a percentage (e.g., `auto:5` for 5%) |\n| `true`     | Always enabled                                                                     |\n| `false`    | Disabled, all MCP tools loaded upfront                                             |\n\n```bash  theme={null}\n# Use a custom 5% threshold\nENABLE_TOOL_SEARCH=auto:5 claude\n\n# Disable tool search entirely\nENABLE_TOOL_SEARCH=false claude\n```\n\nOr set the value in your [settings.json `env` field](/en/settings#available-settings).\n\nYou can also disable the MCPSearch tool specifically using the `disallowedTools` setting:\n\n```json  theme={null}\n{\n  \"permissions\": {\n    \"deny\": [\"MCPSearch\"]\n  }\n}\n```\n\n## Use MCP prompts as slash commands\n\nMCP servers can expose prompts that become available as slash commands in Claude Code.\n\n### Execute MCP prompts\n\n<Steps>\n  <Step title=\"Discover available prompts\">\n    Type `/` to see all available commands, including those from MCP servers. MCP prompts appear with the format `/mcp__servername__promptname`.\n  </Step>\n\n  <Step title=\"Execute a prompt without arguments\">\n    ```\n    > /mcp__github__list_prs\n    ```\n  </Step>\n\n  <Step title=\"Execute a prompt with arguments\">\n    Many prompts accept arguments. Pass them space-separated after the command:\n\n    ```\n    > /mcp__github__pr_review 456\n    ```\n\n    ```\n    > /mcp__jira__create_issue \"Bug in login flow\" high\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * MCP prompts are dynamically discovered from connected servers\n  * Arguments are parsed based on the prompt's defined parameters\n  * Prompt results are injected directly into the conversation\n  * Server and prompt names are normalized (spaces become underscores)\n</Tip>\n\n## Managed MCP configuration\n\nFor organizations that need centralized control over MCP servers, Claude Code supports two configuration options:\n\n1. **Exclusive control with `managed-mcp.json`**: Deploy a fixed set of MCP servers that users cannot modify or extend\n2. **Policy-based control with allowlists/denylists**: Allow users to add their own servers, but restrict which ones are permitted\n\nThese options allow IT administrators to:\n\n* **Control which MCP servers employees can access**: Deploy a standardized set of approved MCP servers across the organization\n* **Prevent unauthorized MCP servers**: Restrict users from adding unapproved MCP servers\n* **Disable MCP entirely**: Remove MCP functionality completely if needed\n\n### Option 1: Exclusive control with managed-mcp.json\n\nWhen you deploy a `managed-mcp.json` file, it takes **exclusive control** over all MCP servers. Users cannot add, modify, or use any MCP servers other than those defined in this file. This is the simplest approach for organizations that want complete control.\n\nSystem administrators deploy the configuration file to a system-wide directory:\n\n* macOS: `/Library/Application Support/ClaudeCode/managed-mcp.json`\n* Linux and WSL: `/etc/claude-code/managed-mcp.json`\n* Windows: `C:\\Program Files\\ClaudeCode\\managed-mcp.json`\n\n<Note>\n  These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.\n</Note>\n\nThe `managed-mcp.json` file uses the same format as a standard `.mcp.json` file:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"type\": \"http\",\n      \"url\": \"https://api.githubcopilot.com/mcp/\"\n    },\n    \"sentry\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.sentry.dev/mcp\"\n    },\n    \"company-internal\": {\n      \"type\": \"stdio\",\n      \"command\": \"/usr/local/bin/company-mcp-server\",\n      \"args\": [\"--config\", \"/etc/company/mcp-config.json\"],\n      \"env\": {\n        \"COMPANY_API_URL\": \"https://internal.company.com\"\n      }\n    }\n  }\n}\n```\n\n### Option 2: Policy-based control with allowlists and denylists\n\nInstead of taking exclusive control, administrators can allow users to configure their own MCP servers while enforcing restrictions on which servers are permitted. This approach uses `allowedMcpServers` and `deniedMcpServers` in the [managed settings file](/en/settings#settings-files).\n\n<Note>\n  **Choosing between options**: Use Option 1 (`managed-mcp.json`) when you want to deploy a fixed set of servers with no user customization. Use Option 2 (allowlists/denylists) when you want to allow users to add their own servers within policy constraints.\n</Note>\n\n#### Restriction options\n\nEach entry in the allowlist or denylist can restrict servers in three ways:\n\n1. **By server name** (`serverName`): Matches the configured name of the server\n2. **By command** (`serverCommand`): Matches the exact command and arguments used to start stdio servers\n3. **By URL pattern** (`serverUrl`): Matches remote server URLs with wildcard support\n\n**Important**: Each entry must have exactly one of `serverName`, `serverCommand`, or `serverUrl`.\n\n#### Example configuration\n\n```json  theme={null}\n{\n  \"allowedMcpServers\": [\n    // Allow by server name\n    { \"serverName\": \"github\" },\n    { \"serverName\": \"sentry\" },\n\n    // Allow by exact command (for stdio servers)\n    { \"serverCommand\": [\"npx\", \"-y\", \"@modelcontextprotocol/server-filesystem\"] },\n    { \"serverCommand\": [\"python\", \"/usr/local/bin/approved-server.py\"] },\n\n    // Allow by URL pattern (for remote servers)\n    { \"serverUrl\": \"https://mcp.company.com/*\" },\n    { \"serverUrl\": \"https://*.internal.corp/*\" }\n  ],\n  \"deniedMcpServers\": [\n    // Block by server name\n    { \"serverName\": \"dangerous-server\" },\n\n    // Block by exact command (for stdio servers)\n    { \"serverCommand\": [\"npx\", \"-y\", \"unapproved-package\"] },\n\n    // Block by URL pattern (for remote servers)\n    { \"serverUrl\": \"https://*.untrusted.com/*\" }\n  ]\n}\n```\n\n#### How command-based restrictions work\n\n**Exact matching**:\n\n* Command arrays must match **exactly** - both the command and all arguments in the correct order\n* Example: `[\"npx\", \"-y\", \"server\"]` will NOT match `[\"npx\", \"server\"]` or `[\"npx\", \"-y\", \"server\", \"--flag\"]`\n\n**Stdio server behavior**:\n\n* When the allowlist contains **any** `serverCommand` entries, stdio servers **must** match one of those commands\n* Stdio servers cannot pass by name alone when command restrictions are present\n* This ensures administrators can enforce which commands are allowed to run\n\n**Non-stdio server behavior**:\n\n* Remote servers (HTTP, SSE, WebSocket) use URL-based matching when `serverUrl` entries exist in the allowlist\n* If no URL entries exist, remote servers fall back to name-based matching\n* Command restrictions do not apply to remote servers\n\n#### How URL-based restrictions work\n\nURL patterns support wildcards using `*` to match any sequence of characters. This is useful for allowing entire domains or subdomains.\n\n**Wildcard examples**:\n\n* `https://mcp.company.com/*` - Allow all paths on a specific domain\n* `https://*.example.com/*` - Allow any subdomain of example.com\n* `http://localhost:*/*` - Allow any port on localhost\n\n**Remote server behavior**:\n\n* When the allowlist contains **any** `serverUrl` entries, remote servers **must** match one of those URL patterns\n* Remote servers cannot pass by name alone when URL restrictions are present\n* This ensures administrators can enforce which remote endpoints are allowed\n\n<Accordion title=\"Example: URL-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverUrl\": \"https://mcp.company.com/*\" },\n      { \"serverUrl\": \"https://*.internal.corp/*\" }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * HTTP server at `https://mcp.company.com/api`:  Allowed (matches URL pattern)\n  * HTTP server at `https://api.internal.corp/mcp`:  Allowed (matches wildcard subdomain)\n  * HTTP server at `https://external.com/mcp`:  Blocked (doesn't match any URL pattern)\n  * Stdio server with any command:  Blocked (no name or command entries to match)\n</Accordion>\n\n<Accordion title=\"Example: Command-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverCommand\": [\"npx\", \"-y\", \"approved-package\"] }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server with `[\"npx\", \"-y\", \"approved-package\"]`:  Allowed (matches command)\n  * Stdio server with `[\"node\", \"server.js\"]`:  Blocked (doesn't match command)\n  * HTTP server named \"my-api\":  Blocked (no name entries to match)\n</Accordion>\n\n<Accordion title=\"Example: Mixed name and command allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverName\": \"github\" },\n      { \"serverCommand\": [\"npx\", \"-y\", \"approved-package\"] }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server named \"local-tool\" with `[\"npx\", \"-y\", \"approved-package\"]`:  Allowed (matches command)\n  * Stdio server named \"local-tool\" with `[\"node\", \"server.js\"]`:  Blocked (command entries exist but doesn't match)\n  * Stdio server named \"github\" with `[\"node\", \"server.js\"]`:  Blocked (stdio servers must match commands when command entries exist)\n  * HTTP server named \"github\":  Allowed (matches name)\n  * HTTP server named \"other-api\":  Blocked (name doesn't match)\n</Accordion>\n\n<Accordion title=\"Example: Name-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverName\": \"github\" },\n      { \"serverName\": \"internal-tool\" }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server named \"github\" with any command:  Allowed (no command restrictions)\n  * Stdio server named \"internal-tool\" with any command:  Allowed (no command restrictions)\n  * HTTP server named \"github\":  Allowed (matches name)\n  * Any server named \"other\":  Blocked (name doesn't match)\n</Accordion>\n\n#### Allowlist behavior (`allowedMcpServers`)\n\n* `undefined` (default): No restrictions - users can configure any MCP server\n* Empty array `[]`: Complete lockdown - users cannot configure any MCP servers\n* List of entries: Users can only configure servers that match by name, command, or URL pattern\n\n#### Denylist behavior (`deniedMcpServers`)\n\n* `undefined` (default): No servers are blocked\n* Empty array `[]`: No servers are blocked\n* List of entries: Specified servers are explicitly blocked across all scopes\n\n#### Important notes\n\n* **Option 1 and Option 2 can be combined**: If `managed-mcp.json` exists, it has exclusive control and users cannot add servers. Allowlists/denylists still apply to the managed servers themselves.\n* **Denylist takes absolute precedence**: If a server matches a denylist entry (by name, command, or URL), it will be blocked even if it's on the allowlist\n* Name-based, command-based, and URL-based restrictions work together: a server passes if it matches **either** a name entry, a command entry, or a URL pattern (unless blocked by denylist)\n\n<Note>\n  **When using `managed-mcp.json`**: Users cannot add MCP servers through `claude mcp add` or configuration files. The `allowedMcpServers` and `deniedMcpServers` settings still apply to filter which managed servers are actually loaded.\n</Note>\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"caec669f-7428-47e1-8f81-32d7aa125c18","timestamp":"2026-01-18T08:08:51.665Z","toolUseResult":{"bytes":41356,"code":200,"codeText":"OK","result":"# Connect Claude Code to tools via MCP\n\n> Learn how to connect Claude Code to your tools with the Model Context Protocol.\n\nexport const MCPServersTable = ({platform = \"all\"}) => {\n  const ifYouAreAnAiAgentReadingThisYouShouldInsteadFetch = 'https://api.anthropic.com/mcp-registry/docs';\n  const [servers, setServers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchServers = async () => {\n      try {\n        setLoading(true);\n        const allServers = [];\n        let cursor = null;\n        do {\n          const url = new URL('https://api.anthropic.com/mcp-registry/v0/servers');\n          url.searchParams.set('version', 'latest');\n          url.searchParams.set('limit', '100');\n          if (cursor) {\n            url.searchParams.set('cursor', cursor);\n          }\n          const response = await fetch(url);\n          if (!response.ok) {\n            throw new Error(`Failed to fetch MCP registry: ${response.status}`);\n          }\n          const data = await response.json();\n          allServers.push(...data.servers);\n          cursor = data.metadata?.nextCursor || null;\n        } while (cursor);\n        const transformedServers = allServers.map(item => {\n          const server = item.server;\n          const meta = item._meta?.['com.anthropic.api/mcp-registry'] || ({});\n          const worksWith = meta.worksWith || [];\n          const availability = {\n            claudeCode: worksWith.includes('claude-code'),\n            mcpConnector: worksWith.includes('claude-api'),\n            claudeDesktop: worksWith.includes('claude-desktop')\n          };\n          const remoteUrl = server.remotes?.[0]?.url || meta.url;\n          const remoteType = server.remotes?.[0]?.type;\n          const isTemplatedUrl = remoteUrl?.includes('{');\n          let setupUrl;\n          if (isTemplatedUrl && meta.requiredFields) {\n            const urlField = meta.requiredFields.find(f => f.field === 'url');\n            setupUrl = urlField?.sourceUrl || meta.documentation;\n          }\n          const urls = {};\n          if (!isTemplatedUrl) {\n            if (remoteType === 'streamable-http') {\n              urls.http = remoteUrl;\n            } else if (remoteType === 'sse') {\n              urls.sse = remoteUrl;\n            }\n          }\n          let envVars = [];\n          if (server.packages && server.packages.length > 0) {\n            const npmPackage = server.packages.find(p => p.registryType === 'npm');\n            if (npmPackage) {\n              urls.stdio = `npx -y ${npmPackage.identifier}`;\n              if (npmPackage.environmentVariables) {\n                envVars = npmPackage.environmentVariables;\n              }\n            }\n          }\n          return {\n            name: meta.displayName || server.title || server.name,\n            description: meta.oneLiner || server.description,\n            documentation: meta.documentation,\n            urls: urls,\n            envVars: envVars,\n            availability: availability,\n            customCommands: meta.claudeCodeCopyText ? {\n              claudeCode: meta.claudeCodeCopyText\n            } : undefined,\n            setupUrl: setupUrl\n          };\n        });\n        setServers(transformedServers);\n        setError(null);\n      } catch (err) {\n        setError(err.message);\n        console.error('Error fetching MCP registry:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchServers();\n  }, []);\n  const generateClaudeCodeCommand = server => {\n    if (server.customCommands && server.customCommands.claudeCode) {\n      return server.customCommands.claudeCode;\n    }\n    const serverSlug = server.name.toLowerCase().replace(/[^a-z0-9]/g, '-');\n    if (server.urls.http) {\n      return `claude mcp add ${serverSlug} --transport http ${server.urls.http}`;\n    }\n    if (server.urls.sse) {\n      return `claude mcp add ${serverSlug} --transport sse ${server.urls.sse}`;\n    }\n    if (server.urls.stdio) {\n      const envFlags = server.envVars && server.envVars.length > 0 ? server.envVars.map(v => `--env ${v.name}=YOUR_${v.name}`).join(' ') : '';\n      const baseCommand = `claude mcp add ${serverSlug} --transport stdio`;\n      return envFlags ? `${baseCommand} ${envFlags} -- ${server.urls.stdio}` : `${baseCommand} -- ${server.urls.stdio}`;\n    }\n    return null;\n  };\n  if (loading) {\n    return <div>Loading MCP servers...</div>;\n  }\n  if (error) {\n    return <div>Error loading MCP servers: {error}</div>;\n  }\n  const filteredServers = servers.filter(server => {\n    if (platform === \"claudeCode\") {\n      return server.availability.claudeCode;\n    } else if (platform === \"mcpConnector\") {\n      return server.availability.mcpConnector;\n    } else if (platform === \"claudeDesktop\") {\n      return server.availability.claudeDesktop;\n    } else if (platform === \"all\") {\n      return true;\n    } else {\n      throw new Error(`Unknown platform: ${platform}`);\n    }\n  });\n  return <>\n      <style jsx>{`\n        .cards-container {\n          display: grid;\n          gap: 1rem;\n          margin-bottom: 2rem;\n        }\n        .server-card {\n          border: 1px solid var(--border-color, #e5e7eb);\n          border-radius: 6px;\n          padding: 1rem;\n        }\n        .command-row {\n          display: flex;\n          align-items: center;\n          gap: 0.25rem;\n        }\n        .command-row code {\n          font-size: 0.75rem;\n          overflow-x: auto;\n        }\n      `}</style>\n\n      <div className=\"cards-container\">\n        {filteredServers.map(server => {\n    const claudeCodeCommand = generateClaudeCodeCommand(server);\n    const mcpUrl = server.urls.http || server.urls.sse;\n    const commandToShow = platform === \"claudeCode\" ? claudeCodeCommand : mcpUrl;\n    return <div key={server.name} className=\"server-card\">\n              <div>\n                {server.documentation ? <a href={server.documentation}>\n                    <strong>{server.name}</strong>\n                  </a> : <strong>{server.name}</strong>}\n              </div>\n\n              <p style={{\n      margin: '0.5rem 0',\n      fontSize: '0.9rem'\n    }}>\n                {server.description}\n              </p>\n\n              {server.setupUrl && <p style={{\n      margin: '0.25rem 0',\n      fontSize: '0.8rem',\n      fontStyle: 'italic',\n      opacity: 0.7\n    }}>\n                  Requires user-specific URL.{' '}\n                  <a href={server.setupUrl} style={{\n      textDecoration: 'underline'\n    }}>\n                    Get your URL here\n                  </a>.\n                </p>}\n\n              {commandToShow && !server.setupUrl && <>\n                <p style={{\n      display: 'block',\n      fontSize: '0.75rem',\n      fontWeight: 500,\n      minWidth: 'fit-content',\n      marginTop: '0.5rem',\n      marginBottom: 0\n    }}>\n                  {platform === \"claudeCode\" ? \"Command\" : \"URL\"}\n                </p>\n                <div className=\"command-row\">\n                  <code>\n                    {commandToShow}\n                  </code>\n                </div>\n              </>}\n            </div>;\n  })}\n      </div>\n    </>;\n};\n\nClaude Code can connect to hundreds of external tools and data sources through the [Model Context Protocol (MCP)](https://modelcontextprotocol.io/introduction), an open source standard for AI-tool integrations. MCP servers give Claude Code access to your tools, databases, and APIs.\n\n## What you can do with MCP\n\nWith MCP servers connected, you can ask Claude Code to:\n\n* **Implement features from issue trackers**: \"Add the feature described in JIRA issue ENG-4521 and create a PR on GitHub.\"\n* **Analyze monitoring data**: \"Check Sentry and Statsig to check the usage of the feature described in ENG-4521.\"\n* **Query databases**: \"Find emails of 10 random users who used feature ENG-4521, based on our PostgreSQL database.\"\n* **Integrate designs**: \"Update our standard email template based on the new Figma designs that were posted in Slack\"\n* **Automate workflows**: \"Create Gmail drafts inviting these 10 users to a feedback session about the new feature.\"\n\n## Popular MCP servers\n\nHere are some commonly used MCP servers you can connect to Claude Code:\n\n<Warning>\n  Use third party MCP servers at your own risk - Anthropic has not verified\n  the correctness or security of all these servers.\n  Make sure you trust MCP servers you are installing.\n  Be especially careful when using MCP servers that could fetch untrusted\n  content, as these can expose you to prompt injection risk.\n</Warning>\n\n<MCPServersTable platform=\"claudeCode\" />\n\n<Note>\n  **Need a specific integration?** [Find hundreds more MCP servers on GitHub](https://github.com/modelcontextprotocol/servers), or build your own using the [MCP SDK](https://modelcontextprotocol.io/quickstart/server).\n</Note>\n\n## Installing MCP servers\n\nMCP servers can be configured in three different ways depending on your needs:\n\n### Option 1: Add a remote HTTP server\n\nHTTP servers are the recommended option for connecting to remote MCP servers. This is the most widely supported transport for cloud-based services.\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add --transport http <name> <url>\n\n# Real example: Connect to Notion\nclaude mcp add --transport http notion https://mcp.notion.com/mcp\n\n# Example with Bearer token\nclaude mcp add --transport http secure-api https://api.example.com/mcp \\\n  --header \"Authorization: Bearer your-token\"\n```\n\n### Option 2: Add a remote SSE server\n\n<Warning>\n  The SSE (Server-Sent Events) transport is deprecated. Use HTTP servers instead, where available.\n</Warning>\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add --transport sse <name> <url>\n\n# Real example: Connect to Asana\nclaude mcp add --transport sse asana https://mcp.asana.com/sse\n\n# Example with authentication header\nclaude mcp add --transport sse private-api https://api.company.com/sse \\\n  --header \"X-API-Key: your-key-here\"\n```\n\n### Option 3: Add a local stdio server\n\nStdio servers run as local processes on your machine. They're ideal for tools that need direct system access or custom scripts.\n\n```bash  theme={null}\n# Basic syntax\nclaude mcp add [options] <name> -- <command> [args...]\n\n# Real example: Add Airtable server\nclaude mcp add --transport stdio --env AIRTABLE_API_KEY=YOUR_KEY airtable \\\n  -- npx -y airtable-mcp-server\n```\n\n<Note>\n  **Important: Option ordering**\n\n  All options (`--transport`, `--env`, `--scope`, `--header`) must come **before** the server name. The `--` (double dash) then separates the server name from the command and arguments that get passed to the MCP server.\n\n  For example:\n\n  * `claude mcp add --transport stdio myserver -- npx server`  runs `npx server`\n  * `claude mcp add --transport stdio --env KEY=value myserver -- python server.py --port 8080`  runs `python server.py --port 8080` with `KEY=value` in environment\n\n  This prevents conflicts between Claude's flags and the server's flags.\n</Note>\n\n### Managing your servers\n\nOnce configured, you can manage your MCP servers with these commands:\n\n```bash  theme={null}\n# List all configured servers\nclaude mcp list\n\n# Get details for a specific server\nclaude mcp get github\n\n# Remove a server\nclaude mcp remove github\n\n# (within Claude Code) Check server status\n/mcp\n```\n\n### Dynamic tool updates\n\nClaude Code supports MCP `list_changed` notifications, allowing MCP servers to dynamically update their available tools, prompts, and resources without requiring you to disconnect and reconnect. When an MCP server sends a `list_changed` notification, Claude Code automatically refreshes the available capabilities from that server.\n\n<Tip>\n  Tips:\n\n  * Use the `--scope` flag to specify where the configuration is stored:\n    * `local` (default): Available only to you in the current project (was called `project` in older versions)\n    * `project`: Shared with everyone in the project via `.mcp.json` file\n    * `user`: Available to you across all projects (was called `global` in older versions)\n  * Set environment variables with `--env` flags (for example, `--env KEY=value`)\n  * Configure MCP server startup timeout using the MCP\\_TIMEOUT environment variable (for example, `MCP_TIMEOUT=10000 claude` sets a 10-second timeout)\n  * Claude Code will display a warning when MCP tool output exceeds 10,000 tokens. To increase this limit, set the `MAX_MCP_OUTPUT_TOKENS` environment variable (for example, `MAX_MCP_OUTPUT_TOKENS=50000`)\n  * Use `/mcp` to authenticate with remote servers that require OAuth 2.0 authentication\n</Tip>\n\n<Warning>\n  **Windows Users**: On native Windows (not WSL), local MCP servers that use `npx` require the `cmd /c` wrapper to ensure proper execution.\n\n  ```bash  theme={null}\n  # This creates command=\"cmd\" which Windows can execute\n  claude mcp add --transport stdio my-server -- cmd /c npx -y @some/package\n  ```\n\n  Without the `cmd /c` wrapper, you'll encounter \"Connection closed\" errors because Windows cannot directly execute `npx`. (See the note above for an explanation of the `--` parameter.)\n</Warning>\n\n### Plugin-provided MCP servers\n\n[Plugins](/en/plugins) can bundle MCP servers, automatically providing tools and integrations when the plugin is enabled. Plugin MCP servers work identically to user-configured servers.\n\n**How plugin MCP servers work**:\n\n* Plugins define MCP servers in `.mcp.json` at the plugin root or inline in `plugin.json`\n* When a plugin is enabled, its MCP servers start automatically\n* Plugin MCP tools appear alongside manually configured MCP tools\n* Plugin servers are managed through plugin installation (not `/mcp` commands)\n\n**Example plugin MCP configuration**:\n\nIn `.mcp.json` at plugin root:\n\n```json  theme={null}\n{\n  \"database-tools\": {\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n    \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"],\n    \"env\": {\n      \"DB_URL\": \"${DB_URL}\"\n    }\n  }\n}\n```\n\nOr inline in `plugin.json`:\n\n```json  theme={null}\n{\n  \"name\": \"my-plugin\",\n  \"mcpServers\": {\n    \"plugin-api\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/api-server\",\n      \"args\": [\"--port\", \"8080\"]\n    }\n  }\n}\n```\n\n**Plugin MCP features**:\n\n* **Automatic lifecycle**: Servers start when plugin enables, but you must restart Claude Code to apply MCP server changes (enabling or disabling)\n* **Environment variables**: Use `${CLAUDE_PLUGIN_ROOT}` for plugin-relative paths\n* **User environment access**: Access to same environment variables as manually configured servers\n* **Multiple transport types**: Support stdio, SSE, and HTTP transports (transport support may vary by server)\n\n**Viewing plugin MCP servers**:\n\n```bash  theme={null}\n# Within Claude Code, see all MCP servers including plugin ones\n/mcp\n```\n\nPlugin servers appear in the list with indicators showing they come from plugins.\n\n**Benefits of plugin MCP servers**:\n\n* **Bundled distribution**: Tools and servers packaged together\n* **Automatic setup**: No manual MCP configuration needed\n* **Team consistency**: Everyone gets the same tools when plugin is installed\n\nSee the [plugin components reference](/en/plugins-reference#mcp-servers) for details on bundling MCP servers with plugins.\n\n## MCP installation scopes\n\nMCP servers can be configured at three different scope levels, each serving distinct purposes for managing server accessibility and sharing. Understanding these scopes helps you determine the best way to configure servers for your specific needs.\n\n### Local scope\n\nLocal-scoped servers represent the default configuration level and are stored in `~/.claude.json` under your project's path. These servers remain private to you and are only accessible when working within the current project directory. This scope is ideal for personal development servers, experimental configurations, or servers containing sensitive credentials that shouldn't be shared.\n\n```bash  theme={null}\n# Add a local-scoped server (default)\nclaude mcp add --transport http stripe https://mcp.stripe.com\n\n# Explicitly specify local scope\nclaude mcp add --transport http stripe --scope local https://mcp.stripe.com\n```\n\n### Project scope\n\nProject-scoped servers enable team collaboration by storing configurations in a `.mcp.json` file at your project's root directory. This file is designed to be checked into version control, ensuring all team members have access to the same MCP tools and services. When you add a project-scoped server, Claude Code automatically creates or updates this file with the appropriate configuration structure.\n\n```bash  theme={null}\n# Add a project-scoped server\nclaude mcp add --transport http paypal --scope project https://mcp.paypal.com/mcp\n```\n\nThe resulting `.mcp.json` file follows a standardized format:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"shared-server\": {\n      \"command\": \"/path/to/server\",\n      \"args\": [],\n      \"env\": {}\n    }\n  }\n}\n```\n\nFor security reasons, Claude Code prompts for approval before using project-scoped servers from `.mcp.json` files. If you need to reset these approval choices, use the `claude mcp reset-project-choices` command.\n\n### User scope\n\nUser-scoped servers are stored in `~/.claude.json` and provide cross-project accessibility, making them available across all projects on your machine while remaining private to your user account. This scope works well for personal utility servers, development tools, or services you frequently use across different projects.\n\n```bash  theme={null}\n# Add a user server\nclaude mcp add --transport http hubspot --scope user https://mcp.hubspot.com/anthropic\n```\n\n### Choosing the right scope\n\nSelect your scope based on:\n\n* **Local scope**: Personal servers, experimental configurations, or sensitive credentials specific to one project\n* **Project scope**: Team-shared servers, project-specific tools, or services required for collaboration\n* **User scope**: Personal utilities needed across multiple projects, development tools, or frequently used services\n\n<Note>\n  **Where are MCP servers stored?**\n\n  * **User and local scope**: `~/.claude.json` (in the `mcpServers` field or under project paths)\n  * **Project scope**: `.mcp.json` in your project root (checked into source control)\n  * **Managed**: `managed-mcp.json` in system directories (see [Managed MCP configuration](#managed-mcp-configuration))\n</Note>\n\n### Scope hierarchy and precedence\n\nMCP server configurations follow a clear precedence hierarchy. When servers with the same name exist at multiple scopes, the system resolves conflicts by prioritizing local-scoped servers first, followed by project-scoped servers, and finally user-scoped servers. This design ensures that personal configurations can override shared ones when needed.\n\n### Environment variable expansion in `.mcp.json`\n\nClaude Code supports environment variable expansion in `.mcp.json` files, allowing teams to share configurations while maintaining flexibility for machine-specific paths and sensitive values like API keys.\n\n**Supported syntax:**\n\n* `${VAR}` - Expands to the value of environment variable `VAR`\n* `${VAR:-default}` - Expands to `VAR` if set, otherwise uses `default`\n\n**Expansion locations:**\nEnvironment variables can be expanded in:\n\n* `command` - The server executable path\n* `args` - Command-line arguments\n* `env` - Environment variables passed to the server\n* `url` - For HTTP server types\n* `headers` - For HTTP server authentication\n\n**Example with variable expansion:**\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"api-server\": {\n      \"type\": \"http\",\n      \"url\": \"${API_BASE_URL:-https://api.example.com}/mcp\",\n      \"headers\": {\n        \"Authorization\": \"Bearer ${API_KEY}\"\n      }\n    }\n  }\n}\n```\n\nIf a required environment variable is not set and has no default value, Claude Code will fail to parse the config.\n\n## Practical examples\n\n{/* ### Example: Automate browser testing with Playwright\n\n  ```bash\n  # 1. Add the Playwright MCP server\n  claude mcp add --transport stdio playwright -- npx -y @playwright/mcp@latest\n\n  # 2. Write and run browser tests\n  > \"Test if the login flow works with test@example.com\"\n  > \"Take a screenshot of the checkout page on mobile\"\n  > \"Verify that the search feature returns results\"\n  ``` */}\n\n### Example: Monitor errors with Sentry\n\n```bash  theme={null}\n# 1. Add the Sentry MCP server\nclaude mcp add --transport http sentry https://mcp.sentry.dev/mcp\n\n# 2. Use /mcp to authenticate with your Sentry account\n> /mcp\n\n# 3. Debug production issues\n> \"What are the most common errors in the last 24 hours?\"\n> \"Show me the stack trace for error ID abc123\"\n> \"Which deployment introduced these new errors?\"\n```\n\n### Example: Connect to GitHub for code reviews\n\n```bash  theme={null}\n# 1. Add the GitHub MCP server\nclaude mcp add --transport http github https://api.githubcopilot.com/mcp/\n\n# 2. In Claude Code, authenticate if needed\n> /mcp\n# Select \"Authenticate\" for GitHub\n\n# 3. Now you can ask Claude to work with GitHub\n> \"Review PR #456 and suggest improvements\"\n> \"Create a new issue for the bug we just found\"\n> \"Show me all open PRs assigned to me\"\n```\n\n### Example: Query your PostgreSQL database\n\n```bash  theme={null}\n# 1. Add the database server with your connection string\nclaude mcp add --transport stdio db -- npx -y @bytebase/dbhub \\\n  --dsn \"postgresql://readonly:pass@prod.db.com:5432/analytics\"\n\n# 2. Query your database naturally\n> \"What's our total revenue this month?\"\n> \"Show me the schema for the orders table\"\n> \"Find customers who haven't made a purchase in 90 days\"\n```\n\n## Authenticate with remote MCP servers\n\nMany cloud-based MCP servers require authentication. Claude Code supports OAuth 2.0 for secure connections.\n\n<Steps>\n  <Step title=\"Add the server that requires authentication\">\n    For example:\n\n    ```bash  theme={null}\n    claude mcp add --transport http sentry https://mcp.sentry.dev/mcp\n    ```\n  </Step>\n\n  <Step title=\"Use the /mcp command within Claude Code\">\n    In Claude code, use the command:\n\n    ```\n    > /mcp\n    ```\n\n    Then follow the steps in your browser to login.\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Authentication tokens are stored securely and refreshed automatically\n  * Use \"Clear authentication\" in the `/mcp` menu to revoke access\n  * If your browser doesn't open automatically, copy the provided URL\n  * OAuth authentication works with HTTP servers\n</Tip>\n\n## Add MCP servers from JSON configuration\n\nIf you have a JSON configuration for an MCP server, you can add it directly:\n\n<Steps>\n  <Step title=\"Add an MCP server from JSON\">\n    ```bash  theme={null}\n    # Basic syntax\n    claude mcp add-json <name> '<json>'\n\n    # Example: Adding an HTTP server with JSON configuration\n    claude mcp add-json weather-api '{\"type\":\"http\",\"url\":\"https://api.weather.com/mcp\",\"headers\":{\"Authorization\":\"Bearer token\"}}'\n\n    # Example: Adding a stdio server with JSON configuration\n    claude mcp add-json local-weather '{\"type\":\"stdio\",\"command\":\"/path/to/weather-cli\",\"args\":[\"--api-key\",\"abc123\"],\"env\":{\"CACHE_DIR\":\"/tmp\"}}'\n    ```\n  </Step>\n\n  <Step title=\"Verify the server was added\">\n    ```bash  theme={null}\n    claude mcp get weather-api\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Make sure the JSON is properly escaped in your shell\n  * The JSON must conform to the MCP server configuration schema\n  * You can use `--scope user` to add the server to your user configuration instead of the project-specific one\n</Tip>\n\n## Import MCP servers from Claude Desktop\n\nIf you've already configured MCP servers in Claude Desktop, you can import them:\n\n<Steps>\n  <Step title=\"Import servers from Claude Desktop\">\n    ```bash  theme={null}\n    # Basic syntax \n    claude mcp add-from-claude-desktop \n    ```\n  </Step>\n\n  <Step title=\"Select which servers to import\">\n    After running the command, you'll see an interactive dialog that allows you to select which servers you want to import.\n  </Step>\n\n  <Step title=\"Verify the servers were imported\">\n    ```bash  theme={null}\n    claude mcp list \n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * This feature only works on macOS and Windows Subsystem for Linux (WSL)\n  * It reads the Claude Desktop configuration file from its standard location on those platforms\n  * Use the `--scope user` flag to add servers to your user configuration\n  * Imported servers will have the same names as in Claude Desktop\n  * If servers with the same names already exist, they will get a numerical suffix (for example, `server_1`)\n</Tip>\n\n## Use Claude Code as an MCP server\n\nYou can use Claude Code itself as an MCP server that other applications can connect to:\n\n```bash  theme={null}\n# Start Claude as a stdio MCP server\nclaude mcp serve\n```\n\nYou can use this in Claude Desktop by adding this configuration to claude\\_desktop\\_config.json:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"claude-code\": {\n      \"type\": \"stdio\",\n      \"command\": \"claude\",\n      \"args\": [\"mcp\", \"serve\"],\n      \"env\": {}\n    }\n  }\n}\n```\n\n<Warning>\n  **Configuring the executable path**: The `command` field must reference the Claude Code executable. If the `claude` command is not in your system's PATH, you'll need to specify the full path to the executable.\n\n  To find the full path:\n\n  ```bash  theme={null}\n  which claude\n  ```\n\n  Then use the full path in your configuration:\n\n  ```json  theme={null}\n  {\n    \"mcpServers\": {\n      \"claude-code\": {\n        \"type\": \"stdio\",\n        \"command\": \"/full/path/to/claude\",\n        \"args\": [\"mcp\", \"serve\"],\n        \"env\": {}\n      }\n    }\n  }\n  ```\n\n  Without the correct executable path, you'll encounter errors like `spawn claude ENOENT`.\n</Warning>\n\n<Tip>\n  Tips:\n\n  * The server provides access to Claude's tools like View, Edit, LS, etc.\n  * In Claude Desktop, try asking Claude to read files in a directory, make edits, and more.\n  * Note that this MCP server is only exposing Claude Code's tools to your MCP client, so your own client is responsible for implementing user confirmation for individual tool calls.\n</Tip>\n\n## MCP output limits and warnings\n\nWhen MCP tools produce large outputs, Claude Code helps manage the token usage to prevent overwhelming your conversation context:\n\n* **Output warning threshold**: Claude Code displays a warning when any MCP tool output exceeds 10,000 tokens\n* **Configurable limit**: You can adjust the maximum allowed MCP output tokens using the `MAX_MCP_OUTPUT_TOKENS` environment variable\n* **Default limit**: The default maximum is 25,000 tokens\n\nTo increase the limit for tools that produce large outputs:\n\n```bash  theme={null}\n# Set a higher limit for MCP tool outputs\nexport MAX_MCP_OUTPUT_TOKENS=50000\nclaude\n```\n\nThis is particularly useful when working with MCP servers that:\n\n* Query large datasets or databases\n* Generate detailed reports or documentation\n* Process extensive log files or debugging information\n\n<Warning>\n  If you frequently encounter output warnings with specific MCP servers, consider increasing the limit or configuring the server to paginate or filter its responses.\n</Warning>\n\n## Use MCP resources\n\nMCP servers can expose resources that you can reference using @ mentions, similar to how you reference files.\n\n### Reference MCP resources\n\n<Steps>\n  <Step title=\"List available resources\">\n    Type `@` in your prompt to see available resources from all connected MCP servers. Resources appear alongside files in the autocomplete menu.\n  </Step>\n\n  <Step title=\"Reference a specific resource\">\n    Use the format `@server:protocol://resource/path` to reference a resource:\n\n    ```\n    > Can you analyze @github:issue://123 and suggest a fix?\n    ```\n\n    ```\n    > Please review the API documentation at @docs:file://api/authentication\n    ```\n  </Step>\n\n  <Step title=\"Multiple resource references\">\n    You can reference multiple resources in a single prompt:\n\n    ```\n    > Compare @postgres:schema://users with @docs:file://database/user-model\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * Resources are automatically fetched and included as attachments when referenced\n  * Resource paths are fuzzy-searchable in the @ mention autocomplete\n  * Claude Code automatically provides tools to list and read MCP resources when servers support them\n  * Resources can contain any type of content that the MCP server provides (text, JSON, structured data, etc.)\n</Tip>\n\n## Scale with MCP Tool Search\n\nWhen you have many MCP servers configured, tool definitions can consume a significant portion of your context window. MCP Tool Search solves this by dynamically loading tools on-demand instead of preloading all of them.\n\n### How it works\n\nClaude Code automatically enables Tool Search when your MCP tool descriptions would consume more than 10% of the context window. You can [adjust this threshold](#configure-tool-search) or disable tool search entirely. When triggered:\n\n1. MCP tools are deferred rather than loaded into context upfront\n2. Claude uses a search tool to discover relevant MCP tools when needed\n3. Only the tools Claude actually needs are loaded into context\n4. MCP tools continue to work exactly as before from your perspective\n\n### For MCP server authors\n\nIf you're building an MCP server, the server instructions field becomes more useful with Tool Search enabled. Server instructions help Claude understand when to search for your tools, similar to how [skills](/en/skills) work.\n\nAdd clear, descriptive server instructions that explain:\n\n* What category of tasks your tools handle\n* When Claude should search for your tools\n* Key capabilities your server provides\n\n### Configure tool search\n\nTool search runs in auto mode by default, meaning it activates only when your MCP tool definitions exceed the context threshold. If you have few tools, they load normally without tool search. This feature requires models that support `tool_reference` blocks: Sonnet 4 and later, or Opus 4 and later. Haiku models do not support tool search.\n\nControl tool search behavior with the `ENABLE_TOOL_SEARCH` environment variable:\n\n| Value      | Behavior                                                                           |\n| :--------- | :--------------------------------------------------------------------------------- |\n| `auto`     | Activates when MCP tools exceed 10% of context (default)                           |\n| `auto:<N>` | Activates at custom threshold, where `<N>` is a percentage (e.g., `auto:5` for 5%) |\n| `true`     | Always enabled                                                                     |\n| `false`    | Disabled, all MCP tools loaded upfront                                             |\n\n```bash  theme={null}\n# Use a custom 5% threshold\nENABLE_TOOL_SEARCH=auto:5 claude\n\n# Disable tool search entirely\nENABLE_TOOL_SEARCH=false claude\n```\n\nOr set the value in your [settings.json `env` field](/en/settings#available-settings).\n\nYou can also disable the MCPSearch tool specifically using the `disallowedTools` setting:\n\n```json  theme={null}\n{\n  \"permissions\": {\n    \"deny\": [\"MCPSearch\"]\n  }\n}\n```\n\n## Use MCP prompts as slash commands\n\nMCP servers can expose prompts that become available as slash commands in Claude Code.\n\n### Execute MCP prompts\n\n<Steps>\n  <Step title=\"Discover available prompts\">\n    Type `/` to see all available commands, including those from MCP servers. MCP prompts appear with the format `/mcp__servername__promptname`.\n  </Step>\n\n  <Step title=\"Execute a prompt without arguments\">\n    ```\n    > /mcp__github__list_prs\n    ```\n  </Step>\n\n  <Step title=\"Execute a prompt with arguments\">\n    Many prompts accept arguments. Pass them space-separated after the command:\n\n    ```\n    > /mcp__github__pr_review 456\n    ```\n\n    ```\n    > /mcp__jira__create_issue \"Bug in login flow\" high\n    ```\n  </Step>\n</Steps>\n\n<Tip>\n  Tips:\n\n  * MCP prompts are dynamically discovered from connected servers\n  * Arguments are parsed based on the prompt's defined parameters\n  * Prompt results are injected directly into the conversation\n  * Server and prompt names are normalized (spaces become underscores)\n</Tip>\n\n## Managed MCP configuration\n\nFor organizations that need centralized control over MCP servers, Claude Code supports two configuration options:\n\n1. **Exclusive control with `managed-mcp.json`**: Deploy a fixed set of MCP servers that users cannot modify or extend\n2. **Policy-based control with allowlists/denylists**: Allow users to add their own servers, but restrict which ones are permitted\n\nThese options allow IT administrators to:\n\n* **Control which MCP servers employees can access**: Deploy a standardized set of approved MCP servers across the organization\n* **Prevent unauthorized MCP servers**: Restrict users from adding unapproved MCP servers\n* **Disable MCP entirely**: Remove MCP functionality completely if needed\n\n### Option 1: Exclusive control with managed-mcp.json\n\nWhen you deploy a `managed-mcp.json` file, it takes **exclusive control** over all MCP servers. Users cannot add, modify, or use any MCP servers other than those defined in this file. This is the simplest approach for organizations that want complete control.\n\nSystem administrators deploy the configuration file to a system-wide directory:\n\n* macOS: `/Library/Application Support/ClaudeCode/managed-mcp.json`\n* Linux and WSL: `/etc/claude-code/managed-mcp.json`\n* Windows: `C:\\Program Files\\ClaudeCode\\managed-mcp.json`\n\n<Note>\n  These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.\n</Note>\n\nThe `managed-mcp.json` file uses the same format as a standard `.mcp.json` file:\n\n```json  theme={null}\n{\n  \"mcpServers\": {\n    \"github\": {\n      \"type\": \"http\",\n      \"url\": \"https://api.githubcopilot.com/mcp/\"\n    },\n    \"sentry\": {\n      \"type\": \"http\",\n      \"url\": \"https://mcp.sentry.dev/mcp\"\n    },\n    \"company-internal\": {\n      \"type\": \"stdio\",\n      \"command\": \"/usr/local/bin/company-mcp-server\",\n      \"args\": [\"--config\", \"/etc/company/mcp-config.json\"],\n      \"env\": {\n        \"COMPANY_API_URL\": \"https://internal.company.com\"\n      }\n    }\n  }\n}\n```\n\n### Option 2: Policy-based control with allowlists and denylists\n\nInstead of taking exclusive control, administrators can allow users to configure their own MCP servers while enforcing restrictions on which servers are permitted. This approach uses `allowedMcpServers` and `deniedMcpServers` in the [managed settings file](/en/settings#settings-files).\n\n<Note>\n  **Choosing between options**: Use Option 1 (`managed-mcp.json`) when you want to deploy a fixed set of servers with no user customization. Use Option 2 (allowlists/denylists) when you want to allow users to add their own servers within policy constraints.\n</Note>\n\n#### Restriction options\n\nEach entry in the allowlist or denylist can restrict servers in three ways:\n\n1. **By server name** (`serverName`): Matches the configured name of the server\n2. **By command** (`serverCommand`): Matches the exact command and arguments used to start stdio servers\n3. **By URL pattern** (`serverUrl`): Matches remote server URLs with wildcard support\n\n**Important**: Each entry must have exactly one of `serverName`, `serverCommand`, or `serverUrl`.\n\n#### Example configuration\n\n```json  theme={null}\n{\n  \"allowedMcpServers\": [\n    // Allow by server name\n    { \"serverName\": \"github\" },\n    { \"serverName\": \"sentry\" },\n\n    // Allow by exact command (for stdio servers)\n    { \"serverCommand\": [\"npx\", \"-y\", \"@modelcontextprotocol/server-filesystem\"] },\n    { \"serverCommand\": [\"python\", \"/usr/local/bin/approved-server.py\"] },\n\n    // Allow by URL pattern (for remote servers)\n    { \"serverUrl\": \"https://mcp.company.com/*\" },\n    { \"serverUrl\": \"https://*.internal.corp/*\" }\n  ],\n  \"deniedMcpServers\": [\n    // Block by server name\n    { \"serverName\": \"dangerous-server\" },\n\n    // Block by exact command (for stdio servers)\n    { \"serverCommand\": [\"npx\", \"-y\", \"unapproved-package\"] },\n\n    // Block by URL pattern (for remote servers)\n    { \"serverUrl\": \"https://*.untrusted.com/*\" }\n  ]\n}\n```\n\n#### How command-based restrictions work\n\n**Exact matching**:\n\n* Command arrays must match **exactly** - both the command and all arguments in the correct order\n* Example: `[\"npx\", \"-y\", \"server\"]` will NOT match `[\"npx\", \"server\"]` or `[\"npx\", \"-y\", \"server\", \"--flag\"]`\n\n**Stdio server behavior**:\n\n* When the allowlist contains **any** `serverCommand` entries, stdio servers **must** match one of those commands\n* Stdio servers cannot pass by name alone when command restrictions are present\n* This ensures administrators can enforce which commands are allowed to run\n\n**Non-stdio server behavior**:\n\n* Remote servers (HTTP, SSE, WebSocket) use URL-based matching when `serverUrl` entries exist in the allowlist\n* If no URL entries exist, remote servers fall back to name-based matching\n* Command restrictions do not apply to remote servers\n\n#### How URL-based restrictions work\n\nURL patterns support wildcards using `*` to match any sequence of characters. This is useful for allowing entire domains or subdomains.\n\n**Wildcard examples**:\n\n* `https://mcp.company.com/*` - Allow all paths on a specific domain\n* `https://*.example.com/*` - Allow any subdomain of example.com\n* `http://localhost:*/*` - Allow any port on localhost\n\n**Remote server behavior**:\n\n* When the allowlist contains **any** `serverUrl` entries, remote servers **must** match one of those URL patterns\n* Remote servers cannot pass by name alone when URL restrictions are present\n* This ensures administrators can enforce which remote endpoints are allowed\n\n<Accordion title=\"Example: URL-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverUrl\": \"https://mcp.company.com/*\" },\n      { \"serverUrl\": \"https://*.internal.corp/*\" }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * HTTP server at `https://mcp.company.com/api`:  Allowed (matches URL pattern)\n  * HTTP server at `https://api.internal.corp/mcp`:  Allowed (matches wildcard subdomain)\n  * HTTP server at `https://external.com/mcp`:  Blocked (doesn't match any URL pattern)\n  * Stdio server with any command:  Blocked (no name or command entries to match)\n</Accordion>\n\n<Accordion title=\"Example: Command-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverCommand\": [\"npx\", \"-y\", \"approved-package\"] }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server with `[\"npx\", \"-y\", \"approved-package\"]`:  Allowed (matches command)\n  * Stdio server with `[\"node\", \"server.js\"]`:  Blocked (doesn't match command)\n  * HTTP server named \"my-api\":  Blocked (no name entries to match)\n</Accordion>\n\n<Accordion title=\"Example: Mixed name and command allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverName\": \"github\" },\n      { \"serverCommand\": [\"npx\", \"-y\", \"approved-package\"] }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server named \"local-tool\" with `[\"npx\", \"-y\", \"approved-package\"]`:  Allowed (matches command)\n  * Stdio server named \"local-tool\" with `[\"node\", \"server.js\"]`:  Blocked (command entries exist but doesn't match)\n  * Stdio server named \"github\" with `[\"node\", \"server.js\"]`:  Blocked (stdio servers must match commands when command entries exist)\n  * HTTP server named \"github\":  Allowed (matches name)\n  * HTTP server named \"other-api\":  Blocked (name doesn't match)\n</Accordion>\n\n<Accordion title=\"Example: Name-only allowlist\">\n  ```json  theme={null}\n  {\n    \"allowedMcpServers\": [\n      { \"serverName\": \"github\" },\n      { \"serverName\": \"internal-tool\" }\n    ]\n  }\n  ```\n\n  **Result**:\n\n  * Stdio server named \"github\" with any command:  Allowed (no command restrictions)\n  * Stdio server named \"internal-tool\" with any command:  Allowed (no command restrictions)\n  * HTTP server named \"github\":  Allowed (matches name)\n  * Any server named \"other\":  Blocked (name doesn't match)\n</Accordion>\n\n#### Allowlist behavior (`allowedMcpServers`)\n\n* `undefined` (default): No restrictions - users can configure any MCP server\n* Empty array `[]`: Complete lockdown - users cannot configure any MCP servers\n* List of entries: Users can only configure servers that match by name, command, or URL pattern\n\n#### Denylist behavior (`deniedMcpServers`)\n\n* `undefined` (default): No servers are blocked\n* Empty array `[]`: No servers are blocked\n* List of entries: Specified servers are explicitly blocked across all scopes\n\n#### Important notes\n\n* **Option 1 and Option 2 can be combined**: If `managed-mcp.json` exists, it has exclusive control and users cannot add servers. Allowlists/denylists still apply to the managed servers themselves.\n* **Denylist takes absolute precedence**: If a server matches a denylist entry (by name, command, or URL), it will be blocked even if it's on the allowlist\n* Name-based, command-based, and URL-based restrictions work together: a server passes if it matches **either** a name entry, a command entry, or a URL pattern (unless blocked by denylist)\n\n<Note>\n  **When using `managed-mcp.json`**: Users cannot add MCP servers through `claude mcp add` or configuration files. The `allowedMcpServers` and `deniedMcpServers` settings still apply to filter which managed servers are actually loaded.\n</Note>\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":109,"url":"https://code.claude.com/docs/en/mcp.md"},"sourceToolAssistantUUID":"b98879d2-d335-4635-a993-1957126907e7"}
{"parentUuid":"714eb065-341e-4300-b830-e94b08525e13","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01LwzPQaZJPFNYjTT2njAuBw","type":"tool_result","content":"# Get started with Claude Code hooks\n\n> Learn how to customize and extend Claude Code's behavior by registering shell commands\n\nClaude Code hooks are user-defined shell commands that execute at various points\nin Claude Code's lifecycle. Hooks provide deterministic control over Claude\nCode's behavior, ensuring certain actions always happen rather than relying on\nthe LLM to choose to run them.\n\n<Tip>\n  For reference documentation on hooks, see [Hooks reference](/en/hooks).\n</Tip>\n\nExample use cases for hooks include:\n\n* **Notifications**: Customize how you get notified when Claude Code is awaiting\n  your input or permission to run something.\n* **Automatic formatting**: Run `prettier` on .ts files, `gofmt` on .go files,\n  etc. after every file edit.\n* **Logging**: Track and count all executed commands for compliance or\n  debugging.\n* **Feedback**: Provide automated feedback when Claude Code produces code that\n  does not follow your codebase conventions.\n* **Custom permissions**: Block modifications to production files or sensitive\n  directories.\n\nBy encoding these rules as hooks rather than prompting instructions, you turn\nsuggestions into app-level code that executes every time it is expected to run.\n\n<Warning>\n  You must consider the security implication of hooks as you add them, because hooks run automatically during the agent loop with your current environment's credentials.\n  For example, malicious hooks code can exfiltrate your data. Always review your hooks implementation before registering them.\n\n  For full security best practices, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.\n</Warning>\n\n## Hook Events Overview\n\nClaude Code provides several hook events that run at different points in the\nworkflow:\n\n* **PreToolUse**: Runs before tool calls (can block them)\n* **PermissionRequest**: Runs when a permission dialog is shown (can allow or deny)\n* **PostToolUse**: Runs after tool calls complete\n* **UserPromptSubmit**: Runs when the user submits a prompt, before Claude processes it\n* **Notification**: Runs when Claude Code sends notifications\n* **Stop**: Runs when Claude Code finishes responding\n* **SubagentStop**: Runs when subagent tasks complete\n* **PreCompact**: Runs before Claude Code is about to run a compact operation\n* **SessionStart**: Runs when Claude Code starts a new session or resumes an existing session\n* **SessionEnd**: Runs when Claude Code session ends\n\nEach event receives different data and can control Claude's behavior in\ndifferent ways.\n\n## Quickstart\n\nIn this quickstart, you'll add a hook that logs the shell commands that Claude\nCode runs.\n\n### Prerequisites\n\nInstall `jq` for JSON processing in the command line.\n\n### Step 1: Open hooks configuration\n\nRun the `/hooks` [slash command](/en/slash-commands) and select\nthe `PreToolUse` hook event.\n\n`PreToolUse` hooks run before tool calls and can block them while providing\nClaude feedback on what to do differently.\n\n### Step 2: Add a matcher\n\nSelect `+ Add new matcher` to run your hook only on Bash tool calls.\n\nType `Bash` for the matcher.\n\n<Note>You can use `*` to match all tools.</Note>\n\n### Step 3: Add the hook\n\nSelect `+ Add new hook` and enter this command:\n\n```bash  theme={null}\njq -r '\"\\(.tool_input.command) - \\(.tool_input.description // \"No description\")\"' >> ~/.claude/bash-command-log.txt\n```\n\n### Step 4: Save your configuration\n\nFor storage location, select `User settings` since you're logging to your home\ndirectory. This hook will then apply to all projects, not just your current\nproject.\n\nThen press `Esc` until you return to the REPL. Your hook is now registered.\n\n### Step 5: Verify your hook\n\nRun `/hooks` again or check `~/.claude/settings.json` to see your configuration:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"jq -r '\\\"\\\\(.tool_input.command) - \\\\(.tool_input.description // \\\"No description\\\")\\\"' >> ~/.claude/bash-command-log.txt\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Step 6: Test your hook\n\nAsk Claude to run a simple command like `ls` and check your log file:\n\n```bash  theme={null}\ncat ~/.claude/bash-command-log.txt\n```\n\nYou should see entries like:\n\n```\nls - Lists files and directories\n```\n\n## More Examples\n\n<Note>\n  For a complete example implementation, see the [bash command validator example](https://github.com/anthropics/claude-code/blob/main/examples/hooks/bash_command_validator_example.py) in our public codebase.\n</Note>\n\n### Code Formatting Hook\n\nAutomatically format TypeScript files after editing:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"jq -r '.tool_input.file_path' | { read file_path; if echo \\\"$file_path\\\" | grep -q '\\\\.ts$'; then npx prettier --write \\\"$file_path\\\"; fi; }\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Markdown Formatting Hook\n\nAutomatically fix missing language tags and formatting issues in markdown files:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"\\\"$CLAUDE_PROJECT_DIR\\\"/.claude/hooks/markdown_formatter.py\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nCreate `.claude/hooks/markdown_formatter.py` with this content:\n\n````python  theme={null}\n#!/usr/bin/env python3\n\"\"\"\nMarkdown formatter for Claude Code output.\nFixes missing language tags and spacing issues while preserving code content.\n\"\"\"\nimport json\nimport sys\nimport re\nimport os\n\ndef detect_language(code):\n    \"\"\"Best-effort language detection from code content.\"\"\"\n    s = code.strip()\n    \n    # JSON detection\n    if re.search(r'^\\s*[{\\[]', s):\n        try:\n            json.loads(s)\n            return 'json'\n        except:\n            pass\n    \n    # Python detection\n    if re.search(r'^\\s*def\\s+\\w+\\s*\\(', s, re.M) or \\\n       re.search(r'^\\s*(import|from)\\s+\\w+', s, re.M):\n        return 'python'\n    \n    # JavaScript detection  \n    if re.search(r'\\b(function\\s+\\w+\\s*\\(|const\\s+\\w+\\s*=)', s) or \\\n       re.search(r'=>|console\\.(log|error)', s):\n        return 'javascript'\n    \n    # Bash detection\n    if re.search(r'^#!.*\\b(bash|sh)\\b', s, re.M) or \\\n       re.search(r'\\b(if|then|fi|for|in|do|done)\\b', s):\n        return 'bash'\n    \n    # SQL detection\n    if re.search(r'\\b(SELECT|INSERT|UPDATE|DELETE|CREATE)\\s+', s, re.I):\n        return 'sql'\n        \n    return 'text'\n\ndef format_markdown(content):\n    \"\"\"Format markdown content with language detection.\"\"\"\n    # Fix unlabeled code fences\n    def add_lang_to_fence(match):\n        indent, info, body, closing = match.groups()\n        if not info.strip():\n            lang = detect_language(body)\n            return f\"{indent}```{lang}\\n{body}{closing}\\n\"\n        return match.group(0)\n    \n    fence_pattern = r'(?ms)^([ \\t]{0,3})```([^\\n]*)\\n(.*?)(\\n\\1```)\\s*$'\n    content = re.sub(fence_pattern, add_lang_to_fence, content)\n    \n    # Fix excessive blank lines (only outside code fences)\n    content = re.sub(r'\\n{3,}', '\\n\\n', content)\n    \n    return content.rstrip() + '\\n'\n\n# Main execution\ntry:\n    input_data = json.load(sys.stdin)\n    file_path = input_data.get('tool_input', {}).get('file_path', '')\n    \n    if not file_path.endswith(('.md', '.mdx')):\n        sys.exit(0)  # Not a markdown file\n    \n    if os.path.exists(file_path):\n        with open(file_path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        \n        formatted = format_markdown(content)\n        \n        if formatted != content:\n            with open(file_path, 'w', encoding='utf-8') as f:\n                f.write(formatted)\n            print(f\" Fixed markdown formatting in {file_path}\")\n    \nexcept Exception as e:\n    print(f\"Error formatting markdown: {e}\", file=sys.stderr)\n    sys.exit(1)\n````\n\nMake the script executable:\n\n```bash  theme={null}\nchmod +x .claude/hooks/markdown_formatter.py\n```\n\nThis hook automatically:\n\n* Detects programming languages in unlabeled code blocks\n* Adds appropriate language tags for syntax highlighting\n* Fixes excessive blank lines while preserving code content\n* Only processes markdown files (`.md`, `.mdx`)\n\n### Custom Notification Hook\n\nGet desktop notifications when Claude needs input:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"Notification\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"notify-send 'Claude Code' 'Awaiting your input'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### File Protection Hook\n\nBlock edits to sensitive files:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 -c \\\"import json, sys; data=json.load(sys.stdin); path=data.get('tool_input',{}).get('file_path',''); sys.exit(2 if any(p in path for p in ['.env', 'package-lock.json', '.git/']) else 0)\\\"\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Learn more\n\n* For reference documentation on hooks, see [Hooks reference](/en/hooks).\n* For comprehensive security best practices and safety guidelines, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.\n* For troubleshooting steps and debugging techniques, see [Debugging](/en/hooks#debugging) in the hooks reference\n  documentation.\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"eaa9395e-3cd9-4db0-a5b5-f62682f594d0","timestamp":"2026-01-18T08:08:51.691Z","toolUseResult":{"bytes":9765,"code":200,"codeText":"OK","result":"# Get started with Claude Code hooks\n\n> Learn how to customize and extend Claude Code's behavior by registering shell commands\n\nClaude Code hooks are user-defined shell commands that execute at various points\nin Claude Code's lifecycle. Hooks provide deterministic control over Claude\nCode's behavior, ensuring certain actions always happen rather than relying on\nthe LLM to choose to run them.\n\n<Tip>\n  For reference documentation on hooks, see [Hooks reference](/en/hooks).\n</Tip>\n\nExample use cases for hooks include:\n\n* **Notifications**: Customize how you get notified when Claude Code is awaiting\n  your input or permission to run something.\n* **Automatic formatting**: Run `prettier` on .ts files, `gofmt` on .go files,\n  etc. after every file edit.\n* **Logging**: Track and count all executed commands for compliance or\n  debugging.\n* **Feedback**: Provide automated feedback when Claude Code produces code that\n  does not follow your codebase conventions.\n* **Custom permissions**: Block modifications to production files or sensitive\n  directories.\n\nBy encoding these rules as hooks rather than prompting instructions, you turn\nsuggestions into app-level code that executes every time it is expected to run.\n\n<Warning>\n  You must consider the security implication of hooks as you add them, because hooks run automatically during the agent loop with your current environment's credentials.\n  For example, malicious hooks code can exfiltrate your data. Always review your hooks implementation before registering them.\n\n  For full security best practices, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.\n</Warning>\n\n## Hook Events Overview\n\nClaude Code provides several hook events that run at different points in the\nworkflow:\n\n* **PreToolUse**: Runs before tool calls (can block them)\n* **PermissionRequest**: Runs when a permission dialog is shown (can allow or deny)\n* **PostToolUse**: Runs after tool calls complete\n* **UserPromptSubmit**: Runs when the user submits a prompt, before Claude processes it\n* **Notification**: Runs when Claude Code sends notifications\n* **Stop**: Runs when Claude Code finishes responding\n* **SubagentStop**: Runs when subagent tasks complete\n* **PreCompact**: Runs before Claude Code is about to run a compact operation\n* **SessionStart**: Runs when Claude Code starts a new session or resumes an existing session\n* **SessionEnd**: Runs when Claude Code session ends\n\nEach event receives different data and can control Claude's behavior in\ndifferent ways.\n\n## Quickstart\n\nIn this quickstart, you'll add a hook that logs the shell commands that Claude\nCode runs.\n\n### Prerequisites\n\nInstall `jq` for JSON processing in the command line.\n\n### Step 1: Open hooks configuration\n\nRun the `/hooks` [slash command](/en/slash-commands) and select\nthe `PreToolUse` hook event.\n\n`PreToolUse` hooks run before tool calls and can block them while providing\nClaude feedback on what to do differently.\n\n### Step 2: Add a matcher\n\nSelect `+ Add new matcher` to run your hook only on Bash tool calls.\n\nType `Bash` for the matcher.\n\n<Note>You can use `*` to match all tools.</Note>\n\n### Step 3: Add the hook\n\nSelect `+ Add new hook` and enter this command:\n\n```bash  theme={null}\njq -r '\"\\(.tool_input.command) - \\(.tool_input.description // \"No description\")\"' >> ~/.claude/bash-command-log.txt\n```\n\n### Step 4: Save your configuration\n\nFor storage location, select `User settings` since you're logging to your home\ndirectory. This hook will then apply to all projects, not just your current\nproject.\n\nThen press `Esc` until you return to the REPL. Your hook is now registered.\n\n### Step 5: Verify your hook\n\nRun `/hooks` again or check `~/.claude/settings.json` to see your configuration:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"jq -r '\\\"\\\\(.tool_input.command) - \\\\(.tool_input.description // \\\"No description\\\")\\\"' >> ~/.claude/bash-command-log.txt\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Step 6: Test your hook\n\nAsk Claude to run a simple command like `ls` and check your log file:\n\n```bash  theme={null}\ncat ~/.claude/bash-command-log.txt\n```\n\nYou should see entries like:\n\n```\nls - Lists files and directories\n```\n\n## More Examples\n\n<Note>\n  For a complete example implementation, see the [bash command validator example](https://github.com/anthropics/claude-code/blob/main/examples/hooks/bash_command_validator_example.py) in our public codebase.\n</Note>\n\n### Code Formatting Hook\n\nAutomatically format TypeScript files after editing:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"jq -r '.tool_input.file_path' | { read file_path; if echo \\\"$file_path\\\" | grep -q '\\\\.ts$'; then npx prettier --write \\\"$file_path\\\"; fi; }\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Markdown Formatting Hook\n\nAutomatically fix missing language tags and formatting issues in markdown files:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"\\\"$CLAUDE_PROJECT_DIR\\\"/.claude/hooks/markdown_formatter.py\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nCreate `.claude/hooks/markdown_formatter.py` with this content:\n\n````python  theme={null}\n#!/usr/bin/env python3\n\"\"\"\nMarkdown formatter for Claude Code output.\nFixes missing language tags and spacing issues while preserving code content.\n\"\"\"\nimport json\nimport sys\nimport re\nimport os\n\ndef detect_language(code):\n    \"\"\"Best-effort language detection from code content.\"\"\"\n    s = code.strip()\n    \n    # JSON detection\n    if re.search(r'^\\s*[{\\[]', s):\n        try:\n            json.loads(s)\n            return 'json'\n        except:\n            pass\n    \n    # Python detection\n    if re.search(r'^\\s*def\\s+\\w+\\s*\\(', s, re.M) or \\\n       re.search(r'^\\s*(import|from)\\s+\\w+', s, re.M):\n        return 'python'\n    \n    # JavaScript detection  \n    if re.search(r'\\b(function\\s+\\w+\\s*\\(|const\\s+\\w+\\s*=)', s) or \\\n       re.search(r'=>|console\\.(log|error)', s):\n        return 'javascript'\n    \n    # Bash detection\n    if re.search(r'^#!.*\\b(bash|sh)\\b', s, re.M) or \\\n       re.search(r'\\b(if|then|fi|for|in|do|done)\\b', s):\n        return 'bash'\n    \n    # SQL detection\n    if re.search(r'\\b(SELECT|INSERT|UPDATE|DELETE|CREATE)\\s+', s, re.I):\n        return 'sql'\n        \n    return 'text'\n\ndef format_markdown(content):\n    \"\"\"Format markdown content with language detection.\"\"\"\n    # Fix unlabeled code fences\n    def add_lang_to_fence(match):\n        indent, info, body, closing = match.groups()\n        if not info.strip():\n            lang = detect_language(body)\n            return f\"{indent}```{lang}\\n{body}{closing}\\n\"\n        return match.group(0)\n    \n    fence_pattern = r'(?ms)^([ \\t]{0,3})```([^\\n]*)\\n(.*?)(\\n\\1```)\\s*$'\n    content = re.sub(fence_pattern, add_lang_to_fence, content)\n    \n    # Fix excessive blank lines (only outside code fences)\n    content = re.sub(r'\\n{3,}', '\\n\\n', content)\n    \n    return content.rstrip() + '\\n'\n\n# Main execution\ntry:\n    input_data = json.load(sys.stdin)\n    file_path = input_data.get('tool_input', {}).get('file_path', '')\n    \n    if not file_path.endswith(('.md', '.mdx')):\n        sys.exit(0)  # Not a markdown file\n    \n    if os.path.exists(file_path):\n        with open(file_path, 'r', encoding='utf-8') as f:\n            content = f.read()\n        \n        formatted = format_markdown(content)\n        \n        if formatted != content:\n            with open(file_path, 'w', encoding='utf-8') as f:\n                f.write(formatted)\n            print(f\" Fixed markdown formatting in {file_path}\")\n    \nexcept Exception as e:\n    print(f\"Error formatting markdown: {e}\", file=sys.stderr)\n    sys.exit(1)\n````\n\nMake the script executable:\n\n```bash  theme={null}\nchmod +x .claude/hooks/markdown_formatter.py\n```\n\nThis hook automatically:\n\n* Detects programming languages in unlabeled code blocks\n* Adds appropriate language tags for syntax highlighting\n* Fixes excessive blank lines while preserving code content\n* Only processes markdown files (`.md`, `.mdx`)\n\n### Custom Notification Hook\n\nGet desktop notifications when Claude needs input:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"Notification\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"notify-send 'Claude Code' 'Awaiting your input'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### File Protection Hook\n\nBlock edits to sensitive files:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 -c \\\"import json, sys; data=json.load(sys.stdin); path=data.get('tool_input',{}).get('file_path',''); sys.exit(2 if any(p in path for p in ['.env', 'package-lock.json', '.git/']) else 0)\\\"\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Learn more\n\n* For reference documentation on hooks, see [Hooks reference](/en/hooks).\n* For comprehensive security best practices and safety guidelines, see [Security Considerations](/en/hooks#security-considerations) in the hooks reference documentation.\n* For troubleshooting steps and debugging techniques, see [Debugging](/en/hooks#debugging) in the hooks reference\n  documentation.\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":135,"url":"https://code.claude.com/docs/en/hooks-guide.md"},"sourceToolAssistantUUID":"714eb065-341e-4300-b830-e94b08525e13"}
{"parentUuid":"3f290e35-856e-4814-a1de-1e5ebcb9590a","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01UvB78c8cHdckJMFV2uGJas","type":"tool_result","content":"# Claude Code settings\n\n> Configure Claude Code with global and project-level settings, and environment variables.\n\nClaude Code offers a variety of settings to configure its behavior to meet your needs. You can configure Claude Code by running the `/config` command when using the interactive REPL, which opens a tabbed Settings interface where you can view status information and modify configuration options.\n\n## Configuration scopes\n\nClaude Code uses a **scope system** to determine where configurations apply and who they're shared with. Understanding scopes helps you decide how to configure Claude Code for personal use, team collaboration, or enterprise deployment.\n\n### Available scopes\n\n| Scope       | Location                             | Who it affects                       | Shared with team?      |\n| :---------- | :----------------------------------- | :----------------------------------- | :--------------------- |\n| **Managed** | System-level `managed-settings.json` | All users on the machine             | Yes (deployed by IT)   |\n| **User**    | `~/.claude/` directory               | You, across all projects             | No                     |\n| **Project** | `.claude/` in repository             | All collaborators on this repository | Yes (committed to git) |\n| **Local**   | `.claude/*.local.*` files            | You, in this repository only         | No (gitignored)        |\n\n### When to use each scope\n\n**Managed scope** is for:\n\n* Security policies that must be enforced organization-wide\n* Compliance requirements that can't be overridden\n* Standardized configurations deployed by IT/DevOps\n\n**User scope** is best for:\n\n* Personal preferences you want everywhere (themes, editor settings)\n* Tools and plugins you use across all projects\n* API keys and authentication (stored securely)\n\n**Project scope** is best for:\n\n* Team-shared settings (permissions, hooks, MCP servers)\n* Plugins the whole team should have\n* Standardizing tooling across collaborators\n\n**Local scope** is best for:\n\n* Personal overrides for a specific project\n* Testing configurations before sharing with the team\n* Machine-specific settings that won't work for others\n\n### How scopes interact\n\nWhen the same setting is configured in multiple scopes, more specific scopes take precedence:\n\n1. **Managed** (highest) - can't be overridden by anything\n2. **Command line arguments** - temporary session overrides\n3. **Local** - overrides project and user settings\n4. **Project** - overrides user settings\n5. **User** (lowest) - applies when nothing else specifies the setting\n\nFor example, if a permission is allowed in user settings but denied in project settings, the project setting takes precedence and the permission is blocked.\n\n### What uses scopes\n\nScopes apply to many Claude Code features:\n\n| Feature         | User location             | Project location                   | Local location                 |\n| :-------------- | :------------------------ | :--------------------------------- | :----------------------------- |\n| **Settings**    | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **Subagents**   | `~/.claude/agents/`       | `.claude/agents/`                  |                               |\n| **MCP servers** | `~/.claude.json`          | `.mcp.json`                        | `~/.claude.json` (per-project) |\n| **Plugins**     | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **CLAUDE.md**   | `~/.claude/CLAUDE.md`     | `CLAUDE.md` or `.claude/CLAUDE.md` | `CLAUDE.local.md`              |\n\n***\n\n## Settings files\n\nThe `settings.json` file is our official mechanism for configuring Claude\nCode through hierarchical settings:\n\n* **User settings** are defined in `~/.claude/settings.json` and apply to all\n  projects.\n* **Project settings** are saved in your project directory:\n  * `.claude/settings.json` for settings that are checked into source control and shared with your team\n  * `.claude/settings.local.json` for settings that are not checked in, useful for personal preferences and experimentation. Claude Code will configure git to ignore `.claude/settings.local.json` when it is created.\n* **Managed settings**: For organizations that need centralized control, Claude Code supports `managed-settings.json` and `managed-mcp.json` files that can be deployed to system directories:\n\n  * macOS: `/Library/Application Support/ClaudeCode/`\n  * Linux and WSL: `/etc/claude-code/`\n  * Windows: `C:\\Program Files\\ClaudeCode\\`\n\n  <Note>\n    These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.\n  </Note>\n\n  See [Managed settings](/en/iam#managed-settings) and [Managed MCP configuration](/en/mcp#managed-mcp-configuration) for details.\n\n  <Note>\n    Managed deployments can also restrict **plugin marketplace additions** using\n    `strictKnownMarketplaces`. For more information, see [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions).\n  </Note>\n* **Other configuration** is stored in `~/.claude.json`. This file contains your preferences (theme, notification settings, editor mode), OAuth session, [MCP server](/en/mcp) configurations for user and local scopes, per-project state (allowed tools, trust settings), and various caches. Project-scoped MCP servers are stored separately in `.mcp.json`.\n\n```JSON Example settings.json theme={null}\n{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(npm run lint)\",\n      \"Bash(npm run test:*)\",\n      \"Read(~/.zshrc)\"\n    ],\n    \"deny\": [\n      \"Bash(curl:*)\",\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\"\n    ]\n  },\n  \"env\": {\n    \"CLAUDE_CODE_ENABLE_TELEMETRY\": \"1\",\n    \"OTEL_METRICS_EXPORTER\": \"otlp\"\n  },\n  \"companyAnnouncements\": [\n    \"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\",\n    \"Reminder: Code reviews required for all PRs\",\n    \"New security policy in effect\"\n  ]\n}\n```\n\n### Available settings\n\n`settings.json` supports a number of options:\n\n| Key                          | Description                                                                                                                                                                                                                                                                     | Example                                                                 |\n| :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------------------------------------------- |\n| `apiKeyHelper`               | Custom script, to be executed in `/bin/sh`, to generate an auth value. This value will be sent as `X-Api-Key` and `Authorization: Bearer` headers for model requests                                                                                                            | `/bin/generate_temp_api_key.sh`                                         |\n| `cleanupPeriodDays`          | Sessions inactive for longer than this period are deleted at startup. Setting to `0` immediately deletes all sessions. (default: 30 days)                                                                                                                                       | `20`                                                                    |\n| `companyAnnouncements`       | Announcement to display to users at startup. If multiple announcements are provided, they will be cycled through at random.                                                                                                                                                     | `[\"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\"]` |\n| `env`                        | Environment variables that will be applied to every session                                                                                                                                                                                                                     | `{\"FOO\": \"bar\"}`                                                        |\n| `attribution`                | Customize attribution for git commits and pull requests. See [Attribution settings](#attribution-settings)                                                                                                                                                                      | `{\"commit\": \" Generated with Claude Code\", \"pr\": \"\"}`                 |\n| `includeCoAuthoredBy`        | **Deprecated**: Use `attribution` instead. Whether to include the `co-authored-by Claude` byline in git commits and pull requests (default: `true`)                                                                                                                             | `false`                                                                 |\n| `permissions`                | See table below for structure of permissions.                                                                                                                                                                                                                                   |                                                                         |\n| `hooks`                      | Configure custom commands to run before or after tool executions. See [hooks documentation](/en/hooks)                                                                                                                                                                          | `{\"PreToolUse\": {\"Bash\": \"echo 'Running command...'\"}}`                 |\n| `disableAllHooks`            | Disable all [hooks](/en/hooks)                                                                                                                                                                                                                                                  | `true`                                                                  |\n| `allowManagedHooksOnly`      | (Managed settings only) Prevent loading of user, project, and plugin hooks. Only allows managed hooks and SDK hooks. See [Hook configuration](#hook-configuration)                                                                                                              | `true`                                                                  |\n| `model`                      | Override the default model to use for Claude Code                                                                                                                                                                                                                               | `\"claude-sonnet-4-5-20250929\"`                                          |\n| `otelHeadersHelper`          | Script to generate dynamic OpenTelemetry headers. Runs at startup and periodically (see [Dynamic headers](/en/monitoring-usage#dynamic-headers))                                                                                                                                | `/bin/generate_otel_headers.sh`                                         |\n| `statusLine`                 | Configure a custom status line to display context. See [`statusLine` documentation](/en/statusline)                                                                                                                                                                             | `{\"type\": \"command\", \"command\": \"~/.claude/statusline.sh\"}`             |\n| `fileSuggestion`             | Configure a custom script for `@` file autocomplete. See [File suggestion settings](#file-suggestion-settings)                                                                                                                                                                  | `{\"type\": \"command\", \"command\": \"~/.claude/file-suggestion.sh\"}`        |\n| `respectGitignore`           | Control whether the `@` file picker respects `.gitignore` patterns. When `true` (default), files matching `.gitignore` patterns are excluded from suggestions                                                                                                                   | `false`                                                                 |\n| `outputStyle`                | Configure an output style to adjust the system prompt. See [output styles documentation](/en/output-styles)                                                                                                                                                                     | `\"Explanatory\"`                                                         |\n| `forceLoginMethod`           | Use `claudeai` to restrict login to Claude.ai accounts, `console` to restrict login to Claude Console (API usage billing) accounts                                                                                                                                              | `claudeai`                                                              |\n| `forceLoginOrgUUID`          | Specify the UUID of an organization to automatically select it during login, bypassing the organization selection step. Requires `forceLoginMethod` to be set                                                                                                                   | `\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"`                                |\n| `enableAllProjectMcpServers` | Automatically approve all MCP servers defined in project `.mcp.json` files                                                                                                                                                                                                      | `true`                                                                  |\n| `enabledMcpjsonServers`      | List of specific MCP servers from `.mcp.json` files to approve                                                                                                                                                                                                                  | `[\"memory\", \"github\"]`                                                  |\n| `disabledMcpjsonServers`     | List of specific MCP servers from `.mcp.json` files to reject                                                                                                                                                                                                                   | `[\"filesystem\"]`                                                        |\n| `allowedMcpServers`          | When set in managed-settings.json, allowlist of MCP servers users can configure. Undefined = no restrictions, empty array = lockdown. Applies to all scopes. Denylist takes precedence. See [Managed MCP configuration](/en/mcp#managed-mcp-configuration)                      | `[{ \"serverName\": \"github\" }]`                                          |\n| `deniedMcpServers`           | When set in managed-settings.json, denylist of MCP servers that are explicitly blocked. Applies to all scopes including managed servers. Denylist takes precedence over allowlist. See [Managed MCP configuration](/en/mcp#managed-mcp-configuration)                           | `[{ \"serverName\": \"filesystem\" }]`                                      |\n| `strictKnownMarketplaces`    | When set in managed-settings.json, allowlist of plugin marketplaces users can add. Undefined = no restrictions, empty array = lockdown. Applies to marketplace additions only. See [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions) | `[{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }]`                 |\n| `awsAuthRefresh`             | Custom script that modifies the `.aws` directory (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                                | `aws sso login --profile myprofile`                                     |\n| `awsCredentialExport`        | Custom script that outputs JSON with AWS credentials (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                            | `/bin/generate_aws_grant.sh`                                            |\n| `alwaysThinkingEnabled`      | Enable [extended thinking](/en/common-workflows#use-extended-thinking) by default for all sessions. Typically configured via the `/config` command rather than editing directly                                                                                                 | `true`                                                                  |\n| `plansDirectory`             | Customize where plan files are stored. Path is relative to project root. Default: `~/.claude/plans`                                                                                                                                                                             | `\"./plans\"`                                                             |\n| `showTurnDuration`           | Show turn duration messages after responses (e.g., \"Cooked for 1m 6s\"). Set to `false` to hide these messages                                                                                                                                                                   | `true`                                                                  |\n| `language`                   | Configure Claude's preferred response language (e.g., `\"japanese\"`, `\"spanish\"`, `\"french\"`). Claude will respond in this language by default                                                                                                                                   | `\"japanese\"`                                                            |\n| `autoUpdatesChannel`         | Release channel to follow for updates. Use `\"stable\"` for a version that is typically about one week old and skips versions with major regressions, or `\"latest\"` (default) for the most recent release                                                                         | `\"stable\"`                                                              |\n| `spinnerTipsEnabled`         | Show tips in the spinner while Claude is working. Set to `false` to disable tips (default: `true`)                                                                                                                                                                              | `false`                                                                 |\n| `terminalProgressBarEnabled` | Enable the terminal progress bar that shows progress in supported terminals like Windows Terminal and iTerm2 (default: `true`)                                                                                                                                                  | `false`                                                                 |\n\n### Permission settings\n\n| Keys                           | Description                                                                                                                                                                                                                                                                                 | Example                                                                |\n| :----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------- |\n| `allow`                        | Array of [permission rules](/en/iam#configuring-permissions) to allow tool use. **Note:** Bash rules use prefix matching, not regex                                                                                                                                                         | `[ \"Bash(git diff:*)\" ]`                                               |\n| `ask`                          | Array of [permission rules](/en/iam#configuring-permissions) to ask for confirmation upon tool use.                                                                                                                                                                                         | `[ \"Bash(git push:*)\" ]`                                               |\n| `deny`                         | Array of [permission rules](/en/iam#configuring-permissions) to deny tool use. Use this to also exclude sensitive files from Claude Code access. **Note:** Bash patterns are prefix matches and can be bypassed (see [Bash permission limitations](/en/iam#tool-specific-permission-rules)) | `[ \"WebFetch\", \"Bash(curl:*)\", \"Read(./.env)\", \"Read(./secrets/**)\" ]` |\n| `additionalDirectories`        | Additional [working directories](/en/iam#working-directories) that Claude has access to                                                                                                                                                                                                     | `[ \"../docs/\" ]`                                                       |\n| `defaultMode`                  | Default [permission mode](/en/iam#permission-modes) when opening Claude Code                                                                                                                                                                                                                | `\"acceptEdits\"`                                                        |\n| `disableBypassPermissionsMode` | Set to `\"disable\"` to prevent `bypassPermissions` mode from being activated. This disables the `--dangerously-skip-permissions` command-line flag. See [managed settings](/en/iam#managed-settings)                                                                                         | `\"disable\"`                                                            |\n\n### Sandbox settings\n\nConfigure advanced sandboxing behavior. Sandboxing isolates bash commands from your filesystem and network. See [Sandboxing](/en/sandboxing) for details.\n\n**Filesystem and network restrictions** are configured via Read, Edit, and WebFetch permission rules, not via these sandbox settings.\n\n| Keys                        | Description                                                                                                                                                                                                                                                                                                                       | Example                   |\n| :-------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------ |\n| `enabled`                   | Enable bash sandboxing (macOS/Linux only). Default: false                                                                                                                                                                                                                                                                         | `true`                    |\n| `autoAllowBashIfSandboxed`  | Auto-approve bash commands when sandboxed. Default: true                                                                                                                                                                                                                                                                          | `true`                    |\n| `excludedCommands`          | Commands that should run outside of the sandbox                                                                                                                                                                                                                                                                                   | `[\"git\", \"docker\"]`       |\n| `allowUnsandboxedCommands`  | Allow commands to run outside the sandbox via the `dangerouslyDisableSandbox` parameter. When set to `false`, the `dangerouslyDisableSandbox` escape hatch is completely disabled and all commands must run sandboxed (or be in `excludedCommands`). Useful for enterprise policies that require strict sandboxing. Default: true | `false`                   |\n| `network.allowUnixSockets`  | Unix socket paths accessible in sandbox (for SSH agents, etc.)                                                                                                                                                                                                                                                                    | `[\"~/.ssh/agent-socket\"]` |\n| `network.allowLocalBinding` | Allow binding to localhost ports (macOS only). Default: false                                                                                                                                                                                                                                                                     | `true`                    |\n| `network.httpProxyPort`     | HTTP proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                        | `8080`                    |\n| `network.socksProxyPort`    | SOCKS5 proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                      | `8081`                    |\n| `enableWeakerNestedSandbox` | Enable weaker sandbox for unprivileged Docker environments (Linux only). **Reduces security.** Default: false                                                                                                                                                                                                                     | `true`                    |\n\n**Configuration example:**\n\n```json  theme={null}\n{\n  \"sandbox\": {\n    \"enabled\": true,\n    \"autoAllowBashIfSandboxed\": true,\n    \"excludedCommands\": [\"docker\"],\n    \"network\": {\n      \"allowUnixSockets\": [\n        \"/var/run/docker.sock\"\n      ],\n      \"allowLocalBinding\": true\n    }\n  },\n  \"permissions\": {\n    \"deny\": [\n      \"Read(.envrc)\",\n      \"Read(~/.aws/**)\"\n    ]\n  }\n}\n```\n\n**Filesystem and network restrictions** use standard permission rules:\n\n* Use `Read` deny rules to block Claude from reading specific files or directories\n* Use `Edit` allow rules to let Claude write to directories beyond the current working directory\n* Use `Edit` deny rules to block writes to specific paths\n* Use `WebFetch` allow/deny rules to control which network domains Claude can access\n\n### Attribution settings\n\nClaude Code adds attribution to git commits and pull requests. These are configured separately:\n\n* Commits use [git trailers](https://git-scm.com/docs/git-interpret-trailers) (like `Co-Authored-By`) by default,  which can be customized or disabled\n* Pull request descriptions are plain text\n\n| Keys     | Description                                                                                |\n| :------- | :----------------------------------------------------------------------------------------- |\n| `commit` | Attribution for git commits, including any trailers. Empty string hides commit attribution |\n| `pr`     | Attribution for pull request descriptions. Empty string hides pull request attribution     |\n\n**Default commit attribution:**\n\n```\n Generated with [Claude Code](https://claude.com/claude-code)\n\n   Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\n```\n\n**Default pull request attribution:**\n\n```\n Generated with [Claude Code](https://claude.com/claude-code)\n```\n\n**Example:**\n\n```json  theme={null}\n{\n  \"attribution\": {\n    \"commit\": \"Generated with AI\\n\\nCo-Authored-By: AI <ai@example.com>\",\n    \"pr\": \"\"\n  }\n}\n```\n\n<Note>\n  The `attribution` setting takes precedence over the deprecated `includeCoAuthoredBy` setting. To hide all attribution, set `commit` and `pr` to empty strings.\n</Note>\n\n### File suggestion settings\n\nConfigure a custom command for `@` file path autocomplete. The built-in file suggestion uses fast filesystem traversal, but large monorepos may benefit from project-specific indexing such as a pre-built file index or custom tooling.\n\n```json  theme={null}\n{\n  \"fileSuggestion\": {\n    \"type\": \"command\",\n    \"command\": \"~/.claude/file-suggestion.sh\"\n  }\n}\n```\n\nThe command runs with the same environment variables as [hooks](/en/hooks), including `CLAUDE_PROJECT_DIR`. It receives JSON via stdin with a `query` field:\n\n```json  theme={null}\n{\"query\": \"src/comp\"}\n```\n\nOutput newline-separated file paths to stdout (currently limited to 15):\n\n```\nsrc/components/Button.tsx\nsrc/components/Modal.tsx\nsrc/components/Form.tsx\n```\n\n**Example:**\n\n```bash  theme={null}\n#!/bin/bash\nquery=$(cat | jq -r '.query')\nyour-repo-file-index --query \"$query\" | head -20\n```\n\n### Hook configuration\n\n**Managed settings only**: Controls which hooks are allowed to run. This setting can only be configured in [managed settings](#settings-files) and provides administrators with strict control over hook execution.\n\n**Behavior when `allowManagedHooksOnly` is `true`:**\n\n* Managed hooks and SDK hooks are loaded\n* User hooks, project hooks, and plugin hooks are blocked\n\n**Configuration:**\n\n```json  theme={null}\n{\n  \"allowManagedHooksOnly\": true\n}\n```\n\n### Settings precedence\n\nSettings apply in order of precedence. From highest to lowest:\n\n1. **Managed settings** (`managed-settings.json`)\n   * Policies deployed by IT/DevOps to system directories\n   * Cannot be overridden by user or project settings\n\n2. **Command line arguments**\n   * Temporary overrides for a specific session\n\n3. **Local project settings** (`.claude/settings.local.json`)\n   * Personal project-specific settings\n\n4. **Shared project settings** (`.claude/settings.json`)\n   * Team-shared project settings in source control\n\n5. **User settings** (`~/.claude/settings.json`)\n   * Personal global settings\n\nThis hierarchy ensures that organizational policies are always enforced while still allowing teams and individuals to customize their experience.\n\nFor example, if your user settings allow `Bash(npm run:*)` but a project's shared settings deny it, the project setting takes precedence and the command is blocked.\n\n### Key points about the configuration system\n\n* **Memory files (`CLAUDE.md`)**: Contain instructions and context that Claude loads at startup\n* **Settings files (JSON)**: Configure permissions, environment variables, and tool behavior\n* **Slash commands**: Custom commands that can be invoked during a session with `/command-name`\n* **MCP servers**: Extend Claude Code with additional tools and integrations\n* **Precedence**: Higher-level configurations (Managed) override lower-level ones (User/Project)\n* **Inheritance**: Settings are merged, with more specific settings adding to or overriding broader ones\n\n### System prompt\n\nClaude Code's internal system prompt is not published. To add custom instructions, use `CLAUDE.md` files or the `--append-system-prompt` flag.\n\n### Excluding sensitive files\n\nTo prevent Claude Code from accessing files containing sensitive information like API keys, secrets, and environment files, use the `permissions.deny` setting in your `.claude/settings.json` file:\n\n```json  theme={null}\n{\n  \"permissions\": {\n    \"deny\": [\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\",\n      \"Read(./config/credentials.json)\",\n      \"Read(./build)\"\n    ]\n  }\n}\n```\n\nThis replaces the deprecated `ignorePatterns` configuration. Files matching these patterns will be completely invisible to Claude Code, preventing any accidental exposure of sensitive data.\n\n## Subagent configuration\n\nClaude Code supports custom AI subagents that can be configured at both user and project levels. These subagents are stored as Markdown files with YAML frontmatter:\n\n* **User subagents**: `~/.claude/agents/` - Available across all your projects\n* **Project subagents**: `.claude/agents/` - Specific to your project and can be shared with your team\n\nSubagent files define specialized AI assistants with custom prompts and tool permissions. Learn more about creating and using subagents in the [subagents documentation](/en/sub-agents).\n\n## Plugin configuration\n\nClaude Code supports a plugin system that lets you extend functionality with custom commands, agents, hooks, and MCP servers. Plugins are distributed through marketplaces and can be configured at both user and repository levels.\n\n### Plugin settings\n\nPlugin-related settings in `settings.json`:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"formatter@acme-tools\": true,\n    \"deployer@acme-tools\": true,\n    \"analyzer@security-plugins\": false\n  },\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/claude-plugins\"\n    }\n  }\n}\n```\n\n#### `enabledPlugins`\n\nControls which plugins are enabled. Format: `\"plugin-name@marketplace-name\": true/false`\n\n**Scopes**:\n\n* **User settings** (`~/.claude/settings.json`): Personal plugin preferences\n* **Project settings** (`.claude/settings.json`): Project-specific plugins shared with team\n* **Local settings** (`.claude/settings.local.json`): Per-machine overrides (not committed)\n\n**Example**:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"code-formatter@team-tools\": true,\n    \"deployment-tools@team-tools\": true,\n    \"experimental-features@personal\": false\n  }\n}\n```\n\n#### `extraKnownMarketplaces`\n\nDefines additional marketplaces that should be made available for the repository. Typically used in repository-level settings to ensure team members have access to required plugin sources.\n\n**When a repository includes `extraKnownMarketplaces`**:\n\n1. Team members are prompted to install the marketplace when they trust the folder\n2. Team members are then prompted to install plugins from that marketplace\n3. Users can skip unwanted marketplaces or plugins (stored in user settings)\n4. Installation respects trust boundaries and requires explicit consent\n\n**Example**:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"acme-corp/claude-plugins\"\n      }\n    },\n    \"security-plugins\": {\n      \"source\": {\n        \"source\": \"git\",\n        \"url\": \"https://git.example.com/security/plugins.git\"\n      }\n    }\n  }\n}\n```\n\n**Marketplace source types**:\n\n* `github`: GitHub repository (uses `repo`)\n* `git`: Any git URL (uses `url`)\n* `directory`: Local filesystem path (uses `path`, for development only)\n\n#### `strictKnownMarketplaces`\n\n**Managed settings only**: Controls which plugin marketplaces users are allowed to add. This setting can only be configured in [`managed-settings.json`](/en/iam#managed-settings) and provides administrators with strict control over marketplace sources.\n\n**Managed settings file locations**:\n\n* **macOS**: `/Library/Application Support/ClaudeCode/managed-settings.json`\n* **Linux and WSL**: `/etc/claude-code/managed-settings.json`\n* **Windows**: `C:\\Program Files\\ClaudeCode\\managed-settings.json`\n\n**Key characteristics**:\n\n* Only available in managed settings (`managed-settings.json`)\n* Cannot be overridden by user or project settings (highest precedence)\n* Enforced BEFORE network/filesystem operations (blocked sources never execute)\n* Uses exact matching for source specifications (including `ref`, `path` for git sources)\n\n**Allowlist behavior**:\n\n* `undefined` (default): No restrictions - users can add any marketplace\n* Empty array `[]`: Complete lockdown - users cannot add any new marketplaces\n* List of sources: Users can only add marketplaces that match exactly\n\n**All supported source types**:\n\nThe allowlist supports six marketplace source types. Each source must match exactly for a user's marketplace addition to be allowed.\n\n1. **GitHub repositories**:\n\n```json  theme={null}\n{ \"source\": \"github\", \"repo\": \"acme-corp/approved-plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/security-tools\", \"ref\": \"v2.0\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\", \"path\": \"marketplace\" }\n```\n\nFields: `repo` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n2. **Git repositories**:\n\n```json  theme={null}\n{ \"source\": \"git\", \"url\": \"https://gitlab.example.com/tools/plugins.git\" }\n{ \"source\": \"git\", \"url\": \"https://bitbucket.org/acme-corp/plugins.git\", \"ref\": \"production\" }\n{ \"source\": \"git\", \"url\": \"ssh://git@git.example.com/plugins.git\", \"ref\": \"v3.1\", \"path\": \"approved\" }\n```\n\nFields: `url` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n3. **URL-based marketplaces**:\n\n```json  theme={null}\n{ \"source\": \"url\", \"url\": \"https://plugins.example.com/marketplace.json\" }\n{ \"source\": \"url\", \"url\": \"https://cdn.example.com/marketplace.json\", \"headers\": { \"Authorization\": \"Bearer ${TOKEN}\" } }\n```\n\nFields: `url` (required), `headers` (optional: HTTP headers for authenticated access)\n\n<Note>\n  URL-based marketplaces only download the `marketplace.json` file. They do not download plugin files from the server. Plugins in URL-based marketplaces must use external sources (GitHub, npm, or git URLs) rather than relative paths. For plugins with relative paths, use a Git-based marketplace instead. See [Troubleshooting](/en/plugin-marketplaces#plugins-with-relative-paths-fail-in-url-based-marketplaces) for details.\n</Note>\n\n4. **NPM packages**:\n\n```json  theme={null}\n{ \"source\": \"npm\", \"package\": \"@acme-corp/claude-plugins\" }\n{ \"source\": \"npm\", \"package\": \"@acme-corp/approved-marketplace\" }\n```\n\nFields: `package` (required, supports scoped packages)\n\n5. **File paths**:\n\n```json  theme={null}\n{ \"source\": \"file\", \"path\": \"/usr/local/share/claude/acme-marketplace.json\" }\n{ \"source\": \"file\", \"path\": \"/opt/acme-corp/plugins/marketplace.json\" }\n```\n\nFields: `path` (required: absolute path to marketplace.json file)\n\n6. **Directory paths**:\n\n```json  theme={null}\n{ \"source\": \"directory\", \"path\": \"/usr/local/share/claude/acme-plugins\" }\n{ \"source\": \"directory\", \"path\": \"/opt/acme-corp/approved-marketplaces\" }\n```\n\nFields: `path` (required: absolute path to directory containing `.claude-plugin/marketplace.json`)\n\n**Configuration examples**:\n\nExample - Allow specific marketplaces only:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/approved-plugins\"\n    },\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/security-tools\",\n      \"ref\": \"v2.0\"\n    },\n    {\n      \"source\": \"url\",\n      \"url\": \"https://plugins.example.com/marketplace.json\"\n    },\n    {\n      \"source\": \"npm\",\n      \"package\": \"@acme-corp/compliance-plugins\"\n    }\n  ]\n}\n```\n\nExample - Disable all marketplace additions:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": []\n}\n```\n\n**Exact matching requirements**:\n\nMarketplace sources must match **exactly** for a user's addition to be allowed. For git-based sources (`github` and `git`), this includes all optional fields:\n\n* The `repo` or `url` must match exactly\n* The `ref` field must match exactly (or both be undefined)\n* The `path` field must match exactly (or both be undefined)\n\nExamples of sources that **do NOT match**:\n\n```json  theme={null}\n// These are DIFFERENT sources:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\" }\n\n// These are also DIFFERENT:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"path\": \"marketplace\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n```\n\n**Comparison with `extraKnownMarketplaces`**:\n\n| Aspect                | `strictKnownMarketplaces`            | `extraKnownMarketplaces`             |\n| --------------------- | ------------------------------------ | ------------------------------------ |\n| **Purpose**           | Organizational policy enforcement    | Team convenience                     |\n| **Settings file**     | `managed-settings.json` only         | Any settings file                    |\n| **Behavior**          | Blocks non-allowlisted additions     | Auto-installs missing marketplaces   |\n| **When enforced**     | Before network/filesystem operations | After user trust prompt              |\n| **Can be overridden** | No (highest precedence)              | Yes (by higher precedence settings)  |\n| **Source format**     | Direct source object                 | Named marketplace with nested source |\n| **Use case**          | Compliance, security restrictions    | Onboarding, standardization          |\n\n**Format difference**:\n\n`strictKnownMarketplaces` uses direct source objects:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n  ]\n}\n```\n\n`extraKnownMarketplaces` requires named marketplaces:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n    }\n  }\n}\n```\n\n**Important notes**:\n\n* Restrictions are checked BEFORE any network requests or filesystem operations\n* When blocked, users see clear error messages indicating the source is blocked by managed policy\n* The restriction applies only to adding NEW marketplaces; previously installed marketplaces remain accessible\n* Managed settings have the highest precedence and cannot be overridden\n\nSee [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions) for user-facing documentation.\n\n### Managing plugins\n\nUse the `/plugin` command to manage plugins interactively:\n\n* Browse available plugins from marketplaces\n* Install/uninstall plugins\n* Enable/disable plugins\n* View plugin details (commands, agents, hooks provided)\n* Add/remove marketplaces\n\nLearn more about the plugin system in the [plugins documentation](/en/plugins).\n\n## Environment variables\n\nClaude Code supports the following environment variables to control its behavior:\n\n<Note>\n  All environment variables can also be configured in [`settings.json`](#available-settings). This is useful as a way to automatically set environment variables for each session, or to roll out a set of environment variables for your whole team or organization.\n</Note>\n\n| Variable                                      | Purpose                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| :-------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `ANTHROPIC_API_KEY`                           | API key sent as `X-Api-Key` header, typically for the Claude SDK (for interactive usage, run `/login`)                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `ANTHROPIC_AUTH_TOKEN`                        | Custom value for the `Authorization` header (the value you set here will be prefixed with `Bearer `)                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `ANTHROPIC_CUSTOM_HEADERS`                    | Custom headers you want to add to the request (in `Name: Value` format)                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `ANTHROPIC_DEFAULT_HAIKU_MODEL`               | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_DEFAULT_OPUS_MODEL`                | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_DEFAULT_SONNET_MODEL`              | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_FOUNDRY_API_KEY`                   | API key for Microsoft Foundry authentication (see [Microsoft Foundry](/en/microsoft-foundry))                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `ANTHROPIC_MODEL`                             | Name of the model setting to use (see [Model Configuration](/en/model-config#environment-variables))                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `ANTHROPIC_SMALL_FAST_MODEL`                  | \\[DEPRECATED] Name of [Haiku-class model for background tasks](/en/costs)                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION`       | Override AWS region for the Haiku-class model when using Bedrock                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `AWS_BEARER_TOKEN_BEDROCK`                    | Bedrock API key for authentication (see [Bedrock API keys](https://aws.amazon.com/blogs/machine-learning/accelerate-ai-development-with-amazon-bedrock-api-keys/))                                                                                                                                                                                                                                                                                                                                                                     |\n| `BASH_DEFAULT_TIMEOUT_MS`                     | Default timeout for long-running bash commands                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `BASH_MAX_OUTPUT_LENGTH`                      | Maximum number of characters in bash outputs before they are middle-truncated                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `BASH_MAX_TIMEOUT_MS`                         | Maximum timeout the model can set for long-running bash commands                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `CLAUDE_AUTOCOMPACT_PCT_OVERRIDE`             | Set the percentage of context capacity (1-100) at which auto-compaction triggers. By default, auto-compaction triggers at approximately 95% capacity. Use lower values like `50` to compact earlier. Values above the default threshold have no effect. Applies to both main conversations and subagents. This percentage aligns with the `context_window.used_percentage` field available in [status line](/en/statusline)                                                                                                            |\n| `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR`    | Return to the original working directory after each Bash command                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `CLAUDE_CODE_API_KEY_HELPER_TTL_MS`           | Interval in milliseconds at which credentials should be refreshed (when using `apiKeyHelper`)                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `CLAUDE_CODE_CLIENT_CERT`                     | Path to client certificate file for mTLS authentication                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_CLIENT_KEY_PASSPHRASE`           | Passphrase for encrypted CLAUDE\\_CODE\\_CLIENT\\_KEY (optional)                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `CLAUDE_CODE_CLIENT_KEY`                      | Path to client private key file for mTLS authentication                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_DISABLE_EXPERIMENTAL_BETAS`      | Set to `1` to disable Anthropic API-specific `anthropic-beta` headers. Use this if experiencing issues like \"Unexpected value(s) for the `anthropic-beta` header\" when using an LLM gateway with third-party providers                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_DISABLE_BACKGROUND_TASKS`        | Set to `1` to disable all background task functionality, including the `run_in_background` parameter on Bash and subagent tools, auto-backgrounding, and the Ctrl+B shortcut                                                                                                                                                                                                                                                                                                                                                           |\n| `CLAUDE_CODE_EXIT_AFTER_STOP_DELAY`           | Time in milliseconds to wait after the query loop becomes idle before automatically exiting. Useful for automated workflows and scripts using SDK mode                                                                                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_PROXY_RESOLVES_HOSTS`            | Set to `true` to allow the proxy to perform DNS resolution instead of the caller. Opt-in for environments where the proxy should handle hostname resolution                                                                                                                                                                                                                                                                                                                                                                            |\n| `CLAUDE_CODE_TMPDIR`                          | Override the temp directory used for internal temp files. Claude Code appends `/claude/` to this path. Default: `/tmp` on Unix/macOS, `os.tmpdir()` on Windows                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC`    | Equivalent of setting `DISABLE_AUTOUPDATER`, `DISABLE_BUG_COMMAND`, `DISABLE_ERROR_REPORTING`, and `DISABLE_TELEMETRY`                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_DISABLE_TERMINAL_TITLE`          | Set to `1` to disable automatic terminal title updates based on conversation context                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `CLAUDE_CODE_FILE_READ_MAX_OUTPUT_TOKENS`     | Override the default token limit for file reads. Useful when you need to read larger files in full                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_HIDE_ACCOUNT_INFO`               | Set to `1` to hide your email address and organization name from the Claude Code UI. Useful when streaming or recording                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_IDE_SKIP_AUTO_INSTALL`           | Skip auto-installation of IDE extensions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_MAX_OUTPUT_TOKENS`               | Set the maximum number of output tokens for most requests. Default: 32,000. Maximum: 64,000. Increasing this value reduces the effective context window available before [auto-compaction](/en/costs#reduce-token-usage) triggers.                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_OTEL_HEADERS_HELPER_DEBOUNCE_MS` | Interval for refreshing dynamic OpenTelemetry headers in milliseconds (default: 1740000 / 29 minutes). See [Dynamic headers](/en/monitoring-usage#dynamic-headers)                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_SHELL`                           | Override automatic shell detection. Useful when your login shell differs from your preferred working shell (for example, `bash` vs `zsh`)                                                                                                                                                                                                                                                                                                                                                                                              |\n| `CLAUDE_CODE_SHELL_PREFIX`                    | Command prefix to wrap all bash commands (for example, for logging or auditing). Example: `/path/to/logger.sh` will execute `/path/to/logger.sh <command>`                                                                                                                                                                                                                                                                                                                                                                             |\n| `CLAUDE_CODE_SKIP_BEDROCK_AUTH`               | Skip AWS authentication for Bedrock (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                                           |\n| `CLAUDE_CODE_SKIP_FOUNDRY_AUTH`               | Skip Azure authentication for Microsoft Foundry (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_SKIP_VERTEX_AUTH`                | Skip Google authentication for Vertex (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_SUBAGENT_MODEL`                  | See [Model configuration](/en/model-config)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| `CLAUDE_CODE_USE_BEDROCK`                     | Use [Bedrock](/en/amazon-bedrock)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `CLAUDE_CODE_USE_FOUNDRY`                     | Use [Microsoft Foundry](/en/microsoft-foundry)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_USE_VERTEX`                      | Use [Vertex](/en/google-vertex-ai)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CONFIG_DIR`                           | Customize where Claude Code stores its configuration and data files                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| `DISABLE_AUTOUPDATER`                         | Set to `1` to disable automatic updates.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `DISABLE_BUG_COMMAND`                         | Set to `1` to disable the `/bug` command                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `DISABLE_COST_WARNINGS`                       | Set to `1` to disable cost warning messages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| `DISABLE_ERROR_REPORTING`                     | Set to `1` to opt out of Sentry error reporting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |\n| `DISABLE_NON_ESSENTIAL_MODEL_CALLS`           | Set to `1` to disable model calls for non-critical paths like flavor text                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `DISABLE_PROMPT_CACHING`                      | Set to `1` to disable prompt caching for all models (takes precedence over per-model settings)                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `DISABLE_PROMPT_CACHING_HAIKU`                | Set to `1` to disable prompt caching for Haiku models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n| `DISABLE_PROMPT_CACHING_OPUS`                 | Set to `1` to disable prompt caching for Opus models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `DISABLE_PROMPT_CACHING_SONNET`               | Set to `1` to disable prompt caching for Sonnet models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `DISABLE_TELEMETRY`                           | Set to `1` to opt out of Statsig telemetry (note that Statsig events do not include user data like code, file paths, or bash commands)                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `ENABLE_TOOL_SEARCH`                          | Controls [MCP tool search](/en/mcp#scale-with-mcp-tool-search). Values: `auto` (default, enables at 10% context), `auto:N` (custom threshold, e.g., `auto:5` for 5%), `true` (always on), `false` (disabled)                                                                                                                                                                                                                                                                                                                           |\n| `FORCE_AUTOUPDATE_PLUGINS`                    | Set to `true` to force plugin auto-updates even when the main auto-updater is disabled via `DISABLE_AUTOUPDATER`                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `HTTP_PROXY`                                  | Specify HTTP proxy server for network connections                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `HTTPS_PROXY`                                 | Specify HTTPS proxy server for network connections                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `IS_DEMO`                                     | Set to `true` to enable demo mode: hides email and organization from the UI, skips onboarding, and hides internal commands. Useful for streaming or recording sessions                                                                                                                                                                                                                                                                                                                                                                 |\n| `MAX_MCP_OUTPUT_TOKENS`                       | Maximum number of tokens allowed in MCP tool responses. Claude Code displays a warning when output exceeds 10,000 tokens (default: 25000)                                                                                                                                                                                                                                                                                                                                                                                              |\n| `MAX_THINKING_TOKENS`                         | Override the [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking) token budget. Thinking is enabled at max budget (31,999 tokens) by default. Use this to limit the budget (for example, `MAX_THINKING_TOKENS=10000`) or disable thinking entirely (`MAX_THINKING_TOKENS=0`). Extended thinking improves performance on complex reasoning and coding tasks but impacts [prompt caching efficiency](https://docs.claude.com/en/docs/build-with-claude/prompt-caching#caching-with-thinking-blocks). |\n| `MCP_TIMEOUT`                                 | Timeout in milliseconds for MCP server startup                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `MCP_TOOL_TIMEOUT`                            | Timeout in milliseconds for MCP tool execution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `NO_PROXY`                                    | List of domains and IPs to which requests will be directly issued, bypassing proxy                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `SLASH_COMMAND_TOOL_CHAR_BUDGET`              | Maximum number of characters for slash command metadata shown to the [Skill tool](/en/slash-commands#skill-tool) (default: 15000)                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `USE_BUILTIN_RIPGREP`                         | Set to `0` to use system-installed `rg` instead of `rg` included with Claude Code                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `VERTEX_REGION_CLAUDE_3_5_HAIKU`              | Override region for Claude 3.5 Haiku when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `VERTEX_REGION_CLAUDE_3_7_SONNET`             | Override region for Claude 3.7 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| `VERTEX_REGION_CLAUDE_4_0_OPUS`               | Override region for Claude 4.0 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `VERTEX_REGION_CLAUDE_4_0_SONNET`             | Override region for Claude 4.0 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| `VERTEX_REGION_CLAUDE_4_1_OPUS`               | Override region for Claude 4.1 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n\n## Tools available to Claude\n\nClaude Code has access to a set of powerful tools that help it understand and modify your codebase:\n\n| Tool                | Description                                                                                        | Permission Required |\n| :------------------ | :------------------------------------------------------------------------------------------------- | :------------------ |\n| **AskUserQuestion** | Asks multiple-choice questions to gather requirements or clarify ambiguity                         | No                  |\n| **Bash**            | Executes shell commands in your environment (see [Bash tool behavior](#bash-tool-behavior) below)  | Yes                 |\n| **TaskOutput**      | Retrieves output from a background task (bash shell or subagent)                                   | No                  |\n| **Edit**            | Makes targeted edits to specific files                                                             | Yes                 |\n| **ExitPlanMode**    | Prompts the user to exit plan mode and start coding                                                | Yes                 |\n| **Glob**            | Finds files based on pattern matching                                                              | No                  |\n| **Grep**            | Searches for patterns in file contents                                                             | No                  |\n| **KillShell**       | Kills a running background bash shell by its ID                                                    | No                  |\n| **MCPSearch**       | Searches for and loads MCP tools when [tool search](/en/mcp#scale-with-mcp-tool-search) is enabled | No                  |\n| **NotebookEdit**    | Modifies Jupyter notebook cells                                                                    | Yes                 |\n| **Read**            | Reads the contents of files                                                                        | No                  |\n| **Skill**           | Executes a [skill or slash command](/en/slash-commands#skill-tool) within the main conversation    | Yes                 |\n| **Task**            | Runs a sub-agent to handle complex, multi-step tasks                                               | No                  |\n| **TodoWrite**       | Creates and manages structured task lists                                                          | No                  |\n| **WebFetch**        | Fetches content from a specified URL                                                               | Yes                 |\n| **WebSearch**       | Performs web searches with domain filtering                                                        | Yes                 |\n| **Write**           | Creates or overwrites files                                                                        | Yes                 |\n\nPermission rules can be configured using `/allowed-tools` or in [permission settings](/en/settings#available-settings). Also see [Tool-specific permission rules](/en/iam#tool-specific-permission-rules).\n\n### Bash tool behavior\n\nThe Bash tool executes shell commands with the following persistence behavior:\n\n* **Working directory persists**: When Claude changes the working directory (for example, `cd /path/to/dir`), subsequent Bash commands will execute in that directory. You can use `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR=1` to reset to the project directory after each command.\n* **Environment variables do NOT persist**: Environment variables set in one Bash command (for example, `export MY_VAR=value`) are **not** available in subsequent Bash commands. Each Bash command runs in a fresh shell environment.\n\nTo make environment variables available in Bash commands, you have **three options**:\n\n**Option 1: Activate environment before starting Claude Code** (simplest approach)\n\nActivate your virtual environment in your terminal before launching Claude Code:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\nclaude\n```\n\nThis works for shell environments but environment variables set within Claude's Bash commands will not persist between commands.\n\n**Option 2: Set CLAUDE\\_ENV\\_FILE before starting Claude Code** (persistent environment setup)\n\nExport the path to a shell script containing your environment setup:\n\n```bash  theme={null}\nexport CLAUDE_ENV_FILE=/path/to/env-setup.sh\nclaude\n```\n\nWhere `/path/to/env-setup.sh` contains:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\n# or: export MY_VAR=value\n```\n\nClaude Code will source this file before each Bash command, making the environment persistent across all commands.\n\n**Option 3: Use a SessionStart hook** (project-specific configuration)\n\nConfigure in `.claude/settings.json`:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"SessionStart\": [{\n      \"matcher\": \"startup\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"echo 'conda activate myenv' >> \\\"$CLAUDE_ENV_FILE\\\"\"\n      }]\n    }]\n  }\n}\n```\n\nThe hook writes to `$CLAUDE_ENV_FILE`, which is then sourced before each Bash command. This is ideal for team-shared project configurations.\n\nSee [SessionStart hooks](/en/hooks#persisting-environment-variables) for more details on Option 3.\n\n### Extending tools with hooks\n\nYou can run custom commands before or after any tool executes using\n[Claude Code hooks](/en/hooks-guide).\n\nFor example, you could automatically run a Python formatter after Claude\nmodifies Python files, or prevent modifications to production configuration\nfiles by blocking Write operations to certain paths.\n\n## See also\n\n* [Identity and Access Management](/en/iam#configuring-permissions) - Learn about Claude Code's permission system\n* [IAM and access control](/en/iam#managed-settings) - Managed policy configuration\n* [Troubleshooting](/en/troubleshooting#auto-updater-issues) - Solutions for common configuration issues\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"ba998f64-2fd0-4454-b77e-1f7e08ee381d","timestamp":"2026-01-18T08:08:51.711Z","toolUseResult":{"bytes":90223,"code":200,"codeText":"OK","result":"# Claude Code settings\n\n> Configure Claude Code with global and project-level settings, and environment variables.\n\nClaude Code offers a variety of settings to configure its behavior to meet your needs. You can configure Claude Code by running the `/config` command when using the interactive REPL, which opens a tabbed Settings interface where you can view status information and modify configuration options.\n\n## Configuration scopes\n\nClaude Code uses a **scope system** to determine where configurations apply and who they're shared with. Understanding scopes helps you decide how to configure Claude Code for personal use, team collaboration, or enterprise deployment.\n\n### Available scopes\n\n| Scope       | Location                             | Who it affects                       | Shared with team?      |\n| :---------- | :----------------------------------- | :----------------------------------- | :--------------------- |\n| **Managed** | System-level `managed-settings.json` | All users on the machine             | Yes (deployed by IT)   |\n| **User**    | `~/.claude/` directory               | You, across all projects             | No                     |\n| **Project** | `.claude/` in repository             | All collaborators on this repository | Yes (committed to git) |\n| **Local**   | `.claude/*.local.*` files            | You, in this repository only         | No (gitignored)        |\n\n### When to use each scope\n\n**Managed scope** is for:\n\n* Security policies that must be enforced organization-wide\n* Compliance requirements that can't be overridden\n* Standardized configurations deployed by IT/DevOps\n\n**User scope** is best for:\n\n* Personal preferences you want everywhere (themes, editor settings)\n* Tools and plugins you use across all projects\n* API keys and authentication (stored securely)\n\n**Project scope** is best for:\n\n* Team-shared settings (permissions, hooks, MCP servers)\n* Plugins the whole team should have\n* Standardizing tooling across collaborators\n\n**Local scope** is best for:\n\n* Personal overrides for a specific project\n* Testing configurations before sharing with the team\n* Machine-specific settings that won't work for others\n\n### How scopes interact\n\nWhen the same setting is configured in multiple scopes, more specific scopes take precedence:\n\n1. **Managed** (highest) - can't be overridden by anything\n2. **Command line arguments** - temporary session overrides\n3. **Local** - overrides project and user settings\n4. **Project** - overrides user settings\n5. **User** (lowest) - applies when nothing else specifies the setting\n\nFor example, if a permission is allowed in user settings but denied in project settings, the project setting takes precedence and the permission is blocked.\n\n### What uses scopes\n\nScopes apply to many Claude Code features:\n\n| Feature         | User location             | Project location                   | Local location                 |\n| :-------------- | :------------------------ | :--------------------------------- | :----------------------------- |\n| **Settings**    | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **Subagents**   | `~/.claude/agents/`       | `.claude/agents/`                  |                               |\n| **MCP servers** | `~/.claude.json`          | `.mcp.json`                        | `~/.claude.json` (per-project) |\n| **Plugins**     | `~/.claude/settings.json` | `.claude/settings.json`            | `.claude/settings.local.json`  |\n| **CLAUDE.md**   | `~/.claude/CLAUDE.md`     | `CLAUDE.md` or `.claude/CLAUDE.md` | `CLAUDE.local.md`              |\n\n***\n\n## Settings files\n\nThe `settings.json` file is our official mechanism for configuring Claude\nCode through hierarchical settings:\n\n* **User settings** are defined in `~/.claude/settings.json` and apply to all\n  projects.\n* **Project settings** are saved in your project directory:\n  * `.claude/settings.json` for settings that are checked into source control and shared with your team\n  * `.claude/settings.local.json` for settings that are not checked in, useful for personal preferences and experimentation. Claude Code will configure git to ignore `.claude/settings.local.json` when it is created.\n* **Managed settings**: For organizations that need centralized control, Claude Code supports `managed-settings.json` and `managed-mcp.json` files that can be deployed to system directories:\n\n  * macOS: `/Library/Application Support/ClaudeCode/`\n  * Linux and WSL: `/etc/claude-code/`\n  * Windows: `C:\\Program Files\\ClaudeCode\\`\n\n  <Note>\n    These are system-wide paths (not user home directories like `~/Library/...`) that require administrator privileges. They are designed to be deployed by IT administrators.\n  </Note>\n\n  See [Managed settings](/en/iam#managed-settings) and [Managed MCP configuration](/en/mcp#managed-mcp-configuration) for details.\n\n  <Note>\n    Managed deployments can also restrict **plugin marketplace additions** using\n    `strictKnownMarketplaces`. For more information, see [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions).\n  </Note>\n* **Other configuration** is stored in `~/.claude.json`. This file contains your preferences (theme, notification settings, editor mode), OAuth session, [MCP server](/en/mcp) configurations for user and local scopes, per-project state (allowed tools, trust settings), and various caches. Project-scoped MCP servers are stored separately in `.mcp.json`.\n\n```JSON Example settings.json theme={null}\n{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(npm run lint)\",\n      \"Bash(npm run test:*)\",\n      \"Read(~/.zshrc)\"\n    ],\n    \"deny\": [\n      \"Bash(curl:*)\",\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\"\n    ]\n  },\n  \"env\": {\n    \"CLAUDE_CODE_ENABLE_TELEMETRY\": \"1\",\n    \"OTEL_METRICS_EXPORTER\": \"otlp\"\n  },\n  \"companyAnnouncements\": [\n    \"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\",\n    \"Reminder: Code reviews required for all PRs\",\n    \"New security policy in effect\"\n  ]\n}\n```\n\n### Available settings\n\n`settings.json` supports a number of options:\n\n| Key                          | Description                                                                                                                                                                                                                                                                     | Example                                                                 |\n| :--------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------------------------------------------- |\n| `apiKeyHelper`               | Custom script, to be executed in `/bin/sh`, to generate an auth value. This value will be sent as `X-Api-Key` and `Authorization: Bearer` headers for model requests                                                                                                            | `/bin/generate_temp_api_key.sh`                                         |\n| `cleanupPeriodDays`          | Sessions inactive for longer than this period are deleted at startup. Setting to `0` immediately deletes all sessions. (default: 30 days)                                                                                                                                       | `20`                                                                    |\n| `companyAnnouncements`       | Announcement to display to users at startup. If multiple announcements are provided, they will be cycled through at random.                                                                                                                                                     | `[\"Welcome to Acme Corp! Review our code guidelines at docs.acme.com\"]` |\n| `env`                        | Environment variables that will be applied to every session                                                                                                                                                                                                                     | `{\"FOO\": \"bar\"}`                                                        |\n| `attribution`                | Customize attribution for git commits and pull requests. See [Attribution settings](#attribution-settings)                                                                                                                                                                      | `{\"commit\": \" Generated with Claude Code\", \"pr\": \"\"}`                 |\n| `includeCoAuthoredBy`        | **Deprecated**: Use `attribution` instead. Whether to include the `co-authored-by Claude` byline in git commits and pull requests (default: `true`)                                                                                                                             | `false`                                                                 |\n| `permissions`                | See table below for structure of permissions.                                                                                                                                                                                                                                   |                                                                         |\n| `hooks`                      | Configure custom commands to run before or after tool executions. See [hooks documentation](/en/hooks)                                                                                                                                                                          | `{\"PreToolUse\": {\"Bash\": \"echo 'Running command...'\"}}`                 |\n| `disableAllHooks`            | Disable all [hooks](/en/hooks)                                                                                                                                                                                                                                                  | `true`                                                                  |\n| `allowManagedHooksOnly`      | (Managed settings only) Prevent loading of user, project, and plugin hooks. Only allows managed hooks and SDK hooks. See [Hook configuration](#hook-configuration)                                                                                                              | `true`                                                                  |\n| `model`                      | Override the default model to use for Claude Code                                                                                                                                                                                                                               | `\"claude-sonnet-4-5-20250929\"`                                          |\n| `otelHeadersHelper`          | Script to generate dynamic OpenTelemetry headers. Runs at startup and periodically (see [Dynamic headers](/en/monitoring-usage#dynamic-headers))                                                                                                                                | `/bin/generate_otel_headers.sh`                                         |\n| `statusLine`                 | Configure a custom status line to display context. See [`statusLine` documentation](/en/statusline)                                                                                                                                                                             | `{\"type\": \"command\", \"command\": \"~/.claude/statusline.sh\"}`             |\n| `fileSuggestion`             | Configure a custom script for `@` file autocomplete. See [File suggestion settings](#file-suggestion-settings)                                                                                                                                                                  | `{\"type\": \"command\", \"command\": \"~/.claude/file-suggestion.sh\"}`        |\n| `respectGitignore`           | Control whether the `@` file picker respects `.gitignore` patterns. When `true` (default), files matching `.gitignore` patterns are excluded from suggestions                                                                                                                   | `false`                                                                 |\n| `outputStyle`                | Configure an output style to adjust the system prompt. See [output styles documentation](/en/output-styles)                                                                                                                                                                     | `\"Explanatory\"`                                                         |\n| `forceLoginMethod`           | Use `claudeai` to restrict login to Claude.ai accounts, `console` to restrict login to Claude Console (API usage billing) accounts                                                                                                                                              | `claudeai`                                                              |\n| `forceLoginOrgUUID`          | Specify the UUID of an organization to automatically select it during login, bypassing the organization selection step. Requires `forceLoginMethod` to be set                                                                                                                   | `\"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx\"`                                |\n| `enableAllProjectMcpServers` | Automatically approve all MCP servers defined in project `.mcp.json` files                                                                                                                                                                                                      | `true`                                                                  |\n| `enabledMcpjsonServers`      | List of specific MCP servers from `.mcp.json` files to approve                                                                                                                                                                                                                  | `[\"memory\", \"github\"]`                                                  |\n| `disabledMcpjsonServers`     | List of specific MCP servers from `.mcp.json` files to reject                                                                                                                                                                                                                   | `[\"filesystem\"]`                                                        |\n| `allowedMcpServers`          | When set in managed-settings.json, allowlist of MCP servers users can configure. Undefined = no restrictions, empty array = lockdown. Applies to all scopes. Denylist takes precedence. See [Managed MCP configuration](/en/mcp#managed-mcp-configuration)                      | `[{ \"serverName\": \"github\" }]`                                          |\n| `deniedMcpServers`           | When set in managed-settings.json, denylist of MCP servers that are explicitly blocked. Applies to all scopes including managed servers. Denylist takes precedence over allowlist. See [Managed MCP configuration](/en/mcp#managed-mcp-configuration)                           | `[{ \"serverName\": \"filesystem\" }]`                                      |\n| `strictKnownMarketplaces`    | When set in managed-settings.json, allowlist of plugin marketplaces users can add. Undefined = no restrictions, empty array = lockdown. Applies to marketplace additions only. See [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions) | `[{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }]`                 |\n| `awsAuthRefresh`             | Custom script that modifies the `.aws` directory (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                                | `aws sso login --profile myprofile`                                     |\n| `awsCredentialExport`        | Custom script that outputs JSON with AWS credentials (see [advanced credential configuration](/en/amazon-bedrock#advanced-credential-configuration))                                                                                                                            | `/bin/generate_aws_grant.sh`                                            |\n| `alwaysThinkingEnabled`      | Enable [extended thinking](/en/common-workflows#use-extended-thinking) by default for all sessions. Typically configured via the `/config` command rather than editing directly                                                                                                 | `true`                                                                  |\n| `plansDirectory`             | Customize where plan files are stored. Path is relative to project root. Default: `~/.claude/plans`                                                                                                                                                                             | `\"./plans\"`                                                             |\n| `showTurnDuration`           | Show turn duration messages after responses (e.g., \"Cooked for 1m 6s\"). Set to `false` to hide these messages                                                                                                                                                                   | `true`                                                                  |\n| `language`                   | Configure Claude's preferred response language (e.g., `\"japanese\"`, `\"spanish\"`, `\"french\"`). Claude will respond in this language by default                                                                                                                                   | `\"japanese\"`                                                            |\n| `autoUpdatesChannel`         | Release channel to follow for updates. Use `\"stable\"` for a version that is typically about one week old and skips versions with major regressions, or `\"latest\"` (default) for the most recent release                                                                         | `\"stable\"`                                                              |\n| `spinnerTipsEnabled`         | Show tips in the spinner while Claude is working. Set to `false` to disable tips (default: `true`)                                                                                                                                                                              | `false`                                                                 |\n| `terminalProgressBarEnabled` | Enable the terminal progress bar that shows progress in supported terminals like Windows Terminal and iTerm2 (default: `true`)                                                                                                                                                  | `false`                                                                 |\n\n### Permission settings\n\n| Keys                           | Description                                                                                                                                                                                                                                                                                 | Example                                                                |\n| :----------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :--------------------------------------------------------------------- |\n| `allow`                        | Array of [permission rules](/en/iam#configuring-permissions) to allow tool use. **Note:** Bash rules use prefix matching, not regex                                                                                                                                                         | `[ \"Bash(git diff:*)\" ]`                                               |\n| `ask`                          | Array of [permission rules](/en/iam#configuring-permissions) to ask for confirmation upon tool use.                                                                                                                                                                                         | `[ \"Bash(git push:*)\" ]`                                               |\n| `deny`                         | Array of [permission rules](/en/iam#configuring-permissions) to deny tool use. Use this to also exclude sensitive files from Claude Code access. **Note:** Bash patterns are prefix matches and can be bypassed (see [Bash permission limitations](/en/iam#tool-specific-permission-rules)) | `[ \"WebFetch\", \"Bash(curl:*)\", \"Read(./.env)\", \"Read(./secrets/**)\" ]` |\n| `additionalDirectories`        | Additional [working directories](/en/iam#working-directories) that Claude has access to                                                                                                                                                                                                     | `[ \"../docs/\" ]`                                                       |\n| `defaultMode`                  | Default [permission mode](/en/iam#permission-modes) when opening Claude Code                                                                                                                                                                                                                | `\"acceptEdits\"`                                                        |\n| `disableBypassPermissionsMode` | Set to `\"disable\"` to prevent `bypassPermissions` mode from being activated. This disables the `--dangerously-skip-permissions` command-line flag. See [managed settings](/en/iam#managed-settings)                                                                                         | `\"disable\"`                                                            |\n\n### Sandbox settings\n\nConfigure advanced sandboxing behavior. Sandboxing isolates bash commands from your filesystem and network. See [Sandboxing](/en/sandboxing) for details.\n\n**Filesystem and network restrictions** are configured via Read, Edit, and WebFetch permission rules, not via these sandbox settings.\n\n| Keys                        | Description                                                                                                                                                                                                                                                                                                                       | Example                   |\n| :-------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :------------------------ |\n| `enabled`                   | Enable bash sandboxing (macOS/Linux only). Default: false                                                                                                                                                                                                                                                                         | `true`                    |\n| `autoAllowBashIfSandboxed`  | Auto-approve bash commands when sandboxed. Default: true                                                                                                                                                                                                                                                                          | `true`                    |\n| `excludedCommands`          | Commands that should run outside of the sandbox                                                                                                                                                                                                                                                                                   | `[\"git\", \"docker\"]`       |\n| `allowUnsandboxedCommands`  | Allow commands to run outside the sandbox via the `dangerouslyDisableSandbox` parameter. When set to `false`, the `dangerouslyDisableSandbox` escape hatch is completely disabled and all commands must run sandboxed (or be in `excludedCommands`). Useful for enterprise policies that require strict sandboxing. Default: true | `false`                   |\n| `network.allowUnixSockets`  | Unix socket paths accessible in sandbox (for SSH agents, etc.)                                                                                                                                                                                                                                                                    | `[\"~/.ssh/agent-socket\"]` |\n| `network.allowLocalBinding` | Allow binding to localhost ports (macOS only). Default: false                                                                                                                                                                                                                                                                     | `true`                    |\n| `network.httpProxyPort`     | HTTP proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                        | `8080`                    |\n| `network.socksProxyPort`    | SOCKS5 proxy port used if you wish to bring your own proxy. If not specified, Claude will run its own proxy.                                                                                                                                                                                                                      | `8081`                    |\n| `enableWeakerNestedSandbox` | Enable weaker sandbox for unprivileged Docker environments (Linux only). **Reduces security.** Default: false                                                                                                                                                                                                                     | `true`                    |\n\n**Configuration example:**\n\n```json  theme={null}\n{\n  \"sandbox\": {\n    \"enabled\": true,\n    \"autoAllowBashIfSandboxed\": true,\n    \"excludedCommands\": [\"docker\"],\n    \"network\": {\n      \"allowUnixSockets\": [\n        \"/var/run/docker.sock\"\n      ],\n      \"allowLocalBinding\": true\n    }\n  },\n  \"permissions\": {\n    \"deny\": [\n      \"Read(.envrc)\",\n      \"Read(~/.aws/**)\"\n    ]\n  }\n}\n```\n\n**Filesystem and network restrictions** use standard permission rules:\n\n* Use `Read` deny rules to block Claude from reading specific files or directories\n* Use `Edit` allow rules to let Claude write to directories beyond the current working directory\n* Use `Edit` deny rules to block writes to specific paths\n* Use `WebFetch` allow/deny rules to control which network domains Claude can access\n\n### Attribution settings\n\nClaude Code adds attribution to git commits and pull requests. These are configured separately:\n\n* Commits use [git trailers](https://git-scm.com/docs/git-interpret-trailers) (like `Co-Authored-By`) by default,  which can be customized or disabled\n* Pull request descriptions are plain text\n\n| Keys     | Description                                                                                |\n| :------- | :----------------------------------------------------------------------------------------- |\n| `commit` | Attribution for git commits, including any trailers. Empty string hides commit attribution |\n| `pr`     | Attribution for pull request descriptions. Empty string hides pull request attribution     |\n\n**Default commit attribution:**\n\n```\n Generated with [Claude Code](https://claude.com/claude-code)\n\n   Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>\n```\n\n**Default pull request attribution:**\n\n```\n Generated with [Claude Code](https://claude.com/claude-code)\n```\n\n**Example:**\n\n```json  theme={null}\n{\n  \"attribution\": {\n    \"commit\": \"Generated with AI\\n\\nCo-Authored-By: AI <ai@example.com>\",\n    \"pr\": \"\"\n  }\n}\n```\n\n<Note>\n  The `attribution` setting takes precedence over the deprecated `includeCoAuthoredBy` setting. To hide all attribution, set `commit` and `pr` to empty strings.\n</Note>\n\n### File suggestion settings\n\nConfigure a custom command for `@` file path autocomplete. The built-in file suggestion uses fast filesystem traversal, but large monorepos may benefit from project-specific indexing such as a pre-built file index or custom tooling.\n\n```json  theme={null}\n{\n  \"fileSuggestion\": {\n    \"type\": \"command\",\n    \"command\": \"~/.claude/file-suggestion.sh\"\n  }\n}\n```\n\nThe command runs with the same environment variables as [hooks](/en/hooks), including `CLAUDE_PROJECT_DIR`. It receives JSON via stdin with a `query` field:\n\n```json  theme={null}\n{\"query\": \"src/comp\"}\n```\n\nOutput newline-separated file paths to stdout (currently limited to 15):\n\n```\nsrc/components/Button.tsx\nsrc/components/Modal.tsx\nsrc/components/Form.tsx\n```\n\n**Example:**\n\n```bash  theme={null}\n#!/bin/bash\nquery=$(cat | jq -r '.query')\nyour-repo-file-index --query \"$query\" | head -20\n```\n\n### Hook configuration\n\n**Managed settings only**: Controls which hooks are allowed to run. This setting can only be configured in [managed settings](#settings-files) and provides administrators with strict control over hook execution.\n\n**Behavior when `allowManagedHooksOnly` is `true`:**\n\n* Managed hooks and SDK hooks are loaded\n* User hooks, project hooks, and plugin hooks are blocked\n\n**Configuration:**\n\n```json  theme={null}\n{\n  \"allowManagedHooksOnly\": true\n}\n```\n\n### Settings precedence\n\nSettings apply in order of precedence. From highest to lowest:\n\n1. **Managed settings** (`managed-settings.json`)\n   * Policies deployed by IT/DevOps to system directories\n   * Cannot be overridden by user or project settings\n\n2. **Command line arguments**\n   * Temporary overrides for a specific session\n\n3. **Local project settings** (`.claude/settings.local.json`)\n   * Personal project-specific settings\n\n4. **Shared project settings** (`.claude/settings.json`)\n   * Team-shared project settings in source control\n\n5. **User settings** (`~/.claude/settings.json`)\n   * Personal global settings\n\nThis hierarchy ensures that organizational policies are always enforced while still allowing teams and individuals to customize their experience.\n\nFor example, if your user settings allow `Bash(npm run:*)` but a project's shared settings deny it, the project setting takes precedence and the command is blocked.\n\n### Key points about the configuration system\n\n* **Memory files (`CLAUDE.md`)**: Contain instructions and context that Claude loads at startup\n* **Settings files (JSON)**: Configure permissions, environment variables, and tool behavior\n* **Slash commands**: Custom commands that can be invoked during a session with `/command-name`\n* **MCP servers**: Extend Claude Code with additional tools and integrations\n* **Precedence**: Higher-level configurations (Managed) override lower-level ones (User/Project)\n* **Inheritance**: Settings are merged, with more specific settings adding to or overriding broader ones\n\n### System prompt\n\nClaude Code's internal system prompt is not published. To add custom instructions, use `CLAUDE.md` files or the `--append-system-prompt` flag.\n\n### Excluding sensitive files\n\nTo prevent Claude Code from accessing files containing sensitive information like API keys, secrets, and environment files, use the `permissions.deny` setting in your `.claude/settings.json` file:\n\n```json  theme={null}\n{\n  \"permissions\": {\n    \"deny\": [\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\",\n      \"Read(./config/credentials.json)\",\n      \"Read(./build)\"\n    ]\n  }\n}\n```\n\nThis replaces the deprecated `ignorePatterns` configuration. Files matching these patterns will be completely invisible to Claude Code, preventing any accidental exposure of sensitive data.\n\n## Subagent configuration\n\nClaude Code supports custom AI subagents that can be configured at both user and project levels. These subagents are stored as Markdown files with YAML frontmatter:\n\n* **User subagents**: `~/.claude/agents/` - Available across all your projects\n* **Project subagents**: `.claude/agents/` - Specific to your project and can be shared with your team\n\nSubagent files define specialized AI assistants with custom prompts and tool permissions. Learn more about creating and using subagents in the [subagents documentation](/en/sub-agents).\n\n## Plugin configuration\n\nClaude Code supports a plugin system that lets you extend functionality with custom commands, agents, hooks, and MCP servers. Plugins are distributed through marketplaces and can be configured at both user and repository levels.\n\n### Plugin settings\n\nPlugin-related settings in `settings.json`:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"formatter@acme-tools\": true,\n    \"deployer@acme-tools\": true,\n    \"analyzer@security-plugins\": false\n  },\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/claude-plugins\"\n    }\n  }\n}\n```\n\n#### `enabledPlugins`\n\nControls which plugins are enabled. Format: `\"plugin-name@marketplace-name\": true/false`\n\n**Scopes**:\n\n* **User settings** (`~/.claude/settings.json`): Personal plugin preferences\n* **Project settings** (`.claude/settings.json`): Project-specific plugins shared with team\n* **Local settings** (`.claude/settings.local.json`): Per-machine overrides (not committed)\n\n**Example**:\n\n```json  theme={null}\n{\n  \"enabledPlugins\": {\n    \"code-formatter@team-tools\": true,\n    \"deployment-tools@team-tools\": true,\n    \"experimental-features@personal\": false\n  }\n}\n```\n\n#### `extraKnownMarketplaces`\n\nDefines additional marketplaces that should be made available for the repository. Typically used in repository-level settings to ensure team members have access to required plugin sources.\n\n**When a repository includes `extraKnownMarketplaces`**:\n\n1. Team members are prompted to install the marketplace when they trust the folder\n2. Team members are then prompted to install plugins from that marketplace\n3. Users can skip unwanted marketplaces or plugins (stored in user settings)\n4. Installation respects trust boundaries and requires explicit consent\n\n**Example**:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"acme-corp/claude-plugins\"\n      }\n    },\n    \"security-plugins\": {\n      \"source\": {\n        \"source\": \"git\",\n        \"url\": \"https://git.example.com/security/plugins.git\"\n      }\n    }\n  }\n}\n```\n\n**Marketplace source types**:\n\n* `github`: GitHub repository (uses `repo`)\n* `git`: Any git URL (uses `url`)\n* `directory`: Local filesystem path (uses `path`, for development only)\n\n#### `strictKnownMarketplaces`\n\n**Managed settings only**: Controls which plugin marketplaces users are allowed to add. This setting can only be configured in [`managed-settings.json`](/en/iam#managed-settings) and provides administrators with strict control over marketplace sources.\n\n**Managed settings file locations**:\n\n* **macOS**: `/Library/Application Support/ClaudeCode/managed-settings.json`\n* **Linux and WSL**: `/etc/claude-code/managed-settings.json`\n* **Windows**: `C:\\Program Files\\ClaudeCode\\managed-settings.json`\n\n**Key characteristics**:\n\n* Only available in managed settings (`managed-settings.json`)\n* Cannot be overridden by user or project settings (highest precedence)\n* Enforced BEFORE network/filesystem operations (blocked sources never execute)\n* Uses exact matching for source specifications (including `ref`, `path` for git sources)\n\n**Allowlist behavior**:\n\n* `undefined` (default): No restrictions - users can add any marketplace\n* Empty array `[]`: Complete lockdown - users cannot add any new marketplaces\n* List of sources: Users can only add marketplaces that match exactly\n\n**All supported source types**:\n\nThe allowlist supports six marketplace source types. Each source must match exactly for a user's marketplace addition to be allowed.\n\n1. **GitHub repositories**:\n\n```json  theme={null}\n{ \"source\": \"github\", \"repo\": \"acme-corp/approved-plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/security-tools\", \"ref\": \"v2.0\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\", \"path\": \"marketplace\" }\n```\n\nFields: `repo` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n2. **Git repositories**:\n\n```json  theme={null}\n{ \"source\": \"git\", \"url\": \"https://gitlab.example.com/tools/plugins.git\" }\n{ \"source\": \"git\", \"url\": \"https://bitbucket.org/acme-corp/plugins.git\", \"ref\": \"production\" }\n{ \"source\": \"git\", \"url\": \"ssh://git@git.example.com/plugins.git\", \"ref\": \"v3.1\", \"path\": \"approved\" }\n```\n\nFields: `url` (required), `ref` (optional: branch/tag/SHA), `path` (optional: subdirectory)\n\n3. **URL-based marketplaces**:\n\n```json  theme={null}\n{ \"source\": \"url\", \"url\": \"https://plugins.example.com/marketplace.json\" }\n{ \"source\": \"url\", \"url\": \"https://cdn.example.com/marketplace.json\", \"headers\": { \"Authorization\": \"Bearer ${TOKEN}\" } }\n```\n\nFields: `url` (required), `headers` (optional: HTTP headers for authenticated access)\n\n<Note>\n  URL-based marketplaces only download the `marketplace.json` file. They do not download plugin files from the server. Plugins in URL-based marketplaces must use external sources (GitHub, npm, or git URLs) rather than relative paths. For plugins with relative paths, use a Git-based marketplace instead. See [Troubleshooting](/en/plugin-marketplaces#plugins-with-relative-paths-fail-in-url-based-marketplaces) for details.\n</Note>\n\n4. **NPM packages**:\n\n```json  theme={null}\n{ \"source\": \"npm\", \"package\": \"@acme-corp/claude-plugins\" }\n{ \"source\": \"npm\", \"package\": \"@acme-corp/approved-marketplace\" }\n```\n\nFields: `package` (required, supports scoped packages)\n\n5. **File paths**:\n\n```json  theme={null}\n{ \"source\": \"file\", \"path\": \"/usr/local/share/claude/acme-marketplace.json\" }\n{ \"source\": \"file\", \"path\": \"/opt/acme-corp/plugins/marketplace.json\" }\n```\n\nFields: `path` (required: absolute path to marketplace.json file)\n\n6. **Directory paths**:\n\n```json  theme={null}\n{ \"source\": \"directory\", \"path\": \"/usr/local/share/claude/acme-plugins\" }\n{ \"source\": \"directory\", \"path\": \"/opt/acme-corp/approved-marketplaces\" }\n```\n\nFields: `path` (required: absolute path to directory containing `.claude-plugin/marketplace.json`)\n\n**Configuration examples**:\n\nExample - Allow specific marketplaces only:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/approved-plugins\"\n    },\n    {\n      \"source\": \"github\",\n      \"repo\": \"acme-corp/security-tools\",\n      \"ref\": \"v2.0\"\n    },\n    {\n      \"source\": \"url\",\n      \"url\": \"https://plugins.example.com/marketplace.json\"\n    },\n    {\n      \"source\": \"npm\",\n      \"package\": \"@acme-corp/compliance-plugins\"\n    }\n  ]\n}\n```\n\nExample - Disable all marketplace additions:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": []\n}\n```\n\n**Exact matching requirements**:\n\nMarketplace sources must match **exactly** for a user's addition to be allowed. For git-based sources (`github` and `git`), this includes all optional fields:\n\n* The `repo` or `url` must match exactly\n* The `ref` field must match exactly (or both be undefined)\n* The `path` field must match exactly (or both be undefined)\n\nExamples of sources that **do NOT match**:\n\n```json  theme={null}\n// These are DIFFERENT sources:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"ref\": \"main\" }\n\n// These are also DIFFERENT:\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\", \"path\": \"marketplace\" }\n{ \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n```\n\n**Comparison with `extraKnownMarketplaces`**:\n\n| Aspect                | `strictKnownMarketplaces`            | `extraKnownMarketplaces`             |\n| --------------------- | ------------------------------------ | ------------------------------------ |\n| **Purpose**           | Organizational policy enforcement    | Team convenience                     |\n| **Settings file**     | `managed-settings.json` only         | Any settings file                    |\n| **Behavior**          | Blocks non-allowlisted additions     | Auto-installs missing marketplaces   |\n| **When enforced**     | Before network/filesystem operations | After user trust prompt              |\n| **Can be overridden** | No (highest precedence)              | Yes (by higher precedence settings)  |\n| **Source format**     | Direct source object                 | Named marketplace with nested source |\n| **Use case**          | Compliance, security restrictions    | Onboarding, standardization          |\n\n**Format difference**:\n\n`strictKnownMarketplaces` uses direct source objects:\n\n```json  theme={null}\n{\n  \"strictKnownMarketplaces\": [\n    { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n  ]\n}\n```\n\n`extraKnownMarketplaces` requires named marketplaces:\n\n```json  theme={null}\n{\n  \"extraKnownMarketplaces\": {\n    \"acme-tools\": {\n      \"source\": { \"source\": \"github\", \"repo\": \"acme-corp/plugins\" }\n    }\n  }\n}\n```\n\n**Important notes**:\n\n* Restrictions are checked BEFORE any network requests or filesystem operations\n* When blocked, users see clear error messages indicating the source is blocked by managed policy\n* The restriction applies only to adding NEW marketplaces; previously installed marketplaces remain accessible\n* Managed settings have the highest precedence and cannot be overridden\n\nSee [Managed marketplace restrictions](/en/plugin-marketplaces#managed-marketplace-restrictions) for user-facing documentation.\n\n### Managing plugins\n\nUse the `/plugin` command to manage plugins interactively:\n\n* Browse available plugins from marketplaces\n* Install/uninstall plugins\n* Enable/disable plugins\n* View plugin details (commands, agents, hooks provided)\n* Add/remove marketplaces\n\nLearn more about the plugin system in the [plugins documentation](/en/plugins).\n\n## Environment variables\n\nClaude Code supports the following environment variables to control its behavior:\n\n<Note>\n  All environment variables can also be configured in [`settings.json`](#available-settings). This is useful as a way to automatically set environment variables for each session, or to roll out a set of environment variables for your whole team or organization.\n</Note>\n\n| Variable                                      | Purpose                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| :-------------------------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `ANTHROPIC_API_KEY`                           | API key sent as `X-Api-Key` header, typically for the Claude SDK (for interactive usage, run `/login`)                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `ANTHROPIC_AUTH_TOKEN`                        | Custom value for the `Authorization` header (the value you set here will be prefixed with `Bearer `)                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `ANTHROPIC_CUSTOM_HEADERS`                    | Custom headers you want to add to the request (in `Name: Value` format)                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `ANTHROPIC_DEFAULT_HAIKU_MODEL`               | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_DEFAULT_OPUS_MODEL`                | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_DEFAULT_SONNET_MODEL`              | See [Model configuration](/en/model-config#environment-variables)                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `ANTHROPIC_FOUNDRY_API_KEY`                   | API key for Microsoft Foundry authentication (see [Microsoft Foundry](/en/microsoft-foundry))                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `ANTHROPIC_MODEL`                             | Name of the model setting to use (see [Model Configuration](/en/model-config#environment-variables))                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `ANTHROPIC_SMALL_FAST_MODEL`                  | \\[DEPRECATED] Name of [Haiku-class model for background tasks](/en/costs)                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `ANTHROPIC_SMALL_FAST_MODEL_AWS_REGION`       | Override AWS region for the Haiku-class model when using Bedrock                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `AWS_BEARER_TOKEN_BEDROCK`                    | Bedrock API key for authentication (see [Bedrock API keys](https://aws.amazon.com/blogs/machine-learning/accelerate-ai-development-with-amazon-bedrock-api-keys/))                                                                                                                                                                                                                                                                                                                                                                     |\n| `BASH_DEFAULT_TIMEOUT_MS`                     | Default timeout for long-running bash commands                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `BASH_MAX_OUTPUT_LENGTH`                      | Maximum number of characters in bash outputs before they are middle-truncated                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `BASH_MAX_TIMEOUT_MS`                         | Maximum timeout the model can set for long-running bash commands                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `CLAUDE_AUTOCOMPACT_PCT_OVERRIDE`             | Set the percentage of context capacity (1-100) at which auto-compaction triggers. By default, auto-compaction triggers at approximately 95% capacity. Use lower values like `50` to compact earlier. Values above the default threshold have no effect. Applies to both main conversations and subagents. This percentage aligns with the `context_window.used_percentage` field available in [status line](/en/statusline)                                                                                                            |\n| `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR`    | Return to the original working directory after each Bash command                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `CLAUDE_CODE_API_KEY_HELPER_TTL_MS`           | Interval in milliseconds at which credentials should be refreshed (when using `apiKeyHelper`)                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `CLAUDE_CODE_CLIENT_CERT`                     | Path to client certificate file for mTLS authentication                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_CLIENT_KEY_PASSPHRASE`           | Passphrase for encrypted CLAUDE\\_CODE\\_CLIENT\\_KEY (optional)                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |\n| `CLAUDE_CODE_CLIENT_KEY`                      | Path to client private key file for mTLS authentication                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_DISABLE_EXPERIMENTAL_BETAS`      | Set to `1` to disable Anthropic API-specific `anthropic-beta` headers. Use this if experiencing issues like \"Unexpected value(s) for the `anthropic-beta` header\" when using an LLM gateway with third-party providers                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_DISABLE_BACKGROUND_TASKS`        | Set to `1` to disable all background task functionality, including the `run_in_background` parameter on Bash and subagent tools, auto-backgrounding, and the Ctrl+B shortcut                                                                                                                                                                                                                                                                                                                                                           |\n| `CLAUDE_CODE_EXIT_AFTER_STOP_DELAY`           | Time in milliseconds to wait after the query loop becomes idle before automatically exiting. Useful for automated workflows and scripts using SDK mode                                                                                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_PROXY_RESOLVES_HOSTS`            | Set to `true` to allow the proxy to perform DNS resolution instead of the caller. Opt-in for environments where the proxy should handle hostname resolution                                                                                                                                                                                                                                                                                                                                                                            |\n| `CLAUDE_CODE_TMPDIR`                          | Override the temp directory used for internal temp files. Claude Code appends `/claude/` to this path. Default: `/tmp` on Unix/macOS, `os.tmpdir()` on Windows                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_DISABLE_NONESSENTIAL_TRAFFIC`    | Equivalent of setting `DISABLE_AUTOUPDATER`, `DISABLE_BUG_COMMAND`, `DISABLE_ERROR_REPORTING`, and `DISABLE_TELEMETRY`                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `CLAUDE_CODE_DISABLE_TERMINAL_TITLE`          | Set to `1` to disable automatic terminal title updates based on conversation context                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `CLAUDE_CODE_FILE_READ_MAX_OUTPUT_TOKENS`     | Override the default token limit for file reads. Useful when you need to read larger files in full                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_HIDE_ACCOUNT_INFO`               | Set to `1` to hide your email address and organization name from the Claude Code UI. Useful when streaming or recording                                                                                                                                                                                                                                                                                                                                                                                                                |\n| `CLAUDE_CODE_IDE_SKIP_AUTO_INSTALL`           | Skip auto-installation of IDE extensions                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_MAX_OUTPUT_TOKENS`               | Set the maximum number of output tokens for most requests. Default: 32,000. Maximum: 64,000. Increasing this value reduces the effective context window available before [auto-compaction](/en/costs#reduce-token-usage) triggers.                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_OTEL_HEADERS_HELPER_DEBOUNCE_MS` | Interval for refreshing dynamic OpenTelemetry headers in milliseconds (default: 1740000 / 29 minutes). See [Dynamic headers](/en/monitoring-usage#dynamic-headers)                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CODE_SHELL`                           | Override automatic shell detection. Useful when your login shell differs from your preferred working shell (for example, `bash` vs `zsh`)                                                                                                                                                                                                                                                                                                                                                                                              |\n| `CLAUDE_CODE_SHELL_PREFIX`                    | Command prefix to wrap all bash commands (for example, for logging or auditing). Example: `/path/to/logger.sh` will execute `/path/to/logger.sh <command>`                                                                                                                                                                                                                                                                                                                                                                             |\n| `CLAUDE_CODE_SKIP_BEDROCK_AUTH`               | Skip AWS authentication for Bedrock (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                                           |\n| `CLAUDE_CODE_SKIP_FOUNDRY_AUTH`               | Skip Azure authentication for Microsoft Foundry (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `CLAUDE_CODE_SKIP_VERTEX_AUTH`                | Skip Google authentication for Vertex (for example, when using an LLM gateway)                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_SUBAGENT_MODEL`                  | See [Model configuration](/en/model-config)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| `CLAUDE_CODE_USE_BEDROCK`                     | Use [Bedrock](/en/amazon-bedrock)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `CLAUDE_CODE_USE_FOUNDRY`                     | Use [Microsoft Foundry](/en/microsoft-foundry)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `CLAUDE_CODE_USE_VERTEX`                      | Use [Vertex](/en/google-vertex-ai)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `CLAUDE_CONFIG_DIR`                           | Customize where Claude Code stores its configuration and data files                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| `DISABLE_AUTOUPDATER`                         | Set to `1` to disable automatic updates.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `DISABLE_BUG_COMMAND`                         | Set to `1` to disable the `/bug` command                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `DISABLE_COST_WARNINGS`                       | Set to `1` to disable cost warning messages                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |\n| `DISABLE_ERROR_REPORTING`                     | Set to `1` to opt out of Sentry error reporting                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |\n| `DISABLE_NON_ESSENTIAL_MODEL_CALLS`           | Set to `1` to disable model calls for non-critical paths like flavor text                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `DISABLE_PROMPT_CACHING`                      | Set to `1` to disable prompt caching for all models (takes precedence over per-model settings)                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `DISABLE_PROMPT_CACHING_HAIKU`                | Set to `1` to disable prompt caching for Haiku models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |\n| `DISABLE_PROMPT_CACHING_OPUS`                 | Set to `1` to disable prompt caching for Opus models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |\n| `DISABLE_PROMPT_CACHING_SONNET`               | Set to `1` to disable prompt caching for Sonnet models                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `DISABLE_TELEMETRY`                           | Set to `1` to opt out of Statsig telemetry (note that Statsig events do not include user data like code, file paths, or bash commands)                                                                                                                                                                                                                                                                                                                                                                                                 |\n| `ENABLE_TOOL_SEARCH`                          | Controls [MCP tool search](/en/mcp#scale-with-mcp-tool-search). Values: `auto` (default, enables at 10% context), `auto:N` (custom threshold, e.g., `auto:5` for 5%), `true` (always on), `false` (disabled)                                                                                                                                                                                                                                                                                                                           |\n| `FORCE_AUTOUPDATE_PLUGINS`                    | Set to `true` to force plugin auto-updates even when the main auto-updater is disabled via `DISABLE_AUTOUPDATER`                                                                                                                                                                                                                                                                                                                                                                                                                       |\n| `HTTP_PROXY`                                  | Specify HTTP proxy server for network connections                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `HTTPS_PROXY`                                 | Specify HTTPS proxy server for network connections                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `IS_DEMO`                                     | Set to `true` to enable demo mode: hides email and organization from the UI, skips onboarding, and hides internal commands. Useful for streaming or recording sessions                                                                                                                                                                                                                                                                                                                                                                 |\n| `MAX_MCP_OUTPUT_TOKENS`                       | Maximum number of tokens allowed in MCP tool responses. Claude Code displays a warning when output exceeds 10,000 tokens (default: 25000)                                                                                                                                                                                                                                                                                                                                                                                              |\n| `MAX_THINKING_TOKENS`                         | Override the [extended thinking](https://docs.claude.com/en/docs/build-with-claude/extended-thinking) token budget. Thinking is enabled at max budget (31,999 tokens) by default. Use this to limit the budget (for example, `MAX_THINKING_TOKENS=10000`) or disable thinking entirely (`MAX_THINKING_TOKENS=0`). Extended thinking improves performance on complex reasoning and coding tasks but impacts [prompt caching efficiency](https://docs.claude.com/en/docs/build-with-claude/prompt-caching#caching-with-thinking-blocks). |\n| `MCP_TIMEOUT`                                 | Timeout in milliseconds for MCP server startup                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `MCP_TOOL_TIMEOUT`                            | Timeout in milliseconds for MCP tool execution                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |\n| `NO_PROXY`                                    | List of domains and IPs to which requests will be directly issued, bypassing proxy                                                                                                                                                                                                                                                                                                                                                                                                                                                     |\n| `SLASH_COMMAND_TOOL_CHAR_BUDGET`              | Maximum number of characters for slash command metadata shown to the [Skill tool](/en/slash-commands#skill-tool) (default: 15000)                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `USE_BUILTIN_RIPGREP`                         | Set to `0` to use system-installed `rg` instead of `rg` included with Claude Code                                                                                                                                                                                                                                                                                                                                                                                                                                                      |\n| `VERTEX_REGION_CLAUDE_3_5_HAIKU`              | Override region for Claude 3.5 Haiku when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |\n| `VERTEX_REGION_CLAUDE_3_7_SONNET`             | Override region for Claude 3.7 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| `VERTEX_REGION_CLAUDE_4_0_OPUS`               | Override region for Claude 4.0 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n| `VERTEX_REGION_CLAUDE_4_0_SONNET`             | Override region for Claude 4.0 Sonnet when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |\n| `VERTEX_REGION_CLAUDE_4_1_OPUS`               | Override region for Claude 4.1 Opus when using Vertex AI                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |\n\n## Tools available to Claude\n\nClaude Code has access to a set of powerful tools that help it understand and modify your codebase:\n\n| Tool                | Description                                                                                        | Permission Required |\n| :------------------ | :------------------------------------------------------------------------------------------------- | :------------------ |\n| **AskUserQuestion** | Asks multiple-choice questions to gather requirements or clarify ambiguity                         | No                  |\n| **Bash**            | Executes shell commands in your environment (see [Bash tool behavior](#bash-tool-behavior) below)  | Yes                 |\n| **TaskOutput**      | Retrieves output from a background task (bash shell or subagent)                                   | No                  |\n| **Edit**            | Makes targeted edits to specific files                                                             | Yes                 |\n| **ExitPlanMode**    | Prompts the user to exit plan mode and start coding                                                | Yes                 |\n| **Glob**            | Finds files based on pattern matching                                                              | No                  |\n| **Grep**            | Searches for patterns in file contents                                                             | No                  |\n| **KillShell**       | Kills a running background bash shell by its ID                                                    | No                  |\n| **MCPSearch**       | Searches for and loads MCP tools when [tool search](/en/mcp#scale-with-mcp-tool-search) is enabled | No                  |\n| **NotebookEdit**    | Modifies Jupyter notebook cells                                                                    | Yes                 |\n| **Read**            | Reads the contents of files                                                                        | No                  |\n| **Skill**           | Executes a [skill or slash command](/en/slash-commands#skill-tool) within the main conversation    | Yes                 |\n| **Task**            | Runs a sub-agent to handle complex, multi-step tasks                                               | No                  |\n| **TodoWrite**       | Creates and manages structured task lists                                                          | No                  |\n| **WebFetch**        | Fetches content from a specified URL                                                               | Yes                 |\n| **WebSearch**       | Performs web searches with domain filtering                                                        | Yes                 |\n| **Write**           | Creates or overwrites files                                                                        | Yes                 |\n\nPermission rules can be configured using `/allowed-tools` or in [permission settings](/en/settings#available-settings). Also see [Tool-specific permission rules](/en/iam#tool-specific-permission-rules).\n\n### Bash tool behavior\n\nThe Bash tool executes shell commands with the following persistence behavior:\n\n* **Working directory persists**: When Claude changes the working directory (for example, `cd /path/to/dir`), subsequent Bash commands will execute in that directory. You can use `CLAUDE_BASH_MAINTAIN_PROJECT_WORKING_DIR=1` to reset to the project directory after each command.\n* **Environment variables do NOT persist**: Environment variables set in one Bash command (for example, `export MY_VAR=value`) are **not** available in subsequent Bash commands. Each Bash command runs in a fresh shell environment.\n\nTo make environment variables available in Bash commands, you have **three options**:\n\n**Option 1: Activate environment before starting Claude Code** (simplest approach)\n\nActivate your virtual environment in your terminal before launching Claude Code:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\nclaude\n```\n\nThis works for shell environments but environment variables set within Claude's Bash commands will not persist between commands.\n\n**Option 2: Set CLAUDE\\_ENV\\_FILE before starting Claude Code** (persistent environment setup)\n\nExport the path to a shell script containing your environment setup:\n\n```bash  theme={null}\nexport CLAUDE_ENV_FILE=/path/to/env-setup.sh\nclaude\n```\n\nWhere `/path/to/env-setup.sh` contains:\n\n```bash  theme={null}\nconda activate myenv\n# or: source /path/to/venv/bin/activate\n# or: export MY_VAR=value\n```\n\nClaude Code will source this file before each Bash command, making the environment persistent across all commands.\n\n**Option 3: Use a SessionStart hook** (project-specific configuration)\n\nConfigure in `.claude/settings.json`:\n\n```json  theme={null}\n{\n  \"hooks\": {\n    \"SessionStart\": [{\n      \"matcher\": \"startup\",\n      \"hooks\": [{\n        \"type\": \"command\",\n        \"command\": \"echo 'conda activate myenv' >> \\\"$CLAUDE_ENV_FILE\\\"\"\n      }]\n    }]\n  }\n}\n```\n\nThe hook writes to `$CLAUDE_ENV_FILE`, which is then sourced before each Bash command. This is ideal for team-shared project configurations.\n\nSee [SessionStart hooks](/en/hooks#persisting-environment-variables) for more details on Option 3.\n\n### Extending tools with hooks\n\nYou can run custom commands before or after any tool executes using\n[Claude Code hooks](/en/hooks-guide).\n\nFor example, you could automatically run a Python formatter after Claude\nmodifies Python files, or prevent modifications to production configuration\nfiles by blocking Write operations to certain paths.\n\n## See also\n\n* [Identity and Access Management](/en/iam#configuring-permissions) - Learn about Claude Code's permission system\n* [IAM and access control](/en/iam#managed-settings) - Managed policy configuration\n* [Troubleshooting](/en/troubleshooting#auto-updater-issues) - Solutions for common configuration issues\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":153,"url":"https://code.claude.com/docs/en/settings.md"},"sourceToolAssistantUUID":"3f290e35-856e-4814-a1de-1e5ebcb9590a"}
{"parentUuid":"cb37726e-5c52-4692-83cb-a780a3c7f4c5","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01V4zZg8PoJUxS31YduNvbbp","type":"tool_result","content":"# Agent Skills\n\n> Create, manage, and share Skills to extend Claude's capabilities in Claude Code.\n\nThis guide shows you how to create, use, and manage Agent Skills in Claude Code. For background on how Skills work across Claude products, see [What are Skills?](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview).\n\nA Skill is a markdown file that teaches Claude how to do something specific: reviewing PRs using your team's standards, generating commit messages in your preferred format, or querying your company's database schema. When you ask Claude something that matches a Skill's purpose, Claude automatically applies it.\n\n## Create your first Skill\n\nThis example creates a personal Skill that teaches Claude to explain code using visual diagrams and analogies. Unlike Claude's default explanations, this Skill ensures every explanation includes an ASCII diagram and a real-world analogy.\n\n<Steps>\n  <Step title=\"Check available Skills\">\n    Before creating a Skill, see what Skills Claude already has access to:\n\n    ```\n    What Skills are available?\n    ```\n\n    Claude will list any Skills currently loaded. You may see none, or you may see Skills from plugins or your organization.\n  </Step>\n\n  <Step title=\"Create the Skill directory\">\n    Create a directory for the Skill in your personal Skills folder. Personal Skills are available across all your projects. (You can also create [project Skills](#where-skills-live) in `.claude/skills/` to share with your team.)\n\n    ```bash  theme={null}\n    mkdir -p ~/.claude/skills/explaining-code\n    ```\n  </Step>\n\n  <Step title=\"Write SKILL.md\">\n    Every Skill needs a `SKILL.md` file. The file starts with YAML metadata between `---` markers and must include a `name` and `description`, followed by Markdown instructions that Claude follows when the Skill is active.\n\n    The `description` is especially important, because Claude uses it to decide when to apply the Skill.\n\n    Create `~/.claude/skills/explaining-code/SKILL.md`:\n\n    ```yaml  theme={null}\n    ---\n    name: explaining-code\n    description: Explains code with visual diagrams and analogies. Use when explaining how code works, teaching about a codebase, or when the user asks \"how does this work?\"\n    ---\n\n    When explaining code, always include:\n\n    1. **Start with an analogy**: Compare the code to something from everyday life\n    2. **Draw a diagram**: Use ASCII art to show the flow, structure, or relationships\n    3. **Walk through the code**: Explain step-by-step what happens\n    4. **Highlight a gotcha**: What's a common mistake or misconception?\n\n    Keep explanations conversational. For complex concepts, use multiple analogies.\n    ```\n  </Step>\n\n  <Step title=\"Load and verify the Skill\">\n    Skills are automatically loaded when created or modified. Verify the Skill appears in the list:\n\n    ```\n    What Skills are available?\n    ```\n\n    You should see `explaining-code` in the list with its description.\n  </Step>\n\n  <Step title=\"Test the Skill\">\n    Open any file in your project and ask Claude a question that matches the Skill's description:\n\n    ```\n    How does this code work?\n    ```\n\n    Claude should ask to use the `explaining-code` Skill, then include an analogy and ASCII diagram in its explanation. If the Skill doesn't trigger, try rephrasing to include more keywords from the description, like \"explain how this works.\"\n  </Step>\n</Steps>\n\nThe rest of this guide covers how Skills work, configuration options, and troubleshooting.\n\n## How Skills work\n\nSkills are **model-invoked**: Claude decides which Skills to use based on your request. You don't need to explicitly call a Skill. Claude automatically applies relevant Skills when your request matches their description.\n\nWhen you send a request, Claude follows these steps to find and use relevant Skills:\n\n<Steps>\n  <Step title=\"Discovery\">\n    At startup, Claude loads only the name and description of each available Skill. This keeps startup fast while giving Claude enough context to know when each Skill might be relevant.\n  </Step>\n\n  <Step title=\"Activation\">\n    When your request matches a Skill's description, Claude asks to use the Skill. You'll see a confirmation prompt before the full `SKILL.md` is loaded into context. Since Claude reads these descriptions to find relevant Skills, [write descriptions](#skill-not-triggering) that include keywords users would naturally say.\n  </Step>\n\n  <Step title=\"Execution\">\n    Claude follows the Skill's instructions, loading referenced files or running bundled scripts as needed.\n  </Step>\n</Steps>\n\n### Where Skills live\n\nWhere you store a Skill determines who can use it:\n\n| Location   | Path                                             | Applies to                        |\n| :--------- | :----------------------------------------------- | :-------------------------------- |\n| Enterprise | See [managed settings](/en/iam#managed-settings) | All users in your organization    |\n| Personal   | `~/.claude/skills/`                              | You, across all projects          |\n| Project    | `.claude/skills/`                                | Anyone working in this repository |\n| Plugin     | Bundled with [plugins](/en/plugins)              | Anyone with the plugin installed  |\n\nIf two Skills have the same name, the higher row wins: managed overrides personal, personal overrides project, and project overrides plugin.\n\n#### Automatic discovery from nested directories\n\nWhen you work with files in subdirectories, Claude Code automatically discovers Skills from nested `.claude/skills/` directories. For example, if you're editing a file in `packages/frontend/`, Claude Code also looks for Skills in `packages/frontend/.claude/skills/`. This supports monorepo setups where packages have their own Skills.\n\n### When to use Skills versus other options\n\nClaude Code offers several ways to customize behavior. The key difference: **Skills are triggered automatically by Claude** based on your request, while slash commands require you to type `/command` explicitly.\n\n| Use this                                 | When you want to...                                                        | When it runs                               |\n| :--------------------------------------- | :------------------------------------------------------------------------- | :----------------------------------------- |\n| **Skills**                               | Give Claude specialized knowledge (e.g., \"review PRs using our standards\") | Claude chooses when relevant               |\n| **[Slash commands](/en/slash-commands)** | Create reusable prompts (e.g., `/deploy staging`)                          | You type `/command` to run it              |\n| **[CLAUDE.md](/en/memory)**              | Set project-wide instructions (e.g., \"use TypeScript strict mode\")         | Loaded into every conversation             |\n| **[Subagents](/en/sub-agents)**          | Delegate tasks to a separate context with its own tools                    | Claude delegates, or you invoke explicitly |\n| **[Hooks](/en/hooks)**                   | Run scripts on events (e.g., lint on file save)                            | Fires on specific tool events              |\n| **[MCP servers](/en/mcp)**               | Connect Claude to external tools and data sources                          | Claude calls MCP tools as needed           |\n\n**Skills vs. subagents**: Skills add knowledge to the current conversation. Subagents run in a separate context with their own tools. Use Skills for guidance and standards; use subagents when you need isolation or different tool access.\n\n**Skills vs. MCP**: Skills tell Claude *how* to use tools; MCP *provides* the tools. For example, an MCP server connects Claude to your database, while a Skill teaches Claude your data model and query patterns.\n\n<Note>\n  For a deep dive into the architecture and real-world applications of Agent Skills, read [Equipping agents for the real world with Agent Skills](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills).\n</Note>\n\n## Configure Skills\n\nThis section covers Skill file structure, supporting files, tool restrictions, and distribution options.\n\n### Write SKILL.md\n\nThe `SKILL.md` file is the only required file in a Skill. It has two parts: YAML metadata (the section between `---` markers) at the top, and Markdown instructions that tell Claude how to use the Skill:\n\n```yaml  theme={null}\n---\nname: your-skill-name\ndescription: Brief description of what this Skill does and when to use it\n---\n\n# Your Skill Name\n\n## Instructions\nProvide clear, step-by-step guidance for Claude.\n\n## Examples\nShow concrete examples of using this Skill.\n```\n\n#### Available metadata fields\n\nYou can use the following fields in the YAML frontmatter:\n\n| Field            | Required | Description                                                                                                                                                                                                                                                                                       |\n| :--------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `name`           | Yes      | Skill name. Must use lowercase letters, numbers, and hyphens only (max 64 characters). Should match the directory name.                                                                                                                                                                           |\n| `description`    | Yes      | What the Skill does and when to use it (max 1024 characters). Claude uses this to decide when to apply the Skill.                                                                                                                                                                                 |\n| `allowed-tools`  | No       | Tools Claude can use without asking permission when this Skill is active. Supports comma-separated values or YAML-style lists. See [Restrict tool access](#restrict-tool-access-with-allowed-tools).                                                                                              |\n| `model`          | No       | [Model](https://docs.claude.com/en/docs/about-claude/models/overview) to use when this Skill is active (e.g., `claude-sonnet-4-20250514`). Defaults to the conversation's model.                                                                                                                  |\n| `context`        | No       | Set to `fork` to run the Skill in a forked sub-agent context with its own conversation history.                                                                                                                                                                                                   |\n| `agent`          | No       | Specify which [agent type](/en/sub-agents#built-in-subagents) to use when `context: fork` is set (e.g., `Explore`, `Plan`, `general-purpose`, or a custom agent name from `.claude/agents/`). Defaults to `general-purpose` if not specified. Only applicable when combined with `context: fork`. |\n| `hooks`          | No       | Define hooks scoped to this Skill's lifecycle. Supports `PreToolUse`, `PostToolUse`, and `Stop` events.                                                                                                                                                                                           |\n| `user-invocable` | No       | Controls whether the Skill appears in the slash command menu. Does not affect the [`Skill` tool](/en/slash-commands#skill-tool) or automatic discovery. Defaults to `true`. See [Control Skill visibility](#control-skill-visibility).                                                            |\n\n#### Available string substitutions\n\nSkills support string substitution for dynamic values in the Skill content:\n\n| Variable               | Description                                                                                                                                  |\n| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------- |\n| `$ARGUMENTS`           | All arguments passed when invoking the Skill. If `$ARGUMENTS` is not present in the content, arguments are appended as `ARGUMENTS: <value>`. |\n| `${CLAUDE_SESSION_ID}` | The current session ID. Useful for logging, creating session-specific files, or correlating Skill output with sessions.                      |\n\n**Example using substitutions:**\n\n```yaml  theme={null}\n---\nname: session-logger\ndescription: Log activity for this session\n---\n\nLog the following to logs/${CLAUDE_SESSION_ID}.log:\n\n$ARGUMENTS\n```\n\nSee the [best practices guide](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices) for complete authoring guidance including validation rules.\n\n### Update or delete a Skill\n\nTo update a Skill, edit its `SKILL.md` file directly. To remove a Skill, delete its directory. Changes take effect immediately.\n\n### Add supporting files with progressive disclosure\n\nSkills share Claude's context window with conversation history, other Skills, and your request. To keep context focused, use **progressive disclosure**: put essential information in `SKILL.md` and detailed reference material in separate files that Claude reads only when needed.\n\nThis approach lets you bundle comprehensive documentation, examples, and scripts without consuming context upfront. Claude loads additional files only when the task requires them.\n\n<Tip>Keep `SKILL.md` under 500 lines for optimal performance. If your content exceeds this, split detailed reference material into separate files.</Tip>\n\n#### Example: multi-file Skill structure\n\nClaude discovers supporting files through links in your `SKILL.md`. The following example shows a Skill with detailed documentation in separate files and utility scripts that Claude can execute without reading:\n\n```\nmy-skill/\n SKILL.md (required - overview and navigation)\n reference.md (detailed API docs - loaded when needed)\n examples.md (usage examples - loaded when needed)\n scripts/\n     helper.py (utility script - executed, not loaded)\n```\n\nThe `SKILL.md` file references these supporting files so Claude knows they exist:\n\n````markdown  theme={null}\n## Overview\n\n[Essential instructions here]\n\n## Additional resources\n\n- For complete API details, see [reference.md](reference.md)\n- For usage examples, see [examples.md](examples.md)\n\n## Utility scripts\n\nTo validate input files, run the helper script. It checks for required fields and returns any validation errors:\n```bash\npython scripts/helper.py input.txt\n```\n````\n\n<Tip>Keep references one level deep. Link directly from `SKILL.md` to reference files. Deeply nested references (file A links to file B which links to file C) may result in Claude partially reading files.</Tip>\n\n**Bundle utility scripts for zero-context execution.** Scripts in your Skill directory can be executed without loading their contents into context. Claude runs the script and only the output consumes tokens. This is useful for:\n\n* Complex validation logic that would be verbose to describe in prose\n* Data processing that's more reliable as tested code than generated code\n* Operations that benefit from consistency across uses\n\nIn `SKILL.md`, tell Claude to run the script rather than read it:\n\n```markdown  theme={null}\nRun the validation script to check the form:\npython scripts/validate_form.py input.pdf\n```\n\nFor complete guidance on structuring Skills, see the [best practices guide](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices#progressive-disclosure-patterns).\n\n### Restrict tool access with allowed-tools\n\nUse the `allowed-tools` frontmatter field to limit which tools Claude can use when a Skill is active. You can specify tools as a comma-separated string or a YAML list:\n\n```yaml  theme={null}\n---\nname: reading-files-safely\ndescription: Read files without making changes. Use when you need read-only file access.\nallowed-tools: Read, Grep, Glob\n---\n```\n\nOr use YAML-style lists for better readability:\n\n```yaml  theme={null}\n---\nname: reading-files-safely\ndescription: Read files without making changes. Use when you need read-only file access.\nallowed-tools:\n  - Read\n  - Grep\n  - Glob\n---\n```\n\nWhen this Skill is active, Claude can only use the specified tools (Read, Grep, Glob) without needing to ask for permission. This is useful for:\n\n* Read-only Skills that shouldn't modify files\n* Skills with limited scope: for example, only data analysis, no file writing\n* Security-sensitive workflows where you want to restrict capabilities\n\nIf `allowed-tools` is omitted, the Skill doesn't restrict tools. Claude uses its standard permission model and may ask you to approve tool usage.\n\n<Note>\n  `allowed-tools` is only supported for Skills in Claude Code.\n</Note>\n\n### Run Skills in a forked context\n\nUse `context: fork` to run a Skill in an isolated sub-agent context with its own conversation history. This is useful for Skills that perform complex multi-step operations without cluttering the main conversation:\n\n```yaml  theme={null}\n---\nname: code-analysis\ndescription: Analyze code quality and generate detailed reports\ncontext: fork\n---\n```\n\n### Define hooks for Skills\n\nSkills can define hooks that run during the Skill's lifecycle. Use the `hooks` field to specify `PreToolUse`, `PostToolUse`, or `Stop` handlers:\n\n```yaml  theme={null}\n---\nname: secure-operations\ndescription: Perform operations with additional security checks\nhooks:\n  PreToolUse:\n    - matcher: \"Bash\"\n      hooks:\n        - type: command\n          command: \"./scripts/security-check.sh $TOOL_INPUT\"\n          once: true\n---\n```\n\nThe `once: true` option runs the hook only once per session. After the first successful execution, the hook is removed.\n\nHooks defined in a Skill are scoped to that Skill's execution and are automatically cleaned up when the Skill finishes.\n\nSee [Hooks](/en/hooks) for the complete hook configuration format.\n\n### Control Skill visibility\n\nSkills can be invoked in three ways:\n\n1. **Manual invocation**: You type `/skill-name` in the prompt\n2. **Programmatic invocation**: Claude calls it via the [`Skill` tool](/en/slash-commands#skill-tool)\n3. **Automatic discovery**: Claude reads the Skill's description and loads it when relevant to the conversation\n\nThe `user-invocable` field controls only manual invocation. When set to `false`, the Skill is hidden from the slash command menu but Claude can still invoke it programmatically or discover it automatically.\n\nTo block programmatic invocation via the `Skill` tool, use `disable-model-invocation: true` instead.\n\n#### When to use each setting\n\n| Setting                          | Slash menu | `Skill` tool | Auto-discovery | Use case                                                        |\n| :------------------------------- | :--------- | :----------- | :------------- | :-------------------------------------------------------------- |\n| `user-invocable: true` (default) | Visible    | Allowed      | Yes            | Skills you want users to invoke directly                        |\n| `user-invocable: false`          | Hidden     | Allowed      | Yes            | Skills that Claude can use but users shouldn't invoke manually  |\n| `disable-model-invocation: true` | Visible    | Blocked      | Yes            | Skills you want users to invoke but not Claude programmatically |\n\n#### Example: model-only Skill\n\nSet `user-invocable: false` to hide a Skill from the slash menu while still allowing Claude to invoke it programmatically:\n\n```yaml  theme={null}\n---\nname: internal-review-standards\ndescription: Apply internal code review standards when reviewing pull requests\nuser-invocable: false\n---\n```\n\nWith this setting, users won't see the Skill in the `/` menu, but Claude can still invoke it via the `Skill` tool or discover it automatically based on context.\n\n### Skills and subagents\n\nThere are two ways Skills and subagents can work together:\n\n#### Give a subagent access to Skills\n\n[Subagents](/en/sub-agents) do not automatically inherit Skills from the main conversation. To give a custom subagent access to specific Skills, list them in the subagent's `skills` field:\n\n```yaml  theme={null}\n# .claude/agents/code-reviewer.md\n---\nname: code-reviewer\ndescription: Review code for quality and best practices\nskills: pr-review, security-check\n---\n```\n\nThe full content of each listed Skill is injected into the subagent's context at startup, not just made available for invocation. If the `skills` field is omitted, no Skills are loaded for that subagent.\n\n<Note>\n  Built-in agents (Explore, Plan, general-purpose) do not have access to your Skills. Only custom subagents you define in `.claude/agents/` with an explicit `skills` field can use Skills.\n</Note>\n\n#### Run a Skill in a subagent context\n\nUse `context: fork` and `agent` to run a Skill in a forked subagent with its own separate context. See [Run Skills in a forked context](#run-skills-in-a-forked-context) for details.\n\n### Distribute Skills\n\nYou can share Skills in several ways:\n\n* **Project Skills**: Commit `.claude/skills/` to version control. Anyone who clones the repository gets the Skills.\n* **Plugins**: To share Skills across multiple repositories, create a `skills/` directory in your [plugin](/en/plugins) with Skill folders containing `SKILL.md` files. Distribute through a [plugin marketplace](/en/plugin-marketplaces).\n* **Managed**: Administrators can deploy Skills organization-wide through [managed settings](/en/iam#managed-settings). See [Where Skills live](#where-skills-live) for managed Skill paths.\n\n## Examples\n\nThese examples show common Skill patterns, from minimal single-file Skills to multi-file Skills with supporting documentation and scripts.\n\n### Simple Skill (single file)\n\nA minimal Skill needs only a `SKILL.md` file with frontmatter and instructions. This example helps Claude generate commit messages by examining staged changes:\n\n```\ncommit-helper/\n SKILL.md\n```\n\n```yaml  theme={null}\n---\nname: generating-commit-messages\ndescription: Generates clear commit messages from git diffs. Use when writing commit messages or reviewing staged changes.\n---\n\n# Generating Commit Messages\n\n## Instructions\n\n1. Run `git diff --staged` to see changes\n2. I'll suggest a commit message with:\n   - Summary under 50 characters\n   - Detailed description\n   - Affected components\n\n## Best practices\n\n- Use present tense\n- Explain what and why, not how\n```\n\n### Use multiple files\n\nFor complex Skills, use progressive disclosure to keep the main `SKILL.md` focused while providing detailed documentation in supporting files. This PDF processing Skill includes reference docs, utility scripts, and uses `allowed-tools` to restrict Claude to specific tools:\n\n```\npdf-processing/\n SKILL.md              # Overview and quick start\n FORMS.md              # Form field mappings and filling instructions\n REFERENCE.md          # API details for pypdf and pdfplumber\n scripts/\n     fill_form.py      # Utility to populate form fields\n     validate.py       # Checks PDFs for required fields\n```\n\n**`SKILL.md`**:\n\n````yaml  theme={null}\n---\nname: pdf-processing\ndescription: Extract text, fill forms, merge PDFs. Use when working with PDF files, forms, or document extraction. Requires pypdf and pdfplumber packages.\nallowed-tools: Read, Bash(python:*)\n---\n\n# PDF Processing\n\n## Quick start\n\nExtract text:\n```python\nimport pdfplumber\nwith pdfplumber.open(\"doc.pdf\") as pdf:\n    text = pdf.pages[0].extract_text()\n```\n\nFor form filling, see [FORMS.md](FORMS.md).\nFor detailed API reference, see [REFERENCE.md](REFERENCE.md).\n\n## Requirements\n\nPackages must be installed in your environment:\n```bash\npip install pypdf pdfplumber\n```\n````\n\n<Note>\n  If your Skill requires external packages, list them in the description. Packages must be installed in your environment before Claude can use them.\n</Note>\n\n## Troubleshooting\n\n### View and test Skills\n\nTo see which Skills Claude has access to, ask Claude a question like \"What Skills are available?\" Claude loads all available Skill names and descriptions into the context window when a conversation starts, so it can list the Skills it currently has access to.\n\nTo test a specific Skill, ask Claude to do a task that matches the Skill's description. For example, if your Skill has the description \"Reviews pull requests for code quality\", ask Claude to \"Review the changes in my current branch.\" Claude automatically uses the Skill when the request matches its description.\n\n### Skill not triggering\n\nThe description field is how Claude decides whether to use your Skill. Vague descriptions like \"Helps with documents\" don't give Claude enough information to match your Skill to relevant requests.\n\nA good description answers two questions:\n\n1. **What does this Skill do?** List the specific capabilities.\n2. **When should Claude use it?** Include trigger terms users would mention.\n\n```yaml  theme={null}\ndescription: Extract text and tables from PDF files, fill forms, merge documents. Use when working with PDF files or when the user mentions PDFs, forms, or document extraction.\n```\n\nThis description works because it names specific actions (extract, fill, merge) and includes keywords users would say (PDF, forms, document extraction).\n\n### Skill doesn't load\n\n**Check the file path.** Skills must be in the correct directory with the exact filename `SKILL.md` (case-sensitive):\n\n| Type       | Path                                                                    |\n| :--------- | :---------------------------------------------------------------------- |\n| Personal   | `~/.claude/skills/my-skill/SKILL.md`                                    |\n| Project    | `.claude/skills/my-skill/SKILL.md`                                      |\n| Enterprise | See [Where Skills live](#where-skills-live) for platform-specific paths |\n| Plugin     | `skills/my-skill/SKILL.md` inside the plugin directory                  |\n\n**Check the YAML syntax.** Invalid YAML in the frontmatter prevents the Skill from loading. The frontmatter must start with `---` on line 1 (no blank lines before it), end with `---` before the Markdown content, and use spaces for indentation (not tabs).\n\n**Run debug mode.** Use `claude --debug` to see Skill loading errors.\n\n### Skill has errors\n\n**Check dependencies are installed.** If your Skill uses external packages, they must be installed in your environment before Claude can use them.\n\n**Check script permissions.** Scripts need execute permissions: `chmod +x scripts/*.py`\n\n**Check file paths.** Use forward slashes (Unix style) in all paths. Use `scripts/helper.py`, not `scripts\\helper.py`.\n\n### Multiple Skills conflict\n\nIf Claude uses the wrong Skill or seems confused between similar Skills, the descriptions are probably too similar. Make each description distinct by using specific trigger terms.\n\nFor example, instead of two Skills with \"data analysis\" in both descriptions, differentiate them: one for \"sales data in Excel files and CRM exports\" and another for \"log files and system metrics\". The more specific your trigger terms, the easier it is for Claude to match the right Skill to your request.\n\n### Plugin Skills not appearing\n\n**Symptom**: You installed a plugin from a marketplace, but its Skills don't appear when you ask Claude \"What Skills are available?\"\n\n**Solution**: Clear the plugin cache and reinstall:\n\n```bash  theme={null}\nrm -rf ~/.claude/plugins/cache\n```\n\nThen restart Claude Code and reinstall the plugin:\n\n```shell  theme={null}\n/plugin install plugin-name@marketplace-name\n```\n\nThis forces Claude Code to re-download and re-register the plugin's Skills.\n\n**If Skills still don't appear**, verify the plugin's directory structure is correct. Skills must be in a `skills/` directory at the plugin root:\n\n```\nmy-plugin/\n .claude-plugin/\n    plugin.json\n skills/\n     my-skill/\n         SKILL.md\n```\n\n## Next steps\n\n<CardGroup cols={2}>\n  <Card title=\"Authoring best practices\" icon=\"lightbulb\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices\">\n    Write Skills that Claude can use effectively\n  </Card>\n\n  <Card title=\"Agent Skills overview\" icon=\"book\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview\">\n    Learn how Skills work across Claude products\n  </Card>\n\n  <Card title=\"Use Skills in the Agent SDK\" icon=\"cube\" href=\"https://docs.claude.com/en/docs/agent-sdk/skills\">\n    Use Skills programmatically with TypeScript and Python\n  </Card>\n\n  <Card title=\"Get started with Agent Skills\" icon=\"rocket\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/quickstart\">\n    Create your first Skill\n  </Card>\n</CardGroup>\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"fae49279-1091-421c-aef4-9b90c2e925a4","timestamp":"2026-01-18T08:08:51.740Z","toolUseResult":{"bytes":29445,"code":200,"codeText":"OK","result":"# Agent Skills\n\n> Create, manage, and share Skills to extend Claude's capabilities in Claude Code.\n\nThis guide shows you how to create, use, and manage Agent Skills in Claude Code. For background on how Skills work across Claude products, see [What are Skills?](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview).\n\nA Skill is a markdown file that teaches Claude how to do something specific: reviewing PRs using your team's standards, generating commit messages in your preferred format, or querying your company's database schema. When you ask Claude something that matches a Skill's purpose, Claude automatically applies it.\n\n## Create your first Skill\n\nThis example creates a personal Skill that teaches Claude to explain code using visual diagrams and analogies. Unlike Claude's default explanations, this Skill ensures every explanation includes an ASCII diagram and a real-world analogy.\n\n<Steps>\n  <Step title=\"Check available Skills\">\n    Before creating a Skill, see what Skills Claude already has access to:\n\n    ```\n    What Skills are available?\n    ```\n\n    Claude will list any Skills currently loaded. You may see none, or you may see Skills from plugins or your organization.\n  </Step>\n\n  <Step title=\"Create the Skill directory\">\n    Create a directory for the Skill in your personal Skills folder. Personal Skills are available across all your projects. (You can also create [project Skills](#where-skills-live) in `.claude/skills/` to share with your team.)\n\n    ```bash  theme={null}\n    mkdir -p ~/.claude/skills/explaining-code\n    ```\n  </Step>\n\n  <Step title=\"Write SKILL.md\">\n    Every Skill needs a `SKILL.md` file. The file starts with YAML metadata between `---` markers and must include a `name` and `description`, followed by Markdown instructions that Claude follows when the Skill is active.\n\n    The `description` is especially important, because Claude uses it to decide when to apply the Skill.\n\n    Create `~/.claude/skills/explaining-code/SKILL.md`:\n\n    ```yaml  theme={null}\n    ---\n    name: explaining-code\n    description: Explains code with visual diagrams and analogies. Use when explaining how code works, teaching about a codebase, or when the user asks \"how does this work?\"\n    ---\n\n    When explaining code, always include:\n\n    1. **Start with an analogy**: Compare the code to something from everyday life\n    2. **Draw a diagram**: Use ASCII art to show the flow, structure, or relationships\n    3. **Walk through the code**: Explain step-by-step what happens\n    4. **Highlight a gotcha**: What's a common mistake or misconception?\n\n    Keep explanations conversational. For complex concepts, use multiple analogies.\n    ```\n  </Step>\n\n  <Step title=\"Load and verify the Skill\">\n    Skills are automatically loaded when created or modified. Verify the Skill appears in the list:\n\n    ```\n    What Skills are available?\n    ```\n\n    You should see `explaining-code` in the list with its description.\n  </Step>\n\n  <Step title=\"Test the Skill\">\n    Open any file in your project and ask Claude a question that matches the Skill's description:\n\n    ```\n    How does this code work?\n    ```\n\n    Claude should ask to use the `explaining-code` Skill, then include an analogy and ASCII diagram in its explanation. If the Skill doesn't trigger, try rephrasing to include more keywords from the description, like \"explain how this works.\"\n  </Step>\n</Steps>\n\nThe rest of this guide covers how Skills work, configuration options, and troubleshooting.\n\n## How Skills work\n\nSkills are **model-invoked**: Claude decides which Skills to use based on your request. You don't need to explicitly call a Skill. Claude automatically applies relevant Skills when your request matches their description.\n\nWhen you send a request, Claude follows these steps to find and use relevant Skills:\n\n<Steps>\n  <Step title=\"Discovery\">\n    At startup, Claude loads only the name and description of each available Skill. This keeps startup fast while giving Claude enough context to know when each Skill might be relevant.\n  </Step>\n\n  <Step title=\"Activation\">\n    When your request matches a Skill's description, Claude asks to use the Skill. You'll see a confirmation prompt before the full `SKILL.md` is loaded into context. Since Claude reads these descriptions to find relevant Skills, [write descriptions](#skill-not-triggering) that include keywords users would naturally say.\n  </Step>\n\n  <Step title=\"Execution\">\n    Claude follows the Skill's instructions, loading referenced files or running bundled scripts as needed.\n  </Step>\n</Steps>\n\n### Where Skills live\n\nWhere you store a Skill determines who can use it:\n\n| Location   | Path                                             | Applies to                        |\n| :--------- | :----------------------------------------------- | :-------------------------------- |\n| Enterprise | See [managed settings](/en/iam#managed-settings) | All users in your organization    |\n| Personal   | `~/.claude/skills/`                              | You, across all projects          |\n| Project    | `.claude/skills/`                                | Anyone working in this repository |\n| Plugin     | Bundled with [plugins](/en/plugins)              | Anyone with the plugin installed  |\n\nIf two Skills have the same name, the higher row wins: managed overrides personal, personal overrides project, and project overrides plugin.\n\n#### Automatic discovery from nested directories\n\nWhen you work with files in subdirectories, Claude Code automatically discovers Skills from nested `.claude/skills/` directories. For example, if you're editing a file in `packages/frontend/`, Claude Code also looks for Skills in `packages/frontend/.claude/skills/`. This supports monorepo setups where packages have their own Skills.\n\n### When to use Skills versus other options\n\nClaude Code offers several ways to customize behavior. The key difference: **Skills are triggered automatically by Claude** based on your request, while slash commands require you to type `/command` explicitly.\n\n| Use this                                 | When you want to...                                                        | When it runs                               |\n| :--------------------------------------- | :------------------------------------------------------------------------- | :----------------------------------------- |\n| **Skills**                               | Give Claude specialized knowledge (e.g., \"review PRs using our standards\") | Claude chooses when relevant               |\n| **[Slash commands](/en/slash-commands)** | Create reusable prompts (e.g., `/deploy staging`)                          | You type `/command` to run it              |\n| **[CLAUDE.md](/en/memory)**              | Set project-wide instructions (e.g., \"use TypeScript strict mode\")         | Loaded into every conversation             |\n| **[Subagents](/en/sub-agents)**          | Delegate tasks to a separate context with its own tools                    | Claude delegates, or you invoke explicitly |\n| **[Hooks](/en/hooks)**                   | Run scripts on events (e.g., lint on file save)                            | Fires on specific tool events              |\n| **[MCP servers](/en/mcp)**               | Connect Claude to external tools and data sources                          | Claude calls MCP tools as needed           |\n\n**Skills vs. subagents**: Skills add knowledge to the current conversation. Subagents run in a separate context with their own tools. Use Skills for guidance and standards; use subagents when you need isolation or different tool access.\n\n**Skills vs. MCP**: Skills tell Claude *how* to use tools; MCP *provides* the tools. For example, an MCP server connects Claude to your database, while a Skill teaches Claude your data model and query patterns.\n\n<Note>\n  For a deep dive into the architecture and real-world applications of Agent Skills, read [Equipping agents for the real world with Agent Skills](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills).\n</Note>\n\n## Configure Skills\n\nThis section covers Skill file structure, supporting files, tool restrictions, and distribution options.\n\n### Write SKILL.md\n\nThe `SKILL.md` file is the only required file in a Skill. It has two parts: YAML metadata (the section between `---` markers) at the top, and Markdown instructions that tell Claude how to use the Skill:\n\n```yaml  theme={null}\n---\nname: your-skill-name\ndescription: Brief description of what this Skill does and when to use it\n---\n\n# Your Skill Name\n\n## Instructions\nProvide clear, step-by-step guidance for Claude.\n\n## Examples\nShow concrete examples of using this Skill.\n```\n\n#### Available metadata fields\n\nYou can use the following fields in the YAML frontmatter:\n\n| Field            | Required | Description                                                                                                                                                                                                                                                                                       |\n| :--------------- | :------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| `name`           | Yes      | Skill name. Must use lowercase letters, numbers, and hyphens only (max 64 characters). Should match the directory name.                                                                                                                                                                           |\n| `description`    | Yes      | What the Skill does and when to use it (max 1024 characters). Claude uses this to decide when to apply the Skill.                                                                                                                                                                                 |\n| `allowed-tools`  | No       | Tools Claude can use without asking permission when this Skill is active. Supports comma-separated values or YAML-style lists. See [Restrict tool access](#restrict-tool-access-with-allowed-tools).                                                                                              |\n| `model`          | No       | [Model](https://docs.claude.com/en/docs/about-claude/models/overview) to use when this Skill is active (e.g., `claude-sonnet-4-20250514`). Defaults to the conversation's model.                                                                                                                  |\n| `context`        | No       | Set to `fork` to run the Skill in a forked sub-agent context with its own conversation history.                                                                                                                                                                                                   |\n| `agent`          | No       | Specify which [agent type](/en/sub-agents#built-in-subagents) to use when `context: fork` is set (e.g., `Explore`, `Plan`, `general-purpose`, or a custom agent name from `.claude/agents/`). Defaults to `general-purpose` if not specified. Only applicable when combined with `context: fork`. |\n| `hooks`          | No       | Define hooks scoped to this Skill's lifecycle. Supports `PreToolUse`, `PostToolUse`, and `Stop` events.                                                                                                                                                                                           |\n| `user-invocable` | No       | Controls whether the Skill appears in the slash command menu. Does not affect the [`Skill` tool](/en/slash-commands#skill-tool) or automatic discovery. Defaults to `true`. See [Control Skill visibility](#control-skill-visibility).                                                            |\n\n#### Available string substitutions\n\nSkills support string substitution for dynamic values in the Skill content:\n\n| Variable               | Description                                                                                                                                  |\n| :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------- |\n| `$ARGUMENTS`           | All arguments passed when invoking the Skill. If `$ARGUMENTS` is not present in the content, arguments are appended as `ARGUMENTS: <value>`. |\n| `${CLAUDE_SESSION_ID}` | The current session ID. Useful for logging, creating session-specific files, or correlating Skill output with sessions.                      |\n\n**Example using substitutions:**\n\n```yaml  theme={null}\n---\nname: session-logger\ndescription: Log activity for this session\n---\n\nLog the following to logs/${CLAUDE_SESSION_ID}.log:\n\n$ARGUMENTS\n```\n\nSee the [best practices guide](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices) for complete authoring guidance including validation rules.\n\n### Update or delete a Skill\n\nTo update a Skill, edit its `SKILL.md` file directly. To remove a Skill, delete its directory. Changes take effect immediately.\n\n### Add supporting files with progressive disclosure\n\nSkills share Claude's context window with conversation history, other Skills, and your request. To keep context focused, use **progressive disclosure**: put essential information in `SKILL.md` and detailed reference material in separate files that Claude reads only when needed.\n\nThis approach lets you bundle comprehensive documentation, examples, and scripts without consuming context upfront. Claude loads additional files only when the task requires them.\n\n<Tip>Keep `SKILL.md` under 500 lines for optimal performance. If your content exceeds this, split detailed reference material into separate files.</Tip>\n\n#### Example: multi-file Skill structure\n\nClaude discovers supporting files through links in your `SKILL.md`. The following example shows a Skill with detailed documentation in separate files and utility scripts that Claude can execute without reading:\n\n```\nmy-skill/\n SKILL.md (required - overview and navigation)\n reference.md (detailed API docs - loaded when needed)\n examples.md (usage examples - loaded when needed)\n scripts/\n     helper.py (utility script - executed, not loaded)\n```\n\nThe `SKILL.md` file references these supporting files so Claude knows they exist:\n\n````markdown  theme={null}\n## Overview\n\n[Essential instructions here]\n\n## Additional resources\n\n- For complete API details, see [reference.md](reference.md)\n- For usage examples, see [examples.md](examples.md)\n\n## Utility scripts\n\nTo validate input files, run the helper script. It checks for required fields and returns any validation errors:\n```bash\npython scripts/helper.py input.txt\n```\n````\n\n<Tip>Keep references one level deep. Link directly from `SKILL.md` to reference files. Deeply nested references (file A links to file B which links to file C) may result in Claude partially reading files.</Tip>\n\n**Bundle utility scripts for zero-context execution.** Scripts in your Skill directory can be executed without loading their contents into context. Claude runs the script and only the output consumes tokens. This is useful for:\n\n* Complex validation logic that would be verbose to describe in prose\n* Data processing that's more reliable as tested code than generated code\n* Operations that benefit from consistency across uses\n\nIn `SKILL.md`, tell Claude to run the script rather than read it:\n\n```markdown  theme={null}\nRun the validation script to check the form:\npython scripts/validate_form.py input.pdf\n```\n\nFor complete guidance on structuring Skills, see the [best practices guide](https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices#progressive-disclosure-patterns).\n\n### Restrict tool access with allowed-tools\n\nUse the `allowed-tools` frontmatter field to limit which tools Claude can use when a Skill is active. You can specify tools as a comma-separated string or a YAML list:\n\n```yaml  theme={null}\n---\nname: reading-files-safely\ndescription: Read files without making changes. Use when you need read-only file access.\nallowed-tools: Read, Grep, Glob\n---\n```\n\nOr use YAML-style lists for better readability:\n\n```yaml  theme={null}\n---\nname: reading-files-safely\ndescription: Read files without making changes. Use when you need read-only file access.\nallowed-tools:\n  - Read\n  - Grep\n  - Glob\n---\n```\n\nWhen this Skill is active, Claude can only use the specified tools (Read, Grep, Glob) without needing to ask for permission. This is useful for:\n\n* Read-only Skills that shouldn't modify files\n* Skills with limited scope: for example, only data analysis, no file writing\n* Security-sensitive workflows where you want to restrict capabilities\n\nIf `allowed-tools` is omitted, the Skill doesn't restrict tools. Claude uses its standard permission model and may ask you to approve tool usage.\n\n<Note>\n  `allowed-tools` is only supported for Skills in Claude Code.\n</Note>\n\n### Run Skills in a forked context\n\nUse `context: fork` to run a Skill in an isolated sub-agent context with its own conversation history. This is useful for Skills that perform complex multi-step operations without cluttering the main conversation:\n\n```yaml  theme={null}\n---\nname: code-analysis\ndescription: Analyze code quality and generate detailed reports\ncontext: fork\n---\n```\n\n### Define hooks for Skills\n\nSkills can define hooks that run during the Skill's lifecycle. Use the `hooks` field to specify `PreToolUse`, `PostToolUse`, or `Stop` handlers:\n\n```yaml  theme={null}\n---\nname: secure-operations\ndescription: Perform operations with additional security checks\nhooks:\n  PreToolUse:\n    - matcher: \"Bash\"\n      hooks:\n        - type: command\n          command: \"./scripts/security-check.sh $TOOL_INPUT\"\n          once: true\n---\n```\n\nThe `once: true` option runs the hook only once per session. After the first successful execution, the hook is removed.\n\nHooks defined in a Skill are scoped to that Skill's execution and are automatically cleaned up when the Skill finishes.\n\nSee [Hooks](/en/hooks) for the complete hook configuration format.\n\n### Control Skill visibility\n\nSkills can be invoked in three ways:\n\n1. **Manual invocation**: You type `/skill-name` in the prompt\n2. **Programmatic invocation**: Claude calls it via the [`Skill` tool](/en/slash-commands#skill-tool)\n3. **Automatic discovery**: Claude reads the Skill's description and loads it when relevant to the conversation\n\nThe `user-invocable` field controls only manual invocation. When set to `false`, the Skill is hidden from the slash command menu but Claude can still invoke it programmatically or discover it automatically.\n\nTo block programmatic invocation via the `Skill` tool, use `disable-model-invocation: true` instead.\n\n#### When to use each setting\n\n| Setting                          | Slash menu | `Skill` tool | Auto-discovery | Use case                                                        |\n| :------------------------------- | :--------- | :----------- | :------------- | :-------------------------------------------------------------- |\n| `user-invocable: true` (default) | Visible    | Allowed      | Yes            | Skills you want users to invoke directly                        |\n| `user-invocable: false`          | Hidden     | Allowed      | Yes            | Skills that Claude can use but users shouldn't invoke manually  |\n| `disable-model-invocation: true` | Visible    | Blocked      | Yes            | Skills you want users to invoke but not Claude programmatically |\n\n#### Example: model-only Skill\n\nSet `user-invocable: false` to hide a Skill from the slash menu while still allowing Claude to invoke it programmatically:\n\n```yaml  theme={null}\n---\nname: internal-review-standards\ndescription: Apply internal code review standards when reviewing pull requests\nuser-invocable: false\n---\n```\n\nWith this setting, users won't see the Skill in the `/` menu, but Claude can still invoke it via the `Skill` tool or discover it automatically based on context.\n\n### Skills and subagents\n\nThere are two ways Skills and subagents can work together:\n\n#### Give a subagent access to Skills\n\n[Subagents](/en/sub-agents) do not automatically inherit Skills from the main conversation. To give a custom subagent access to specific Skills, list them in the subagent's `skills` field:\n\n```yaml  theme={null}\n# .claude/agents/code-reviewer.md\n---\nname: code-reviewer\ndescription: Review code for quality and best practices\nskills: pr-review, security-check\n---\n```\n\nThe full content of each listed Skill is injected into the subagent's context at startup, not just made available for invocation. If the `skills` field is omitted, no Skills are loaded for that subagent.\n\n<Note>\n  Built-in agents (Explore, Plan, general-purpose) do not have access to your Skills. Only custom subagents you define in `.claude/agents/` with an explicit `skills` field can use Skills.\n</Note>\n\n#### Run a Skill in a subagent context\n\nUse `context: fork` and `agent` to run a Skill in a forked subagent with its own separate context. See [Run Skills in a forked context](#run-skills-in-a-forked-context) for details.\n\n### Distribute Skills\n\nYou can share Skills in several ways:\n\n* **Project Skills**: Commit `.claude/skills/` to version control. Anyone who clones the repository gets the Skills.\n* **Plugins**: To share Skills across multiple repositories, create a `skills/` directory in your [plugin](/en/plugins) with Skill folders containing `SKILL.md` files. Distribute through a [plugin marketplace](/en/plugin-marketplaces).\n* **Managed**: Administrators can deploy Skills organization-wide through [managed settings](/en/iam#managed-settings). See [Where Skills live](#where-skills-live) for managed Skill paths.\n\n## Examples\n\nThese examples show common Skill patterns, from minimal single-file Skills to multi-file Skills with supporting documentation and scripts.\n\n### Simple Skill (single file)\n\nA minimal Skill needs only a `SKILL.md` file with frontmatter and instructions. This example helps Claude generate commit messages by examining staged changes:\n\n```\ncommit-helper/\n SKILL.md\n```\n\n```yaml  theme={null}\n---\nname: generating-commit-messages\ndescription: Generates clear commit messages from git diffs. Use when writing commit messages or reviewing staged changes.\n---\n\n# Generating Commit Messages\n\n## Instructions\n\n1. Run `git diff --staged` to see changes\n2. I'll suggest a commit message with:\n   - Summary under 50 characters\n   - Detailed description\n   - Affected components\n\n## Best practices\n\n- Use present tense\n- Explain what and why, not how\n```\n\n### Use multiple files\n\nFor complex Skills, use progressive disclosure to keep the main `SKILL.md` focused while providing detailed documentation in supporting files. This PDF processing Skill includes reference docs, utility scripts, and uses `allowed-tools` to restrict Claude to specific tools:\n\n```\npdf-processing/\n SKILL.md              # Overview and quick start\n FORMS.md              # Form field mappings and filling instructions\n REFERENCE.md          # API details for pypdf and pdfplumber\n scripts/\n     fill_form.py      # Utility to populate form fields\n     validate.py       # Checks PDFs for required fields\n```\n\n**`SKILL.md`**:\n\n````yaml  theme={null}\n---\nname: pdf-processing\ndescription: Extract text, fill forms, merge PDFs. Use when working with PDF files, forms, or document extraction. Requires pypdf and pdfplumber packages.\nallowed-tools: Read, Bash(python:*)\n---\n\n# PDF Processing\n\n## Quick start\n\nExtract text:\n```python\nimport pdfplumber\nwith pdfplumber.open(\"doc.pdf\") as pdf:\n    text = pdf.pages[0].extract_text()\n```\n\nFor form filling, see [FORMS.md](FORMS.md).\nFor detailed API reference, see [REFERENCE.md](REFERENCE.md).\n\n## Requirements\n\nPackages must be installed in your environment:\n```bash\npip install pypdf pdfplumber\n```\n````\n\n<Note>\n  If your Skill requires external packages, list them in the description. Packages must be installed in your environment before Claude can use them.\n</Note>\n\n## Troubleshooting\n\n### View and test Skills\n\nTo see which Skills Claude has access to, ask Claude a question like \"What Skills are available?\" Claude loads all available Skill names and descriptions into the context window when a conversation starts, so it can list the Skills it currently has access to.\n\nTo test a specific Skill, ask Claude to do a task that matches the Skill's description. For example, if your Skill has the description \"Reviews pull requests for code quality\", ask Claude to \"Review the changes in my current branch.\" Claude automatically uses the Skill when the request matches its description.\n\n### Skill not triggering\n\nThe description field is how Claude decides whether to use your Skill. Vague descriptions like \"Helps with documents\" don't give Claude enough information to match your Skill to relevant requests.\n\nA good description answers two questions:\n\n1. **What does this Skill do?** List the specific capabilities.\n2. **When should Claude use it?** Include trigger terms users would mention.\n\n```yaml  theme={null}\ndescription: Extract text and tables from PDF files, fill forms, merge documents. Use when working with PDF files or when the user mentions PDFs, forms, or document extraction.\n```\n\nThis description works because it names specific actions (extract, fill, merge) and includes keywords users would say (PDF, forms, document extraction).\n\n### Skill doesn't load\n\n**Check the file path.** Skills must be in the correct directory with the exact filename `SKILL.md` (case-sensitive):\n\n| Type       | Path                                                                    |\n| :--------- | :---------------------------------------------------------------------- |\n| Personal   | `~/.claude/skills/my-skill/SKILL.md`                                    |\n| Project    | `.claude/skills/my-skill/SKILL.md`                                      |\n| Enterprise | See [Where Skills live](#where-skills-live) for platform-specific paths |\n| Plugin     | `skills/my-skill/SKILL.md` inside the plugin directory                  |\n\n**Check the YAML syntax.** Invalid YAML in the frontmatter prevents the Skill from loading. The frontmatter must start with `---` on line 1 (no blank lines before it), end with `---` before the Markdown content, and use spaces for indentation (not tabs).\n\n**Run debug mode.** Use `claude --debug` to see Skill loading errors.\n\n### Skill has errors\n\n**Check dependencies are installed.** If your Skill uses external packages, they must be installed in your environment before Claude can use them.\n\n**Check script permissions.** Scripts need execute permissions: `chmod +x scripts/*.py`\n\n**Check file paths.** Use forward slashes (Unix style) in all paths. Use `scripts/helper.py`, not `scripts\\helper.py`.\n\n### Multiple Skills conflict\n\nIf Claude uses the wrong Skill or seems confused between similar Skills, the descriptions are probably too similar. Make each description distinct by using specific trigger terms.\n\nFor example, instead of two Skills with \"data analysis\" in both descriptions, differentiate them: one for \"sales data in Excel files and CRM exports\" and another for \"log files and system metrics\". The more specific your trigger terms, the easier it is for Claude to match the right Skill to your request.\n\n### Plugin Skills not appearing\n\n**Symptom**: You installed a plugin from a marketplace, but its Skills don't appear when you ask Claude \"What Skills are available?\"\n\n**Solution**: Clear the plugin cache and reinstall:\n\n```bash  theme={null}\nrm -rf ~/.claude/plugins/cache\n```\n\nThen restart Claude Code and reinstall the plugin:\n\n```shell  theme={null}\n/plugin install plugin-name@marketplace-name\n```\n\nThis forces Claude Code to re-download and re-register the plugin's Skills.\n\n**If Skills still don't appear**, verify the plugin's directory structure is correct. Skills must be in a `skills/` directory at the plugin root:\n\n```\nmy-plugin/\n .claude-plugin/\n    plugin.json\n skills/\n     my-skill/\n         SKILL.md\n```\n\n## Next steps\n\n<CardGroup cols={2}>\n  <Card title=\"Authoring best practices\" icon=\"lightbulb\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/best-practices\">\n    Write Skills that Claude can use effectively\n  </Card>\n\n  <Card title=\"Agent Skills overview\" icon=\"book\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/overview\">\n    Learn how Skills work across Claude products\n  </Card>\n\n  <Card title=\"Use Skills in the Agent SDK\" icon=\"cube\" href=\"https://docs.claude.com/en/docs/agent-sdk/skills\">\n    Use Skills programmatically with TypeScript and Python\n  </Card>\n\n  <Card title=\"Get started with Agent Skills\" icon=\"rocket\" href=\"https://docs.claude.com/en/docs/agents-and-tools/agent-skills/quickstart\">\n    Create your first Skill\n  </Card>\n</CardGroup>\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":183,"url":"https://code.claude.com/docs/en/skills.md"},"sourceToolAssistantUUID":"cb37726e-5c52-4692-83cb-a780a3c7f4c5"}
{"parentUuid":"fae49279-1091-421c-aef4-9b90c2e925a4","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018YAeZgXoGMAjbDXZBxXKDX","type":"message","role":"assistant","content":[{"type":"text","text":"Now let me fetch the IDE integrations and slash commands documentation:"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":15542,"cache_creation_input_tokens":21162,"cache_read_input_tokens":12802,"cache_creation":{"ephemeral_5m_input_tokens":21162,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5tvJmuXmspUvEfULE","type":"assistant","uuid":"2d720e2c-83ad-4085-b2f5-62d420b2ae43","timestamp":"2026-01-18T08:08:53.176Z"}
{"parentUuid":"2d720e2c-83ad-4085-b2f5-62d420b2ae43","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018YAeZgXoGMAjbDXZBxXKDX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01BJXgppB7J66P4wzztxcDQY","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/slash-commands.md","prompt":"Provide complete information about custom slash commands, how to create them, and best practices"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":15542,"cache_creation_input_tokens":21162,"cache_read_input_tokens":12802,"cache_creation":{"ephemeral_5m_input_tokens":21162,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5tvJmuXmspUvEfULE","type":"assistant","uuid":"376d8241-d7a6-4bad-a8a3-3aaf287b4be7","timestamp":"2026-01-18T08:08:53.793Z"}
{"parentUuid":"376d8241-d7a6-4bad-a8a3-3aaf287b4be7","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018YAeZgXoGMAjbDXZBxXKDX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01MpSfo76N1FQrUXFJQUM63v","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/vs-code.md","prompt":"Provide information about VS Code integration and IDE customization options"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":15542,"cache_creation_input_tokens":21162,"cache_read_input_tokens":12802,"cache_creation":{"ephemeral_5m_input_tokens":21162,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5tvJmuXmspUvEfULE","type":"assistant","uuid":"d7815f3d-2b27-49cb-80c7-5171cdf1a92b","timestamp":"2026-01-18T08:08:54.104Z"}
{"parentUuid":"d7815f3d-2b27-49cb-80c7-5171cdf1a92b","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_018YAeZgXoGMAjbDXZBxXKDX","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_01NGSDncXNFb1cRjGD1YCjWr","name":"WebFetch","input":{"url":"https://code.claude.com/docs/en/plugins.md","prompt":"Provide comprehensive information about plugins, how to create them, and how to bundle extensions"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":15542,"cache_creation_input_tokens":21162,"cache_read_input_tokens":12802,"cache_creation":{"ephemeral_5m_input_tokens":21162,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW5tvJmuXmspUvEfULE","type":"assistant","uuid":"cec265c6-45ff-4b49-8ef8-25e80c5c5b0b","timestamp":"2026-01-18T08:08:54.455Z"}
{"parentUuid":"376d8241-d7a6-4bad-a8a3-3aaf287b4be7","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01BJXgppB7J66P4wzztxcDQY","type":"tool_result","content":"# Slash commands\n\n> Control Claude's behavior during an interactive session with slash commands.\n\n## Built-in slash commands\n\n| Command                   | Purpose                                                                                                                                      |\n| :------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------- |\n| `/add-dir`                | Add additional working directories                                                                                                           |\n| `/agents`                 | Manage custom AI subagents for specialized tasks                                                                                             |\n| `/bashes`                 | List and manage background tasks                                                                                                             |\n| `/bug`                    | Report bugs (sends conversation to Anthropic)                                                                                                |\n| `/clear`                  | Clear conversation history                                                                                                                   |\n| `/compact [instructions]` | Compact conversation with optional focus instructions                                                                                        |\n| `/config`                 | Open the Settings interface (Config tab). Type to search and filter settings                                                                 |\n| `/context`                | Visualize current context usage as a colored grid                                                                                            |\n| `/cost`                   | Show token usage statistics. See [cost tracking guide](/en/costs#using-the-cost-command) for subscription-specific details.                  |\n| `/doctor`                 | Checks installation health. Shows Updates section with auto-update channel and available npm versions                                        |\n| `/exit`                   | Exit the REPL                                                                                                                                |\n| `/export [filename]`      | Export the current conversation to a file or clipboard                                                                                       |\n| `/help`                   | Get usage help                                                                                                                               |\n| `/hooks`                  | Manage hook configurations for tool events                                                                                                   |\n| `/ide`                    | Manage IDE integrations and show status                                                                                                      |\n| `/init`                   | Initialize project with `CLAUDE.md` guide                                                                                                    |\n| `/install-github-app`     | Set up Claude GitHub Actions for a repository                                                                                                |\n| `/login`                  | Switch Anthropic accounts                                                                                                                    |\n| `/logout`                 | Sign out from your Anthropic account                                                                                                         |\n| `/mcp`                    | Manage MCP server connections and OAuth authentication                                                                                       |\n| `/memory`                 | Edit `CLAUDE.md` memory files                                                                                                                |\n| `/model`                  | Select or change the AI model                                                                                                                |\n| `/output-style [style]`   | Set the output style directly or from a selection menu                                                                                       |\n| `/permissions`            | View or update [permissions](/en/iam#configuring-permissions)                                                                                |\n| `/plan`                   | Enter plan mode directly from the prompt                                                                                                     |\n| `/plugin`                 | Manage Claude Code plugins                                                                                                                   |\n| `/pr-comments`            | View pull request comments                                                                                                                   |\n| `/privacy-settings`       | View and update your privacy settings                                                                                                        |\n| `/release-notes`          | View release notes                                                                                                                           |\n| `/rename <name>`          | Rename the current session for easier identification                                                                                         |\n| `/remote-env`             | Configure remote session environment (claude.ai subscribers)                                                                                 |\n| `/resume [session]`       | Resume a conversation by ID or name, or open the session picker                                                                              |\n| `/review`                 | Request code review                                                                                                                          |\n| `/rewind`                 | Rewind the conversation and/or code                                                                                                          |\n| `/sandbox`                | Enable sandboxed bash tool with filesystem and network isolation for safer, more autonomous execution                                        |\n| `/security-review`        | Complete a security review of pending changes on the current branch                                                                          |\n| `/stats`                  | Visualize daily usage, session history, streaks, and model preferences. Press `r` to cycle date ranges (Last 7 days, Last 30 days, All time) |\n| `/status`                 | Open the Settings interface (Status tab) showing version, model, account, and connectivity                                                   |\n| `/statusline`             | Set up Claude Code's status line UI                                                                                                          |\n| `/teleport`               | Resume a remote session from claude.ai by session ID, or open a picker (claude.ai subscribers)                                               |\n| `/terminal-setup`         | Install Shift+Enter key binding for newlines (VS Code, Alacritty, Zed, Warp)                                                                 |\n| `/theme`                  | Change the color theme                                                                                                                       |\n| `/todos`                  | List current TODO items                                                                                                                      |\n| `/usage`                  | For subscription plans only: show plan usage limits and rate limit status                                                                    |\n| `/vim`                    | Enter vim mode for alternating insert and command modes                                                                                      |\n\n## Custom slash commands\n\nCustom slash commands allow you to define frequently used prompts as Markdown files that Claude Code can execute. Commands are organized by scope (project-specific or personal) and support namespacing through directory structures.\n\n<Tip>\n  Slash command autocomplete works anywhere in your input, not just at the beginning. Type `/` at any position to see available commands.\n</Tip>\n\n### Syntax\n\n```\n/<command-name> [arguments]\n```\n\n#### Parameters\n\n| Parameter        | Description                                                       |\n| :--------------- | :---------------------------------------------------------------- |\n| `<command-name>` | Name derived from the Markdown filename (without `.md` extension) |\n| `[arguments]`    | Optional arguments passed to the command                          |\n\n### Command types\n\n#### Project commands\n\nCommands stored in your repository and shared with your team. When listed in `/help`, these commands show \"(project)\" after their description.\n\n**Location**: `.claude/commands/`\n\nThe following example creates the `/optimize` command:\n\n```bash  theme={null}\n# Create a project command\nmkdir -p .claude/commands\necho \"Analyze this code for performance issues and suggest optimizations:\" > .claude/commands/optimize.md\n```\n\n#### Personal commands\n\nCommands available across all your projects. When listed in `/help`, these commands show \"(user)\" after their description.\n\n**Location**: `~/.claude/commands/`\n\nThe following example creates the `/security-review` command:\n\n```bash  theme={null}\n# Create a personal command\nmkdir -p ~/.claude/commands\necho \"Review this code for security vulnerabilities:\" > ~/.claude/commands/security-review.md\n```\n\n### Features\n\n#### Namespacing\n\nUse subdirectories to group related commands. Subdirectories appear in the command description but don't affect the command name.\n\nFor example:\n\n* `.claude/commands/frontend/component.md` creates `/component` with description \"(project:frontend)\"\n* `~/.claude/commands/component.md` creates `/component` with description \"(user)\"\n\nIf a project command and user command share the same name, the project command takes precedence and the user command is silently ignored. For example, if both `.claude/commands/deploy.md` and `~/.claude/commands/deploy.md` exist, `/deploy` runs the project version.\n\nCommands in different subdirectories can share names since the subdirectory appears in the description to distinguish them. For example, `.claude/commands/frontend/test.md` and `.claude/commands/backend/test.md` both create `/test`, but show as \"(project:frontend)\" and \"(project:backend)\" respectively.\n\n#### Arguments\n\nPass dynamic values to commands using argument placeholders:\n\n##### All arguments with `$ARGUMENTS`\n\nThe `$ARGUMENTS` placeholder captures all arguments passed to the command:\n\n```bash  theme={null}\n# Command definition\necho 'Fix issue #$ARGUMENTS following our coding standards' > .claude/commands/fix-issue.md\n\n# Usage\n> /fix-issue 123 high-priority\n# $ARGUMENTS becomes: \"123 high-priority\"\n```\n\n##### Individual arguments with `$1`, `$2`, etc.\n\nAccess specific arguments individually using positional parameters (similar to shell scripts):\n\n```bash  theme={null}\n# Command definition  \necho 'Review PR #$1 with priority $2 and assign to $3' > .claude/commands/review-pr.md\n\n# Usage\n> /review-pr 456 high alice\n# $1 becomes \"456\", $2 becomes \"high\", $3 becomes \"alice\"\n```\n\nUse positional arguments when you need to:\n\n* Access arguments individually in different parts of your command\n* Provide defaults for missing arguments\n* Build more structured commands with specific parameter roles\n\n#### Bash command execution\n\nExecute bash commands before the slash command runs using the `!` prefix. The output is included in the command context. You *must* include `allowed-tools` with the `Bash` tool, but you can choose the specific bash commands to allow.\n\nFor example:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\ndescription: Create a git commit\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n- Recent commits: !`git log --oneline -10`\n\n## Your task\n\nBased on the above changes, create a single git commit.\n```\n\n#### File references\n\nInclude file contents in commands using the `@` prefix to [reference files](/en/common-workflows#reference-files-and-directories).\n\nFor example:\n\n```markdown  theme={null}\n# Reference a specific file\n\nReview the implementation in @src/utils/helpers.js\n\n# Reference multiple files\n\nCompare @src/old-version.js with @src/new-version.js\n```\n\n#### Thinking mode\n\nSlash commands can trigger extended thinking by including [extended thinking keywords](/en/common-workflows#use-extended-thinking).\n\n### Frontmatter\n\nCommand files support frontmatter, useful for specifying metadata about the command:\n\n| Frontmatter                | Purpose                                                                                                                                                                               | Default                             |\n| :------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------- |\n| `allowed-tools`            | List of tools the command can use                                                                                                                                                     | Inherits from the conversation      |\n| `argument-hint`            | The arguments expected for the slash command. Example: `argument-hint: add [tagId] \\| remove [tagId] \\| list`. This hint is shown to the user when auto-completing the slash command. | None                                |\n| `context`                  | Set to `fork` to run the command in a forked sub-agent context with its own conversation history.                                                                                     | Inline (no fork)                    |\n| `agent`                    | Specify which [agent type](/en/sub-agents#built-in-subagents) to use when `context: fork` is set. Only applicable when combined with `context: fork`.                                 | `general-purpose`                   |\n| `description`              | Brief description of the command                                                                                                                                                      | Uses the first line from the prompt |\n| `model`                    | Specific model string (see [Models overview](https://docs.claude.com/en/docs/about-claude/models/overview))                                                                           | Inherits from the conversation      |\n| `disable-model-invocation` | Whether to prevent the `Skill` tool from calling this command                                                                                                                         | false                               |\n| `hooks`                    | Define hooks scoped to this command's execution. See [Define hooks for commands](#define-hooks-for-commands).                                                                         | None                                |\n\nFor example:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\nargument-hint: [message]\ndescription: Create a git commit\nmodel: claude-3-5-haiku-20241022\n---\n\nCreate a git commit with message: $ARGUMENTS\n```\n\nExample using positional arguments:\n\n```markdown  theme={null}\n---\nargument-hint: [pr-number] [priority] [assignee]\ndescription: Review pull request\n---\n\nReview PR #$1 with priority $2 and assign to $3.\nFocus on security, performance, and code style.\n```\n\n#### Define hooks for commands\n\nSlash commands can define hooks that run during the command's execution. Use the `hooks` field to specify `PreToolUse`, `PostToolUse`, or `Stop` handlers:\n\n```markdown  theme={null}\n---\ndescription: Deploy to staging with validation\nhooks:\n  PreToolUse:\n    - matcher: \"Bash\"\n      hooks:\n        - type: command\n          command: \"./scripts/validate-deploy.sh\"\n          once: true\n---\n\nDeploy the current branch to staging environment.\n```\n\nThe `once: true` option runs the hook only once per session. After the first successful execution, the hook is removed.\n\nHooks defined in a command are scoped to that command's execution and are automatically cleaned up when the command finishes.\n\nSee [Hooks](/en/hooks) for the complete hook configuration format.\n\n## Plugin commands\n\n[Plugins](/en/plugins) can provide custom slash commands that integrate seamlessly with Claude Code. Plugin commands work exactly like user-defined commands but are distributed through [plugin marketplaces](/en/plugin-marketplaces).\n\n### How plugin commands work\n\nPlugin commands are:\n\n* **Namespaced**: Commands can use the format `/plugin-name:command-name` to avoid conflicts (plugin prefix is optional unless there are name collisions)\n* **Automatically available**: Once a plugin is installed and enabled, its commands appear in `/help`\n* **Fully integrated**: Support all command features (arguments, frontmatter, bash execution, file references)\n\n### Plugin command structure\n\n**Location**: `commands/` directory in plugin root\n\n**File format**: Markdown files with frontmatter\n\n**Basic command structure**:\n\n```markdown  theme={null}\n---\ndescription: Brief description of what the command does\n---\n\n# Command Name\n\nDetailed instructions for Claude on how to execute this command.\nInclude specific guidance on parameters, expected outcomes, and any special considerations.\n```\n\n**Advanced command features**:\n\n* **Arguments**: Use placeholders like `{arg1}` in command descriptions\n* **Subdirectories**: Organize commands in subdirectories for namespacing\n* **Bash integration**: Commands can execute shell scripts and programs\n* **File references**: Commands can reference and modify project files\n\n### Invocation patterns\n\n```shell Direct command (when no conflicts) theme={null}\n/command-name\n```\n\n```shell Plugin-prefixed (when needed for disambiguation) theme={null}\n/plugin-name:command-name\n```\n\n```shell With arguments (if command supports them) theme={null}\n/command-name arg1 arg2\n```\n\n## MCP slash commands\n\nMCP servers can expose prompts as slash commands that become available in Claude Code. These commands are dynamically discovered from connected MCP servers.\n\n### Command format\n\nMCP commands follow the pattern:\n\n```\n/mcp__<server-name>__<prompt-name> [arguments]\n```\n\n### Features\n\n#### Dynamic discovery\n\nMCP commands are automatically available when:\n\n* An MCP server is connected and active\n* The server exposes prompts through the MCP protocol\n* The prompts are successfully retrieved during connection\n\n#### Arguments\n\nMCP prompts can accept arguments defined by the server:\n\n```\n# Without arguments\n> /mcp__github__list_prs\n\n# With arguments\n> /mcp__github__pr_review 456\n> /mcp__jira__create_issue \"Bug title\" high\n```\n\n#### Naming conventions\n\nServer and prompt names are normalized:\n\n* Spaces and special characters become underscores\n* Names are lowercase for consistency\n\n### Managing MCP connections\n\nUse the `/mcp` command to:\n\n* View all configured MCP servers\n* Check connection status\n* Authenticate with OAuth-enabled servers\n* Clear authentication tokens\n* View available tools and prompts from each server\n\n### MCP permissions and wildcards\n\nTo approve all tools from an MCP server, use either the server name alone or wildcard syntax:\n\n* `mcp__github` (approves all GitHub tools)\n* `mcp__github__*` (wildcard syntax, also approves all GitHub tools)\n\nTo approve specific tools, list each one explicitly:\n\n* `mcp__github__get_issue`\n* `mcp__github__list_issues`\n\nSee [MCP permission rules](/en/iam#tool-specific-permission-rules) for more details.\n\n## `Skill` tool\n\n<Note>\n  In earlier versions of Claude Code, slash command invocation was provided by a separate `SlashCommand` tool. This has been merged into the `Skill` tool.\n</Note>\n\nThe `Skill` tool allows Claude to programmatically invoke both [custom slash commands](/en/slash-commands#custom-slash-commands) and [Agent Skills](/en/skills) during a conversation. This gives Claude the ability to use these capabilities on your behalf when appropriate.\n\n### What the `Skill` tool can invoke\n\nThe `Skill` tool provides access to:\n\n| Type                  | Location                                     | Requirements                                   |\n| :-------------------- | :------------------------------------------- | :--------------------------------------------- |\n| Custom slash commands | `.claude/commands/` or `~/.claude/commands/` | Must have `description` frontmatter            |\n| Agent Skills          | `.claude/skills/` or `~/.claude/skills/`     | Must not have `disable-model-invocation: true` |\n\nBuilt-in commands like `/compact` and `/init` are *not* available through this tool.\n\n### Encourage Claude to use specific commands\n\nTo encourage Claude to use the `Skill` tool, reference the command by name, including the slash, in your prompts or `CLAUDE.md` file:\n\n```\n> Run /write-unit-test when you are about to start writing tests.\n```\n\nThis tool puts each available command's metadata into context up to the character budget limit. Use `/context` to monitor token usage.\n\nTo see which commands and Skills are available to the `Skill` tool, run `claude --debug` and trigger a query.\n\n### Disable the `Skill` tool\n\nTo prevent Claude from programmatically invoking any commands or Skills:\n\n```bash  theme={null}\n/permissions\n# Add to deny rules: Skill\n```\n\nThis removes the `Skill` tool and all command/Skill descriptions from context.\n\n### Disable specific commands or Skills\n\nTo prevent a specific command or Skill from being invoked programmatically via the `Skill` tool, add `disable-model-invocation: true` to its frontmatter. This also removes the item's metadata from context.\n\n<Note>\n  The `user-invocable` field in Skills only controls menu visibility, not `Skill` tool access. Use `disable-model-invocation: true` to block programmatic invocation. See [Control Skill visibility](/en/skills#control-skill-visibility) for details.\n</Note>\n\n### `Skill` permission rules\n\nThe permission rules support:\n\n* **Exact match**: `Skill(commit)` (allows only `commit` with no arguments)\n* **Prefix match**: `Skill(review-pr:*)` (allows `review-pr` with any arguments)\n\n### Character budget limit\n\nThe `Skill` tool includes a character budget to limit context usage. This prevents token overflow when many commands and Skills are available.\n\nThe budget includes each item's name, arguments, and description.\n\n* **Default limit**: 15,000 characters\n* **Custom limit**: Set via `SLASH_COMMAND_TOOL_CHAR_BUDGET` environment variable. The name is retained for backwards compatibility.\n\nWhen the budget is exceeded, Claude sees only a subset of available items. In `/context`, a warning shows how many are included.\n\n## Skills vs slash commands\n\n**Slash commands** and **Agent Skills** serve different purposes in Claude Code:\n\n### Use slash commands for\n\n**Quick, frequently used prompts**:\n\n* Simple prompt snippets you use often\n* Quick reminders or templates\n* Frequently used instructions that fit in one file\n\n**Examples**:\n\n* `/review`  \"Review this code for bugs and suggest improvements\"\n* `/explain`  \"Explain this code in simple terms\"\n* `/optimize`  \"Analyze this code for performance issues\"\n\n### Use Skills for\n\n**Comprehensive capabilities with structure**:\n\n* Complex workflows with multiple steps\n* Capabilities requiring scripts or utilities\n* Knowledge organized across multiple files\n* Team workflows you want to standardize\n\n**Examples**:\n\n* PDF processing Skill with form-filling scripts and validation\n* Data analysis Skill with reference docs for different data types\n* Documentation Skill with style guides and templates\n\n### Key differences\n\n| Aspect         | Slash Commands                   | Agent Skills                        |\n| -------------- | -------------------------------- | ----------------------------------- |\n| **Complexity** | Simple prompts                   | Complex capabilities                |\n| **Structure**  | Single .md file                  | Directory with SKILL.md + resources |\n| **Discovery**  | Explicit invocation (`/command`) | Automatic (based on context)        |\n| **Files**      | One file only                    | Multiple files, scripts, templates  |\n| **Scope**      | Project or personal              | Project or personal                 |\n| **Sharing**    | Via git                          | Via git                             |\n\n### Example comparison\n\n**As a slash command**:\n\n```markdown  theme={null}\n# .claude/commands/review.md\nReview this code for:\n- Security vulnerabilities\n- Performance issues\n- Code style violations\n```\n\nUsage: `/review` (manual invocation)\n\n**As a Skill**:\n\n```\n.claude/skills/code-review/\n SKILL.md (overview and workflows)\n SECURITY.md (security checklist)\n PERFORMANCE.md (performance patterns)\n STYLE.md (style guide reference)\n scripts/\n     run-linters.sh\n```\n\nUsage: \"Can you review this code?\" (automatic discovery)\n\nThe Skill provides richer context, validation scripts, and organized reference material.\n\n### When to use each\n\n**Use slash commands**:\n\n* You invoke the same prompt repeatedly\n* The prompt fits in a single file\n* You want explicit control over when it runs\n\n**Use Skills**:\n\n* Claude should discover the capability automatically\n* Multiple files or scripts are needed\n* Complex workflows with validation steps\n* Team needs standardized, detailed guidance\n\nBoth slash commands and Skills can coexist. Use the approach that fits your needs.\n\nLearn more about [Agent Skills](/en/skills).\n\n## See also\n\n* [Plugins](/en/plugins) - Extend Claude Code with custom commands through plugins\n* [Identity and Access Management](/en/iam) - Complete guide to permissions, including MCP tool permissions\n* [Interactive mode](/en/interactive-mode) - Shortcuts, input modes, and interactive features\n* [CLI reference](/en/cli-reference) - Command-line flags and options\n* [Settings](/en/settings) - Configuration options\n* [Memory management](/en/memory) - Managing Claude's memory across sessions\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"8a5d1932-6183-4f95-a446-9db4693a73a2","timestamp":"2026-01-18T08:08:54.620Z","toolUseResult":{"bytes":27021,"code":200,"codeText":"OK","result":"# Slash commands\n\n> Control Claude's behavior during an interactive session with slash commands.\n\n## Built-in slash commands\n\n| Command                   | Purpose                                                                                                                                      |\n| :------------------------ | :------------------------------------------------------------------------------------------------------------------------------------------- |\n| `/add-dir`                | Add additional working directories                                                                                                           |\n| `/agents`                 | Manage custom AI subagents for specialized tasks                                                                                             |\n| `/bashes`                 | List and manage background tasks                                                                                                             |\n| `/bug`                    | Report bugs (sends conversation to Anthropic)                                                                                                |\n| `/clear`                  | Clear conversation history                                                                                                                   |\n| `/compact [instructions]` | Compact conversation with optional focus instructions                                                                                        |\n| `/config`                 | Open the Settings interface (Config tab). Type to search and filter settings                                                                 |\n| `/context`                | Visualize current context usage as a colored grid                                                                                            |\n| `/cost`                   | Show token usage statistics. See [cost tracking guide](/en/costs#using-the-cost-command) for subscription-specific details.                  |\n| `/doctor`                 | Checks installation health. Shows Updates section with auto-update channel and available npm versions                                        |\n| `/exit`                   | Exit the REPL                                                                                                                                |\n| `/export [filename]`      | Export the current conversation to a file or clipboard                                                                                       |\n| `/help`                   | Get usage help                                                                                                                               |\n| `/hooks`                  | Manage hook configurations for tool events                                                                                                   |\n| `/ide`                    | Manage IDE integrations and show status                                                                                                      |\n| `/init`                   | Initialize project with `CLAUDE.md` guide                                                                                                    |\n| `/install-github-app`     | Set up Claude GitHub Actions for a repository                                                                                                |\n| `/login`                  | Switch Anthropic accounts                                                                                                                    |\n| `/logout`                 | Sign out from your Anthropic account                                                                                                         |\n| `/mcp`                    | Manage MCP server connections and OAuth authentication                                                                                       |\n| `/memory`                 | Edit `CLAUDE.md` memory files                                                                                                                |\n| `/model`                  | Select or change the AI model                                                                                                                |\n| `/output-style [style]`   | Set the output style directly or from a selection menu                                                                                       |\n| `/permissions`            | View or update [permissions](/en/iam#configuring-permissions)                                                                                |\n| `/plan`                   | Enter plan mode directly from the prompt                                                                                                     |\n| `/plugin`                 | Manage Claude Code plugins                                                                                                                   |\n| `/pr-comments`            | View pull request comments                                                                                                                   |\n| `/privacy-settings`       | View and update your privacy settings                                                                                                        |\n| `/release-notes`          | View release notes                                                                                                                           |\n| `/rename <name>`          | Rename the current session for easier identification                                                                                         |\n| `/remote-env`             | Configure remote session environment (claude.ai subscribers)                                                                                 |\n| `/resume [session]`       | Resume a conversation by ID or name, or open the session picker                                                                              |\n| `/review`                 | Request code review                                                                                                                          |\n| `/rewind`                 | Rewind the conversation and/or code                                                                                                          |\n| `/sandbox`                | Enable sandboxed bash tool with filesystem and network isolation for safer, more autonomous execution                                        |\n| `/security-review`        | Complete a security review of pending changes on the current branch                                                                          |\n| `/stats`                  | Visualize daily usage, session history, streaks, and model preferences. Press `r` to cycle date ranges (Last 7 days, Last 30 days, All time) |\n| `/status`                 | Open the Settings interface (Status tab) showing version, model, account, and connectivity                                                   |\n| `/statusline`             | Set up Claude Code's status line UI                                                                                                          |\n| `/teleport`               | Resume a remote session from claude.ai by session ID, or open a picker (claude.ai subscribers)                                               |\n| `/terminal-setup`         | Install Shift+Enter key binding for newlines (VS Code, Alacritty, Zed, Warp)                                                                 |\n| `/theme`                  | Change the color theme                                                                                                                       |\n| `/todos`                  | List current TODO items                                                                                                                      |\n| `/usage`                  | For subscription plans only: show plan usage limits and rate limit status                                                                    |\n| `/vim`                    | Enter vim mode for alternating insert and command modes                                                                                      |\n\n## Custom slash commands\n\nCustom slash commands allow you to define frequently used prompts as Markdown files that Claude Code can execute. Commands are organized by scope (project-specific or personal) and support namespacing through directory structures.\n\n<Tip>\n  Slash command autocomplete works anywhere in your input, not just at the beginning. Type `/` at any position to see available commands.\n</Tip>\n\n### Syntax\n\n```\n/<command-name> [arguments]\n```\n\n#### Parameters\n\n| Parameter        | Description                                                       |\n| :--------------- | :---------------------------------------------------------------- |\n| `<command-name>` | Name derived from the Markdown filename (without `.md` extension) |\n| `[arguments]`    | Optional arguments passed to the command                          |\n\n### Command types\n\n#### Project commands\n\nCommands stored in your repository and shared with your team. When listed in `/help`, these commands show \"(project)\" after their description.\n\n**Location**: `.claude/commands/`\n\nThe following example creates the `/optimize` command:\n\n```bash  theme={null}\n# Create a project command\nmkdir -p .claude/commands\necho \"Analyze this code for performance issues and suggest optimizations:\" > .claude/commands/optimize.md\n```\n\n#### Personal commands\n\nCommands available across all your projects. When listed in `/help`, these commands show \"(user)\" after their description.\n\n**Location**: `~/.claude/commands/`\n\nThe following example creates the `/security-review` command:\n\n```bash  theme={null}\n# Create a personal command\nmkdir -p ~/.claude/commands\necho \"Review this code for security vulnerabilities:\" > ~/.claude/commands/security-review.md\n```\n\n### Features\n\n#### Namespacing\n\nUse subdirectories to group related commands. Subdirectories appear in the command description but don't affect the command name.\n\nFor example:\n\n* `.claude/commands/frontend/component.md` creates `/component` with description \"(project:frontend)\"\n* `~/.claude/commands/component.md` creates `/component` with description \"(user)\"\n\nIf a project command and user command share the same name, the project command takes precedence and the user command is silently ignored. For example, if both `.claude/commands/deploy.md` and `~/.claude/commands/deploy.md` exist, `/deploy` runs the project version.\n\nCommands in different subdirectories can share names since the subdirectory appears in the description to distinguish them. For example, `.claude/commands/frontend/test.md` and `.claude/commands/backend/test.md` both create `/test`, but show as \"(project:frontend)\" and \"(project:backend)\" respectively.\n\n#### Arguments\n\nPass dynamic values to commands using argument placeholders:\n\n##### All arguments with `$ARGUMENTS`\n\nThe `$ARGUMENTS` placeholder captures all arguments passed to the command:\n\n```bash  theme={null}\n# Command definition\necho 'Fix issue #$ARGUMENTS following our coding standards' > .claude/commands/fix-issue.md\n\n# Usage\n> /fix-issue 123 high-priority\n# $ARGUMENTS becomes: \"123 high-priority\"\n```\n\n##### Individual arguments with `$1`, `$2`, etc.\n\nAccess specific arguments individually using positional parameters (similar to shell scripts):\n\n```bash  theme={null}\n# Command definition  \necho 'Review PR #$1 with priority $2 and assign to $3' > .claude/commands/review-pr.md\n\n# Usage\n> /review-pr 456 high alice\n# $1 becomes \"456\", $2 becomes \"high\", $3 becomes \"alice\"\n```\n\nUse positional arguments when you need to:\n\n* Access arguments individually in different parts of your command\n* Provide defaults for missing arguments\n* Build more structured commands with specific parameter roles\n\n#### Bash command execution\n\nExecute bash commands before the slash command runs using the `!` prefix. The output is included in the command context. You *must* include `allowed-tools` with the `Bash` tool, but you can choose the specific bash commands to allow.\n\nFor example:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\ndescription: Create a git commit\n---\n\n## Context\n\n- Current git status: !`git status`\n- Current git diff (staged and unstaged changes): !`git diff HEAD`\n- Current branch: !`git branch --show-current`\n- Recent commits: !`git log --oneline -10`\n\n## Your task\n\nBased on the above changes, create a single git commit.\n```\n\n#### File references\n\nInclude file contents in commands using the `@` prefix to [reference files](/en/common-workflows#reference-files-and-directories).\n\nFor example:\n\n```markdown  theme={null}\n# Reference a specific file\n\nReview the implementation in @src/utils/helpers.js\n\n# Reference multiple files\n\nCompare @src/old-version.js with @src/new-version.js\n```\n\n#### Thinking mode\n\nSlash commands can trigger extended thinking by including [extended thinking keywords](/en/common-workflows#use-extended-thinking).\n\n### Frontmatter\n\nCommand files support frontmatter, useful for specifying metadata about the command:\n\n| Frontmatter                | Purpose                                                                                                                                                                               | Default                             |\n| :------------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | :---------------------------------- |\n| `allowed-tools`            | List of tools the command can use                                                                                                                                                     | Inherits from the conversation      |\n| `argument-hint`            | The arguments expected for the slash command. Example: `argument-hint: add [tagId] \\| remove [tagId] \\| list`. This hint is shown to the user when auto-completing the slash command. | None                                |\n| `context`                  | Set to `fork` to run the command in a forked sub-agent context with its own conversation history.                                                                                     | Inline (no fork)                    |\n| `agent`                    | Specify which [agent type](/en/sub-agents#built-in-subagents) to use when `context: fork` is set. Only applicable when combined with `context: fork`.                                 | `general-purpose`                   |\n| `description`              | Brief description of the command                                                                                                                                                      | Uses the first line from the prompt |\n| `model`                    | Specific model string (see [Models overview](https://docs.claude.com/en/docs/about-claude/models/overview))                                                                           | Inherits from the conversation      |\n| `disable-model-invocation` | Whether to prevent the `Skill` tool from calling this command                                                                                                                         | false                               |\n| `hooks`                    | Define hooks scoped to this command's execution. See [Define hooks for commands](#define-hooks-for-commands).                                                                         | None                                |\n\nFor example:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\nargument-hint: [message]\ndescription: Create a git commit\nmodel: claude-3-5-haiku-20241022\n---\n\nCreate a git commit with message: $ARGUMENTS\n```\n\nExample using positional arguments:\n\n```markdown  theme={null}\n---\nargument-hint: [pr-number] [priority] [assignee]\ndescription: Review pull request\n---\n\nReview PR #$1 with priority $2 and assign to $3.\nFocus on security, performance, and code style.\n```\n\n#### Define hooks for commands\n\nSlash commands can define hooks that run during the command's execution. Use the `hooks` field to specify `PreToolUse`, `PostToolUse`, or `Stop` handlers:\n\n```markdown  theme={null}\n---\ndescription: Deploy to staging with validation\nhooks:\n  PreToolUse:\n    - matcher: \"Bash\"\n      hooks:\n        - type: command\n          command: \"./scripts/validate-deploy.sh\"\n          once: true\n---\n\nDeploy the current branch to staging environment.\n```\n\nThe `once: true` option runs the hook only once per session. After the first successful execution, the hook is removed.\n\nHooks defined in a command are scoped to that command's execution and are automatically cleaned up when the command finishes.\n\nSee [Hooks](/en/hooks) for the complete hook configuration format.\n\n## Plugin commands\n\n[Plugins](/en/plugins) can provide custom slash commands that integrate seamlessly with Claude Code. Plugin commands work exactly like user-defined commands but are distributed through [plugin marketplaces](/en/plugin-marketplaces).\n\n### How plugin commands work\n\nPlugin commands are:\n\n* **Namespaced**: Commands can use the format `/plugin-name:command-name` to avoid conflicts (plugin prefix is optional unless there are name collisions)\n* **Automatically available**: Once a plugin is installed and enabled, its commands appear in `/help`\n* **Fully integrated**: Support all command features (arguments, frontmatter, bash execution, file references)\n\n### Plugin command structure\n\n**Location**: `commands/` directory in plugin root\n\n**File format**: Markdown files with frontmatter\n\n**Basic command structure**:\n\n```markdown  theme={null}\n---\ndescription: Brief description of what the command does\n---\n\n# Command Name\n\nDetailed instructions for Claude on how to execute this command.\nInclude specific guidance on parameters, expected outcomes, and any special considerations.\n```\n\n**Advanced command features**:\n\n* **Arguments**: Use placeholders like `{arg1}` in command descriptions\n* **Subdirectories**: Organize commands in subdirectories for namespacing\n* **Bash integration**: Commands can execute shell scripts and programs\n* **File references**: Commands can reference and modify project files\n\n### Invocation patterns\n\n```shell Direct command (when no conflicts) theme={null}\n/command-name\n```\n\n```shell Plugin-prefixed (when needed for disambiguation) theme={null}\n/plugin-name:command-name\n```\n\n```shell With arguments (if command supports them) theme={null}\n/command-name arg1 arg2\n```\n\n## MCP slash commands\n\nMCP servers can expose prompts as slash commands that become available in Claude Code. These commands are dynamically discovered from connected MCP servers.\n\n### Command format\n\nMCP commands follow the pattern:\n\n```\n/mcp__<server-name>__<prompt-name> [arguments]\n```\n\n### Features\n\n#### Dynamic discovery\n\nMCP commands are automatically available when:\n\n* An MCP server is connected and active\n* The server exposes prompts through the MCP protocol\n* The prompts are successfully retrieved during connection\n\n#### Arguments\n\nMCP prompts can accept arguments defined by the server:\n\n```\n# Without arguments\n> /mcp__github__list_prs\n\n# With arguments\n> /mcp__github__pr_review 456\n> /mcp__jira__create_issue \"Bug title\" high\n```\n\n#### Naming conventions\n\nServer and prompt names are normalized:\n\n* Spaces and special characters become underscores\n* Names are lowercase for consistency\n\n### Managing MCP connections\n\nUse the `/mcp` command to:\n\n* View all configured MCP servers\n* Check connection status\n* Authenticate with OAuth-enabled servers\n* Clear authentication tokens\n* View available tools and prompts from each server\n\n### MCP permissions and wildcards\n\nTo approve all tools from an MCP server, use either the server name alone or wildcard syntax:\n\n* `mcp__github` (approves all GitHub tools)\n* `mcp__github__*` (wildcard syntax, also approves all GitHub tools)\n\nTo approve specific tools, list each one explicitly:\n\n* `mcp__github__get_issue`\n* `mcp__github__list_issues`\n\nSee [MCP permission rules](/en/iam#tool-specific-permission-rules) for more details.\n\n## `Skill` tool\n\n<Note>\n  In earlier versions of Claude Code, slash command invocation was provided by a separate `SlashCommand` tool. This has been merged into the `Skill` tool.\n</Note>\n\nThe `Skill` tool allows Claude to programmatically invoke both [custom slash commands](/en/slash-commands#custom-slash-commands) and [Agent Skills](/en/skills) during a conversation. This gives Claude the ability to use these capabilities on your behalf when appropriate.\n\n### What the `Skill` tool can invoke\n\nThe `Skill` tool provides access to:\n\n| Type                  | Location                                     | Requirements                                   |\n| :-------------------- | :------------------------------------------- | :--------------------------------------------- |\n| Custom slash commands | `.claude/commands/` or `~/.claude/commands/` | Must have `description` frontmatter            |\n| Agent Skills          | `.claude/skills/` or `~/.claude/skills/`     | Must not have `disable-model-invocation: true` |\n\nBuilt-in commands like `/compact` and `/init` are *not* available through this tool.\n\n### Encourage Claude to use specific commands\n\nTo encourage Claude to use the `Skill` tool, reference the command by name, including the slash, in your prompts or `CLAUDE.md` file:\n\n```\n> Run /write-unit-test when you are about to start writing tests.\n```\n\nThis tool puts each available command's metadata into context up to the character budget limit. Use `/context` to monitor token usage.\n\nTo see which commands and Skills are available to the `Skill` tool, run `claude --debug` and trigger a query.\n\n### Disable the `Skill` tool\n\nTo prevent Claude from programmatically invoking any commands or Skills:\n\n```bash  theme={null}\n/permissions\n# Add to deny rules: Skill\n```\n\nThis removes the `Skill` tool and all command/Skill descriptions from context.\n\n### Disable specific commands or Skills\n\nTo prevent a specific command or Skill from being invoked programmatically via the `Skill` tool, add `disable-model-invocation: true` to its frontmatter. This also removes the item's metadata from context.\n\n<Note>\n  The `user-invocable` field in Skills only controls menu visibility, not `Skill` tool access. Use `disable-model-invocation: true` to block programmatic invocation. See [Control Skill visibility](/en/skills#control-skill-visibility) for details.\n</Note>\n\n### `Skill` permission rules\n\nThe permission rules support:\n\n* **Exact match**: `Skill(commit)` (allows only `commit` with no arguments)\n* **Prefix match**: `Skill(review-pr:*)` (allows `review-pr` with any arguments)\n\n### Character budget limit\n\nThe `Skill` tool includes a character budget to limit context usage. This prevents token overflow when many commands and Skills are available.\n\nThe budget includes each item's name, arguments, and description.\n\n* **Default limit**: 15,000 characters\n* **Custom limit**: Set via `SLASH_COMMAND_TOOL_CHAR_BUDGET` environment variable. The name is retained for backwards compatibility.\n\nWhen the budget is exceeded, Claude sees only a subset of available items. In `/context`, a warning shows how many are included.\n\n## Skills vs slash commands\n\n**Slash commands** and **Agent Skills** serve different purposes in Claude Code:\n\n### Use slash commands for\n\n**Quick, frequently used prompts**:\n\n* Simple prompt snippets you use often\n* Quick reminders or templates\n* Frequently used instructions that fit in one file\n\n**Examples**:\n\n* `/review`  \"Review this code for bugs and suggest improvements\"\n* `/explain`  \"Explain this code in simple terms\"\n* `/optimize`  \"Analyze this code for performance issues\"\n\n### Use Skills for\n\n**Comprehensive capabilities with structure**:\n\n* Complex workflows with multiple steps\n* Capabilities requiring scripts or utilities\n* Knowledge organized across multiple files\n* Team workflows you want to standardize\n\n**Examples**:\n\n* PDF processing Skill with form-filling scripts and validation\n* Data analysis Skill with reference docs for different data types\n* Documentation Skill with style guides and templates\n\n### Key differences\n\n| Aspect         | Slash Commands                   | Agent Skills                        |\n| -------------- | -------------------------------- | ----------------------------------- |\n| **Complexity** | Simple prompts                   | Complex capabilities                |\n| **Structure**  | Single .md file                  | Directory with SKILL.md + resources |\n| **Discovery**  | Explicit invocation (`/command`) | Automatic (based on context)        |\n| **Files**      | One file only                    | Multiple files, scripts, templates  |\n| **Scope**      | Project or personal              | Project or personal                 |\n| **Sharing**    | Via git                          | Via git                             |\n\n### Example comparison\n\n**As a slash command**:\n\n```markdown  theme={null}\n# .claude/commands/review.md\nReview this code for:\n- Security vulnerabilities\n- Performance issues\n- Code style violations\n```\n\nUsage: `/review` (manual invocation)\n\n**As a Skill**:\n\n```\n.claude/skills/code-review/\n SKILL.md (overview and workflows)\n SECURITY.md (security checklist)\n PERFORMANCE.md (performance patterns)\n STYLE.md (style guide reference)\n scripts/\n     run-linters.sh\n```\n\nUsage: \"Can you review this code?\" (automatic discovery)\n\nThe Skill provides richer context, validation scripts, and organized reference material.\n\n### When to use each\n\n**Use slash commands**:\n\n* You invoke the same prompt repeatedly\n* The prompt fits in a single file\n* You want explicit control over when it runs\n\n**Use Skills**:\n\n* Claude should discover the capability automatically\n* Multiple files or scripts are needed\n* Complex workflows with validation steps\n* Team needs standardized, detailed guidance\n\nBoth slash commands and Skills can coexist. Use the approach that fits your needs.\n\nLearn more about [Agent Skills](/en/skills).\n\n## See also\n\n* [Plugins](/en/plugins) - Extend Claude Code with custom commands through plugins\n* [Identity and Access Management](/en/iam) - Complete guide to permissions, including MCP tool permissions\n* [Interactive mode](/en/interactive-mode) - Shortcuts, input modes, and interactive features\n* [CLI reference](/en/cli-reference) - Command-line flags and options\n* [Settings](/en/settings) - Configuration options\n* [Memory management](/en/memory) - Managing Claude's memory across sessions\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":123,"url":"https://code.claude.com/docs/en/slash-commands.md"},"sourceToolAssistantUUID":"376d8241-d7a6-4bad-a8a3-3aaf287b4be7"}
{"parentUuid":"d7815f3d-2b27-49cb-80c7-5171cdf1a92b","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01MpSfo76N1FQrUXFJQUM63v","type":"tool_result","content":"# Use Claude Code in VS Code\n\n> Install and configure the Claude Code extension for VS Code. Get AI coding assistance with inline diffs, @-mentions, plan review, and keyboard shortcuts.\n\n<img src=\"https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=300652d5678c63905e6b0ea9e50835f8\" alt=\"VS Code editor with the Claude Code extension panel open on the right side, showing a conversation with Claude\" data-og-width=\"2500\" width=\"2500\" data-og-height=\"1155\" height=\"1155\" data-path=\"images/vs-code-extension-interface.jpg\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=280&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=87630c671517a3d52e9aee627041696e 280w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=560&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=716b093879204beec8d952649ef75292 560w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=840&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=c1525d1a01513acd9d83d8b5a8fe2fc8 840w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=1100&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=1d90021d58bbb51f871efec13af955c3 1100w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=1650&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=7babdd25440099886f193cfa99af88ae 1650w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=2500&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=08c92eedfb56fe61a61e480fb63784b6 2500w\" />\n\nThe VS Code extension provides a native graphical interface for Claude Code, integrated directly into your IDE. This is the recommended way to use Claude Code in VS Code.\n\nWith the extension, you can review and edit Claude's plans before accepting them, auto-accept edits as they're made, @-mention files with specific line ranges from your selection, access conversation history, and open multiple conversations in separate tabs or windows.\n\n## Prerequisites\n\n* VS Code 1.98.0 or higher\n* An Anthropic account (you'll sign in when you first open the extension). If you're using a third-party provider like Amazon Bedrock or Google Vertex AI, see [Use third-party providers](#use-third-party-providers) instead.\n\nYou don't need to install the Claude Code CLI first. However, some features like MCP server configuration require the CLI. See [VS Code extension vs. Claude Code CLI](#vs-code-extension-vs-claude-code-cli) for details.\n\n## Install the extension\n\nClick the link for your IDE to install directly:\n\n* [Install for VS Code](vscode:extension/anthropic.claude-code)\n* [Install for Cursor](cursor:extension/anthropic.claude-code)\n\nOr in VS Code, press `Cmd+Shift+X` (Mac) or `Ctrl+Shift+X` (Windows/Linux) to open the Extensions view, search for \"Claude Code\", and click **Install**.\n\n<Note>You may need to restart VS Code or run \"Developer: Reload Window\" from the Command Palette after installation.</Note>\n\n## Get started\n\nOnce installed, you can start using Claude Code through the VS Code interface:\n\n<Steps>\n  <Step title=\"Open the Claude Code panel\">\n    Throughout VS Code, the Spark icon indicates Claude Code: <img src=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=a734d84e785140016672f08e0abb236c\" alt=\"Spark icon\" style={{display: \"inline\", height: \"0.85em\", verticalAlign: \"middle\"}} data-og-width=\"16\" width=\"16\" data-og-height=\"16\" height=\"16\" data-path=\"images/vs-code-spark-icon.svg\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=280&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=9a45aad9a84b9fa1701ac99a1f9aa4e9 280w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=560&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=3f4cb9254c4d4e93989c4b6bf9292f4b 560w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=840&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=e75ccc9faa3e572db8f291ceb65bb264 840w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=1100&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=f147bd81a381a62539a4ce361fac41c7 1100w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=1650&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=78fe68efaee5d6e844bbacab1b442ed5 1650w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=2500&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=efb8dbe1dfa722d094edc6ad2ad4bedb 2500w\" />\n\n    The quickest way to open Claude is to click the Spark icon in the **Editor Toolbar** (top-right corner of the editor). The icon only appears when you have a file open.\n\n        <img src=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=eb4540325d94664c51776dbbfec4cf02\" alt=\"VS Code editor showing the Spark icon in the Editor Toolbar\" data-og-width=\"2796\" width=\"2796\" data-og-height=\"734\" height=\"734\" data-path=\"images/vs-code-editor-icon.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=280&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=56f218d5464359d6480cfe23f70a923e 280w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=560&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=344a8db024b196c795a80dc85cacb8d1 560w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=840&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=f30bf834ee0625b2a4a635d552d87163 840w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=1100&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=81fdf984840e43a9f08ae42729d1484d 1100w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=1650&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=8b60fb32de54717093d512afaa99785c 1650w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=2500&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=893e6bda8f2e9d42c8a294d394f0b736 2500w\" />\n\n    Other ways to open Claude Code:\n\n    * **Command Palette**: `Cmd+Shift+P` (Mac) or `Ctrl+Shift+P` (Windows/Linux), type \"Claude Code\", and select an option like \"Open in New Tab\"\n    * **Status Bar**: Click ** Claude Code** in the bottom-right corner of the window. This works even when no file is open.\n\n    You can drag the Claude panel to reposition it anywhere in VS Code. See [Customize your workflow](#customize-your-workflow) for details.\n  </Step>\n\n  <Step title=\"Send a prompt\">\n    Ask Claude to help with your code or files, whether that's explaining how something works, debugging an issue, or making changes.\n\n    <Tip>Select text in the editor and press `Alt+K` to insert an @-mention with the file path and line numbers directly into your prompt.</Tip>\n\n    Here's an example of asking about a particular line in a file:\n\n        <img src=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=ede3ed8d8d5f940e01c5de636d009cfd\" alt=\"VS Code editor with lines 2-3 selected in a Python file, and the Claude Code panel showing a question about those lines with an @-mention reference\" data-og-width=\"3288\" width=\"3288\" data-og-height=\"1876\" height=\"1876\" data-path=\"images/vs-code-send-prompt.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=280&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=f40bde7b2c245fe8f0f5b784e8106492 280w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=560&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=fad66a27a9a6faa23b05370aa4f398b2 560w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=840&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=4539c8a3823ca80a5c8771f6c088ce9e 840w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=1100&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=fae8ebf300c7853409a562ffa46d9c71 1100w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=1650&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=22e4462bb8cf0c0ca20f8102bc4c971a 1650w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=2500&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=739bfd045f70fe7be1a109a53494590e 2500w\" />\n  </Step>\n\n  <Step title=\"Review changes\">\n    When Claude wants to edit a file, it shows you a diff and asks for permission. You can accept, reject, or tell Claude what to do instead.\n\n        <img src=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=e005f9b41c541c5c7c59c082f7c4841c\" alt=\"VS Code showing a diff of Claude's proposed changes with a permission prompt asking whether to make the edit\" data-og-width=\"3292\" width=\"3292\" data-og-height=\"1876\" height=\"1876\" data-path=\"images/vs-code-edits.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=280&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=cb5d41b81087f79b842a56b5a3304660 280w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=560&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=90bb691960decdc06393c3c21cd62c75 560w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=840&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=9a11bf878ba619e850380904ff4f38e8 840w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=1100&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=6dddbf596b4f69ec6245bdc5eb6dd487 1100w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=1650&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=ef2713b8cbfd2cee97af817d813d64c7 1650w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=2500&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=1f7e1c52919cdfddf295f32a2ec7ae59 2500w\" />\n  </Step>\n</Steps>\n\nFor more ideas on what you can do with Claude Code, see [Common workflows](/en/common-workflows).\n\n## Customize your workflow\n\nOnce you're up and running, you can reposition the Claude panel or switch to terminal mode.\n\n### Change the layout\n\nYou can drag the Claude panel to reposition it anywhere in VS Code. Grab the panel's tab or title bar and drag it to:\n\n* **Secondary sidebar** (default): The right side of the window\n* **Primary sidebar**: The left sidebar with icons for Explorer, Search, etc.\n* **Editor area**: Opens Claude as a tab alongside your files\n\n<Note>\n  The Spark icon only appears in the Activity Bar (left sidebar icons) when the Claude panel is docked to the left. Since Claude defaults to the right side, use the Editor Toolbar icon to open Claude.\n</Note>\n\n### Switch to terminal mode\n\nBy default, the extension opens a graphical chat panel. If you prefer the CLI-style interface, open the [Use Terminal setting](vscode://settings/claudeCode.useTerminal) and check the box.\n\nYou can also open VS Code settings (`Cmd+,` on Mac or `Ctrl+,` on Windows/Linux), go to Extensions  Claude Code, and check **Use Terminal**.\n\n## VS Code commands and shortcuts\n\nOpen the Command Palette (`Cmd+Shift+P` on Mac or `Ctrl+Shift+P` on Windows/Linux) and type \"Claude Code\" to see all available VS Code commands for the Claude Code extension:\n\n<Note>\n  These are VS Code commands for controlling the extension. For Claude Code slash commands (like `/help` or `/compact`), not all CLI commands are available in the extension yet. See [VS Code extension vs. Claude Code CLI](#vs-code-extension-vs-claude-code-cli) for details.\n</Note>\n\n| Command                    | Shortcut                                                 | Description                                                                        |\n| -------------------------- | -------------------------------------------------------- | ---------------------------------------------------------------------------------- |\n| Focus Input                | `Cmd+Esc` (Mac) / `Ctrl+Esc` (Windows/Linux)             | Toggle focus between editor and Claude                                             |\n| Open in Side Bar           |                                                         | Open Claude in the left sidebar                                                    |\n| Open in Terminal           |                                                         | Open Claude in terminal mode                                                       |\n| Open in New Tab            | `Cmd+Shift+Esc` (Mac) / `Ctrl+Shift+Esc` (Windows/Linux) | Open a new conversation as an editor tab                                           |\n| Open in New Window         |                                                         | Open a new conversation in a separate window                                       |\n| New Conversation           | `Cmd+N` (Mac) / `Ctrl+N` (Windows/Linux)                 | Start a new conversation (when Claude is focused)                                  |\n| Insert @-Mention Reference | `Alt+K`                                                  | Insert a reference to the current file (includes line numbers if text is selected) |\n| Show Logs                  |                                                         | View extension debug logs                                                          |\n| Logout                     |                                                         | Sign out of your Anthropic account                                                 |\n\nUse **Open in New Tab** or **Open in New Window** to run multiple conversations simultaneously. Each tab or window maintains its own conversation history and context.\n\n## Configure settings\n\nThe extension has two types of settings:\n\n* **Extension settings**: Open with `Cmd+,` (Mac) or `Ctrl+,` (Windows/Linux), then go to Extensions  Claude Code.\n\n  | Setting                            | Description                                                                                                                                                                  |\n  | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n  | Selected Model                     | Default model for new conversations. Change per-session with `/model`.                                                                                                       |\n  | Use Terminal                       | Launch Claude in terminal mode instead of graphical panel                                                                                                                    |\n  | Initial Permission Mode            | Controls approval prompts for file edits and commands. Defaults to `default` (ask before each action).                                                                       |\n  | Preferred Location                 | Default location: sidebar (right) or panel (new tab)                                                                                                                         |\n  | Autosave                           | Auto-save files before Claude reads or writes them                                                                                                                           |\n  | Use Ctrl+Enter to Send             | Use Ctrl/Cmd+Enter instead of Enter to send prompts                                                                                                                          |\n  | Enable New Conversation Shortcut   | Enable Cmd/Ctrl+N to start a new conversation                                                                                                                                |\n  | Respect Git Ignore                 | Exclude .gitignore patterns from file searches                                                                                                                               |\n  | Environment Variables              | Set environment variables for the Claude process. **Not recommended**use [Claude Code settings](/en/settings) instead so configuration is shared between extension and CLI. |\n  | Disable Login Prompt               | Skip authentication prompts (for third-party provider setups)                                                                                                                |\n  | Allow Dangerously Skip Permissions | Bypass all permission prompts. **Use with extreme caution**recommended only for isolated sandboxes with no internet access.                                                 |\n  | Claude Process Wrapper             | Executable path used to launch the Claude process                                                                                                                            |\n\n* **Claude Code settings** (`~/.claude/settings.json`): These settings are shared between the VS Code extension and the CLI. Use this file for allowed commands and directories, environment variables, hooks, and MCP servers. See the [settings documentation](/en/settings) for details.\n\n## Use third-party providers\n\nBy default, Claude Code connects directly to Anthropic's API. If your organization uses Amazon Bedrock, Google Vertex AI, or Microsoft Foundry to access Claude, configure the extension to use your provider instead:\n\n<Steps>\n  <Step title=\"Disable login prompt\">\n    Open the [Disable Login Prompt setting](vscode://settings/claudeCode.disableLoginPrompt) and check the box.\n\n    You can also open VS Code settings (`Cmd+,` on Mac or `Ctrl+,` on Windows/Linux), search for \"Claude Code login\", and check **Disable Login Prompt**.\n  </Step>\n\n  <Step title=\"Configure your provider\">\n    Follow the setup guide for your provider:\n\n    * [Claude Code on Amazon Bedrock](/en/amazon-bedrock)\n    * [Claude Code on Google Vertex AI](/en/google-vertex-ai)\n    * [Claude Code on Microsoft Foundry](/en/microsoft-foundry)\n\n    These guides cover configuring your provider in `~/.claude/settings.json`, which ensures your settings are shared between the VS Code extension and the CLI.\n  </Step>\n</Steps>\n\n## VS Code extension vs. Claude Code CLI\n\nThe extension doesn't yet have full feature parity with the CLI. If you need CLI-only features, you can run `claude` directly in VS Code's integrated terminal.\n\n| Feature           | CLI                            | VS Code Extension                        |\n| ----------------- | ------------------------------ | ---------------------------------------- |\n| Slash commands    | [Full set](/en/slash-commands) | Subset (type `/` to see available)       |\n| MCP server config | Yes                            | No (configure via CLI, use in extension) |\n| Checkpoints       | Yes                            | Coming soon                              |\n| `!` bash shortcut | Yes                            | No                                       |\n| Tab completion    | Yes                            | No                                       |\n\n### Run CLI in VS Code\n\nTo use the CLI while staying in VS Code, open the integrated terminal (`` Ctrl+` `` on Windows/Linux or `` Cmd+` `` on Mac) and run `claude`. The CLI automatically integrates with your IDE for features like diff viewing and diagnostic sharing.\n\nIf using an external terminal, run `/ide` inside Claude Code to connect it to VS Code.\n\n### Switch between extension and CLI\n\nThe extension and CLI share the same conversation history. To continue an extension conversation in the CLI, run `claude --resume` in the terminal. This opens an interactive picker where you can search for and select your conversation.\n\n## Security considerations\n\nWith auto-edit permissions enabled, Claude Code can modify VS Code configuration files (like `settings.json` or `tasks.json`) that VS Code may execute automatically. This could potentially bypass Claude Code's normal permission prompts.\n\nTo reduce risk when working with untrusted code:\n\n* Enable [VS Code Restricted Mode](https://code.visualstudio.com/docs/editor/workspace-trust#_restricted-mode) for untrusted workspaces\n* Use manual approval mode instead of auto-accept for edits\n* Review changes carefully before accepting them\n\n## Fix common issues\n\n### Extension won't install\n\n* Ensure you have a compatible version of VS Code (1.98.0 or later)\n* Check that VS Code has permission to install extensions\n* Try installing directly from the Marketplace website\n\n### Spark icon not visible\n\nThe Spark icon appears in the **Editor Toolbar** (top-right of editor) when you have a file open. If you don't see it:\n\n1. **Open a file**: The icon requires a file to be openhaving just a folder open isn't enough\n2. **Check VS Code version**: Requires 1.98.0 or higher (Help  About)\n3. **Restart VS Code**: Run \"Developer: Reload Window\" from the Command Palette\n4. **Disable conflicting extensions**: Temporarily disable other AI extensions (Cline, Continue, etc.)\n5. **Check workspace trust**: The extension doesn't work in Restricted Mode\n\nAlternatively, click \" Claude Code\" in the **Status Bar** (bottom-right corner)this works even without a file open. You can also use the **Command Palette** (`Cmd+Shift+P` / `Ctrl+Shift+P`) and type \"Claude Code\".\n\n### Claude Code never responds\n\nIf Claude Code isn't responding to your prompts:\n\n1. **Check your internet connection**: Ensure you have a stable internet connection\n2. **Start a new conversation**: Try starting a fresh conversation to see if the issue persists\n3. **Try the CLI**: Run `claude` from the terminal to see if you get more detailed error messages\n4. **File a bug report**: If the problem continues, [file an issue on GitHub](https://github.com/anthropics/claude-code/issues) with details about the error\n\n### Standalone CLI not connecting to IDE\n\n* Ensure you're running Claude Code from VS Code's integrated terminal (not an external terminal)\n* Ensure the CLI for your IDE variant is installed:\n  * VS Code: `code` command should be available\n  * Cursor: `cursor` command should be available\n  * Windsurf: `windsurf` command should be available\n  * VSCodium: `codium` command should be available\n* If the command isn't available, install it from the Command Palette  \"Shell Command: Install 'code' command in PATH\"\n\n## Uninstall the extension\n\nTo uninstall the Claude Code extension:\n\n1. Open the Extensions view (`Cmd+Shift+X` on Mac or `Ctrl+Shift+X` on Windows/Linux)\n2. Search for \"Claude Code\"\n3. Click **Uninstall**\n\nTo also remove extension data and reset all settings:\n\n```bash  theme={null}\nrm -rf ~/.vscode/globalStorage/anthropic.claude-code\n```\n\nFor additional help, see the [troubleshooting guide](/en/troubleshooting).\n\n## Next steps\n\nNow that you have Claude Code set up in VS Code:\n\n* [Explore common workflows](/en/common-workflows) to get the most out of Claude Code\n* [Set up MCP servers](/en/mcp) to extend Claude's capabilities with external tools. Configure servers using the CLI, then use them in the extension.\n* [Configure Claude Code settings](/en/settings) to customize allowed commands, hooks, and more. These settings are shared between the extension and CLI.\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"c23db998-5ae4-4c90-96de-f540249da4f7","timestamp":"2026-01-18T08:08:54.627Z","toolUseResult":{"bytes":23830,"code":200,"codeText":"OK","result":"# Use Claude Code in VS Code\n\n> Install and configure the Claude Code extension for VS Code. Get AI coding assistance with inline diffs, @-mentions, plan review, and keyboard shortcuts.\n\n<img src=\"https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=300652d5678c63905e6b0ea9e50835f8\" alt=\"VS Code editor with the Claude Code extension panel open on the right side, showing a conversation with Claude\" data-og-width=\"2500\" width=\"2500\" data-og-height=\"1155\" height=\"1155\" data-path=\"images/vs-code-extension-interface.jpg\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=280&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=87630c671517a3d52e9aee627041696e 280w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=560&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=716b093879204beec8d952649ef75292 560w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=840&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=c1525d1a01513acd9d83d8b5a8fe2fc8 840w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=1100&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=1d90021d58bbb51f871efec13af955c3 1100w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=1650&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=7babdd25440099886f193cfa99af88ae 1650w, https://mintcdn.com/claude-code/-YhHHmtSxwr7W8gy/images/vs-code-extension-interface.jpg?w=2500&fit=max&auto=format&n=-YhHHmtSxwr7W8gy&q=85&s=08c92eedfb56fe61a61e480fb63784b6 2500w\" />\n\nThe VS Code extension provides a native graphical interface for Claude Code, integrated directly into your IDE. This is the recommended way to use Claude Code in VS Code.\n\nWith the extension, you can review and edit Claude's plans before accepting them, auto-accept edits as they're made, @-mention files with specific line ranges from your selection, access conversation history, and open multiple conversations in separate tabs or windows.\n\n## Prerequisites\n\n* VS Code 1.98.0 or higher\n* An Anthropic account (you'll sign in when you first open the extension). If you're using a third-party provider like Amazon Bedrock or Google Vertex AI, see [Use third-party providers](#use-third-party-providers) instead.\n\nYou don't need to install the Claude Code CLI first. However, some features like MCP server configuration require the CLI. See [VS Code extension vs. Claude Code CLI](#vs-code-extension-vs-claude-code-cli) for details.\n\n## Install the extension\n\nClick the link for your IDE to install directly:\n\n* [Install for VS Code](vscode:extension/anthropic.claude-code)\n* [Install for Cursor](cursor:extension/anthropic.claude-code)\n\nOr in VS Code, press `Cmd+Shift+X` (Mac) or `Ctrl+Shift+X` (Windows/Linux) to open the Extensions view, search for \"Claude Code\", and click **Install**.\n\n<Note>You may need to restart VS Code or run \"Developer: Reload Window\" from the Command Palette after installation.</Note>\n\n## Get started\n\nOnce installed, you can start using Claude Code through the VS Code interface:\n\n<Steps>\n  <Step title=\"Open the Claude Code panel\">\n    Throughout VS Code, the Spark icon indicates Claude Code: <img src=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=a734d84e785140016672f08e0abb236c\" alt=\"Spark icon\" style={{display: \"inline\", height: \"0.85em\", verticalAlign: \"middle\"}} data-og-width=\"16\" width=\"16\" data-og-height=\"16\" height=\"16\" data-path=\"images/vs-code-spark-icon.svg\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=280&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=9a45aad9a84b9fa1701ac99a1f9aa4e9 280w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=560&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=3f4cb9254c4d4e93989c4b6bf9292f4b 560w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=840&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=e75ccc9faa3e572db8f291ceb65bb264 840w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=1100&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=f147bd81a381a62539a4ce361fac41c7 1100w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=1650&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=78fe68efaee5d6e844bbacab1b442ed5 1650w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-spark-icon.svg?w=2500&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=efb8dbe1dfa722d094edc6ad2ad4bedb 2500w\" />\n\n    The quickest way to open Claude is to click the Spark icon in the **Editor Toolbar** (top-right corner of the editor). The icon only appears when you have a file open.\n\n        <img src=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=eb4540325d94664c51776dbbfec4cf02\" alt=\"VS Code editor showing the Spark icon in the Editor Toolbar\" data-og-width=\"2796\" width=\"2796\" data-og-height=\"734\" height=\"734\" data-path=\"images/vs-code-editor-icon.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=280&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=56f218d5464359d6480cfe23f70a923e 280w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=560&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=344a8db024b196c795a80dc85cacb8d1 560w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=840&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=f30bf834ee0625b2a4a635d552d87163 840w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=1100&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=81fdf984840e43a9f08ae42729d1484d 1100w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=1650&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=8b60fb32de54717093d512afaa99785c 1650w, https://mintcdn.com/claude-code/mfM-EyoZGnQv8JTc/images/vs-code-editor-icon.png?w=2500&fit=max&auto=format&n=mfM-EyoZGnQv8JTc&q=85&s=893e6bda8f2e9d42c8a294d394f0b736 2500w\" />\n\n    Other ways to open Claude Code:\n\n    * **Command Palette**: `Cmd+Shift+P` (Mac) or `Ctrl+Shift+P` (Windows/Linux), type \"Claude Code\", and select an option like \"Open in New Tab\"\n    * **Status Bar**: Click ** Claude Code** in the bottom-right corner of the window. This works even when no file is open.\n\n    You can drag the Claude panel to reposition it anywhere in VS Code. See [Customize your workflow](#customize-your-workflow) for details.\n  </Step>\n\n  <Step title=\"Send a prompt\">\n    Ask Claude to help with your code or files, whether that's explaining how something works, debugging an issue, or making changes.\n\n    <Tip>Select text in the editor and press `Alt+K` to insert an @-mention with the file path and line numbers directly into your prompt.</Tip>\n\n    Here's an example of asking about a particular line in a file:\n\n        <img src=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=ede3ed8d8d5f940e01c5de636d009cfd\" alt=\"VS Code editor with lines 2-3 selected in a Python file, and the Claude Code panel showing a question about those lines with an @-mention reference\" data-og-width=\"3288\" width=\"3288\" data-og-height=\"1876\" height=\"1876\" data-path=\"images/vs-code-send-prompt.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=280&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=f40bde7b2c245fe8f0f5b784e8106492 280w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=560&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=fad66a27a9a6faa23b05370aa4f398b2 560w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=840&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=4539c8a3823ca80a5c8771f6c088ce9e 840w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=1100&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=fae8ebf300c7853409a562ffa46d9c71 1100w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=1650&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=22e4462bb8cf0c0ca20f8102bc4c971a 1650w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-send-prompt.png?w=2500&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=739bfd045f70fe7be1a109a53494590e 2500w\" />\n  </Step>\n\n  <Step title=\"Review changes\">\n    When Claude wants to edit a file, it shows you a diff and asks for permission. You can accept, reject, or tell Claude what to do instead.\n\n        <img src=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=e005f9b41c541c5c7c59c082f7c4841c\" alt=\"VS Code showing a diff of Claude's proposed changes with a permission prompt asking whether to make the edit\" data-og-width=\"3292\" width=\"3292\" data-og-height=\"1876\" height=\"1876\" data-path=\"images/vs-code-edits.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=280&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=cb5d41b81087f79b842a56b5a3304660 280w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=560&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=90bb691960decdc06393c3c21cd62c75 560w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=840&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=9a11bf878ba619e850380904ff4f38e8 840w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=1100&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=6dddbf596b4f69ec6245bdc5eb6dd487 1100w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=1650&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=ef2713b8cbfd2cee97af817d813d64c7 1650w, https://mintcdn.com/claude-code/FVYz38sRY-VuoGHA/images/vs-code-edits.png?w=2500&fit=max&auto=format&n=FVYz38sRY-VuoGHA&q=85&s=1f7e1c52919cdfddf295f32a2ec7ae59 2500w\" />\n  </Step>\n</Steps>\n\nFor more ideas on what you can do with Claude Code, see [Common workflows](/en/common-workflows).\n\n## Customize your workflow\n\nOnce you're up and running, you can reposition the Claude panel or switch to terminal mode.\n\n### Change the layout\n\nYou can drag the Claude panel to reposition it anywhere in VS Code. Grab the panel's tab or title bar and drag it to:\n\n* **Secondary sidebar** (default): The right side of the window\n* **Primary sidebar**: The left sidebar with icons for Explorer, Search, etc.\n* **Editor area**: Opens Claude as a tab alongside your files\n\n<Note>\n  The Spark icon only appears in the Activity Bar (left sidebar icons) when the Claude panel is docked to the left. Since Claude defaults to the right side, use the Editor Toolbar icon to open Claude.\n</Note>\n\n### Switch to terminal mode\n\nBy default, the extension opens a graphical chat panel. If you prefer the CLI-style interface, open the [Use Terminal setting](vscode://settings/claudeCode.useTerminal) and check the box.\n\nYou can also open VS Code settings (`Cmd+,` on Mac or `Ctrl+,` on Windows/Linux), go to Extensions  Claude Code, and check **Use Terminal**.\n\n## VS Code commands and shortcuts\n\nOpen the Command Palette (`Cmd+Shift+P` on Mac or `Ctrl+Shift+P` on Windows/Linux) and type \"Claude Code\" to see all available VS Code commands for the Claude Code extension:\n\n<Note>\n  These are VS Code commands for controlling the extension. For Claude Code slash commands (like `/help` or `/compact`), not all CLI commands are available in the extension yet. See [VS Code extension vs. Claude Code CLI](#vs-code-extension-vs-claude-code-cli) for details.\n</Note>\n\n| Command                    | Shortcut                                                 | Description                                                                        |\n| -------------------------- | -------------------------------------------------------- | ---------------------------------------------------------------------------------- |\n| Focus Input                | `Cmd+Esc` (Mac) / `Ctrl+Esc` (Windows/Linux)             | Toggle focus between editor and Claude                                             |\n| Open in Side Bar           |                                                         | Open Claude in the left sidebar                                                    |\n| Open in Terminal           |                                                         | Open Claude in terminal mode                                                       |\n| Open in New Tab            | `Cmd+Shift+Esc` (Mac) / `Ctrl+Shift+Esc` (Windows/Linux) | Open a new conversation as an editor tab                                           |\n| Open in New Window         |                                                         | Open a new conversation in a separate window                                       |\n| New Conversation           | `Cmd+N` (Mac) / `Ctrl+N` (Windows/Linux)                 | Start a new conversation (when Claude is focused)                                  |\n| Insert @-Mention Reference | `Alt+K`                                                  | Insert a reference to the current file (includes line numbers if text is selected) |\n| Show Logs                  |                                                         | View extension debug logs                                                          |\n| Logout                     |                                                         | Sign out of your Anthropic account                                                 |\n\nUse **Open in New Tab** or **Open in New Window** to run multiple conversations simultaneously. Each tab or window maintains its own conversation history and context.\n\n## Configure settings\n\nThe extension has two types of settings:\n\n* **Extension settings**: Open with `Cmd+,` (Mac) or `Ctrl+,` (Windows/Linux), then go to Extensions  Claude Code.\n\n  | Setting                            | Description                                                                                                                                                                  |\n  | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n  | Selected Model                     | Default model for new conversations. Change per-session with `/model`.                                                                                                       |\n  | Use Terminal                       | Launch Claude in terminal mode instead of graphical panel                                                                                                                    |\n  | Initial Permission Mode            | Controls approval prompts for file edits and commands. Defaults to `default` (ask before each action).                                                                       |\n  | Preferred Location                 | Default location: sidebar (right) or panel (new tab)                                                                                                                         |\n  | Autosave                           | Auto-save files before Claude reads or writes them                                                                                                                           |\n  | Use Ctrl+Enter to Send             | Use Ctrl/Cmd+Enter instead of Enter to send prompts                                                                                                                          |\n  | Enable New Conversation Shortcut   | Enable Cmd/Ctrl+N to start a new conversation                                                                                                                                |\n  | Respect Git Ignore                 | Exclude .gitignore patterns from file searches                                                                                                                               |\n  | Environment Variables              | Set environment variables for the Claude process. **Not recommended**use [Claude Code settings](/en/settings) instead so configuration is shared between extension and CLI. |\n  | Disable Login Prompt               | Skip authentication prompts (for third-party provider setups)                                                                                                                |\n  | Allow Dangerously Skip Permissions | Bypass all permission prompts. **Use with extreme caution**recommended only for isolated sandboxes with no internet access.                                                 |\n  | Claude Process Wrapper             | Executable path used to launch the Claude process                                                                                                                            |\n\n* **Claude Code settings** (`~/.claude/settings.json`): These settings are shared between the VS Code extension and the CLI. Use this file for allowed commands and directories, environment variables, hooks, and MCP servers. See the [settings documentation](/en/settings) for details.\n\n## Use third-party providers\n\nBy default, Claude Code connects directly to Anthropic's API. If your organization uses Amazon Bedrock, Google Vertex AI, or Microsoft Foundry to access Claude, configure the extension to use your provider instead:\n\n<Steps>\n  <Step title=\"Disable login prompt\">\n    Open the [Disable Login Prompt setting](vscode://settings/claudeCode.disableLoginPrompt) and check the box.\n\n    You can also open VS Code settings (`Cmd+,` on Mac or `Ctrl+,` on Windows/Linux), search for \"Claude Code login\", and check **Disable Login Prompt**.\n  </Step>\n\n  <Step title=\"Configure your provider\">\n    Follow the setup guide for your provider:\n\n    * [Claude Code on Amazon Bedrock](/en/amazon-bedrock)\n    * [Claude Code on Google Vertex AI](/en/google-vertex-ai)\n    * [Claude Code on Microsoft Foundry](/en/microsoft-foundry)\n\n    These guides cover configuring your provider in `~/.claude/settings.json`, which ensures your settings are shared between the VS Code extension and the CLI.\n  </Step>\n</Steps>\n\n## VS Code extension vs. Claude Code CLI\n\nThe extension doesn't yet have full feature parity with the CLI. If you need CLI-only features, you can run `claude` directly in VS Code's integrated terminal.\n\n| Feature           | CLI                            | VS Code Extension                        |\n| ----------------- | ------------------------------ | ---------------------------------------- |\n| Slash commands    | [Full set](/en/slash-commands) | Subset (type `/` to see available)       |\n| MCP server config | Yes                            | No (configure via CLI, use in extension) |\n| Checkpoints       | Yes                            | Coming soon                              |\n| `!` bash shortcut | Yes                            | No                                       |\n| Tab completion    | Yes                            | No                                       |\n\n### Run CLI in VS Code\n\nTo use the CLI while staying in VS Code, open the integrated terminal (`` Ctrl+` `` on Windows/Linux or `` Cmd+` `` on Mac) and run `claude`. The CLI automatically integrates with your IDE for features like diff viewing and diagnostic sharing.\n\nIf using an external terminal, run `/ide` inside Claude Code to connect it to VS Code.\n\n### Switch between extension and CLI\n\nThe extension and CLI share the same conversation history. To continue an extension conversation in the CLI, run `claude --resume` in the terminal. This opens an interactive picker where you can search for and select your conversation.\n\n## Security considerations\n\nWith auto-edit permissions enabled, Claude Code can modify VS Code configuration files (like `settings.json` or `tasks.json`) that VS Code may execute automatically. This could potentially bypass Claude Code's normal permission prompts.\n\nTo reduce risk when working with untrusted code:\n\n* Enable [VS Code Restricted Mode](https://code.visualstudio.com/docs/editor/workspace-trust#_restricted-mode) for untrusted workspaces\n* Use manual approval mode instead of auto-accept for edits\n* Review changes carefully before accepting them\n\n## Fix common issues\n\n### Extension won't install\n\n* Ensure you have a compatible version of VS Code (1.98.0 or later)\n* Check that VS Code has permission to install extensions\n* Try installing directly from the Marketplace website\n\n### Spark icon not visible\n\nThe Spark icon appears in the **Editor Toolbar** (top-right of editor) when you have a file open. If you don't see it:\n\n1. **Open a file**: The icon requires a file to be openhaving just a folder open isn't enough\n2. **Check VS Code version**: Requires 1.98.0 or higher (Help  About)\n3. **Restart VS Code**: Run \"Developer: Reload Window\" from the Command Palette\n4. **Disable conflicting extensions**: Temporarily disable other AI extensions (Cline, Continue, etc.)\n5. **Check workspace trust**: The extension doesn't work in Restricted Mode\n\nAlternatively, click \" Claude Code\" in the **Status Bar** (bottom-right corner)this works even without a file open. You can also use the **Command Palette** (`Cmd+Shift+P` / `Ctrl+Shift+P`) and type \"Claude Code\".\n\n### Claude Code never responds\n\nIf Claude Code isn't responding to your prompts:\n\n1. **Check your internet connection**: Ensure you have a stable internet connection\n2. **Start a new conversation**: Try starting a fresh conversation to see if the issue persists\n3. **Try the CLI**: Run `claude` from the terminal to see if you get more detailed error messages\n4. **File a bug report**: If the problem continues, [file an issue on GitHub](https://github.com/anthropics/claude-code/issues) with details about the error\n\n### Standalone CLI not connecting to IDE\n\n* Ensure you're running Claude Code from VS Code's integrated terminal (not an external terminal)\n* Ensure the CLI for your IDE variant is installed:\n  * VS Code: `code` command should be available\n  * Cursor: `cursor` command should be available\n  * Windsurf: `windsurf` command should be available\n  * VSCodium: `codium` command should be available\n* If the command isn't available, install it from the Command Palette  \"Shell Command: Install 'code' command in PATH\"\n\n## Uninstall the extension\n\nTo uninstall the Claude Code extension:\n\n1. Open the Extensions view (`Cmd+Shift+X` on Mac or `Ctrl+Shift+X` on Windows/Linux)\n2. Search for \"Claude Code\"\n3. Click **Uninstall**\n\nTo also remove extension data and reset all settings:\n\n```bash  theme={null}\nrm -rf ~/.vscode/globalStorage/anthropic.claude-code\n```\n\nFor additional help, see the [troubleshooting guide](/en/troubleshooting).\n\n## Next steps\n\nNow that you have Claude Code set up in VS Code:\n\n* [Explore common workflows](/en/common-workflows) to get the most out of Claude Code\n* [Set up MCP servers](/en/mcp) to extend Claude's capabilities with external tools. Configure servers using the CLI, then use them in the extension.\n* [Configure Claude Code settings](/en/settings) to customize allowed commands, hooks, and more. These settings are shared between the extension and CLI.\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":129,"url":"https://code.claude.com/docs/en/vs-code.md"},"sourceToolAssistantUUID":"d7815f3d-2b27-49cb-80c7-5171cdf1a92b"}
{"parentUuid":"cec265c6-45ff-4b49-8ef8-25e80c5c5b0b","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","type":"user","message":{"role":"user","content":[{"tool_use_id":"toolu_01NGSDncXNFb1cRjGD1YCjWr","type":"tool_result","content":"# Create plugins\n\n> Create custom plugins to extend Claude Code with slash commands, agents, hooks, Skills, and MCP servers.\n\nPlugins let you extend Claude Code with custom functionality that can be shared across projects and teams. This guide covers creating your own plugins with slash commands, agents, Skills, hooks, and MCP servers.\n\nLooking to install existing plugins? See [Discover and install plugins](/en/discover-plugins). For complete technical specifications, see [Plugins reference](/en/plugins-reference).\n\n## When to use plugins vs standalone configuration\n\nClaude Code supports two ways to add custom slash commands, agents, and hooks:\n\n| Approach                                                    | Slash command names  | Best for                                                                                        |\n| :---------------------------------------------------------- | :------------------- | :---------------------------------------------------------------------------------------------- |\n| **Standalone** (`.claude/` directory)                       | `/hello`             | Personal workflows, project-specific customizations, quick experiments                          |\n| **Plugins** (directories with `.claude-plugin/plugin.json`) | `/plugin-name:hello` | Sharing with teammates, distributing to community, versioned releases, reusable across projects |\n\n**Use standalone configuration when**:\n\n* You're customizing Claude Code for a single project\n* The configuration is personal and doesn't need to be shared\n* You're experimenting with slash commands or hooks before packaging them\n* You want short slash command names like `/hello` or `/review`\n\n**Use plugins when**:\n\n* You want to share functionality with your team or community\n* You need the same slash commands/agents across multiple projects\n* You want version control and easy updates for your extensions\n* You're distributing through a marketplace\n* You're okay with namespaced slash commands like `/my-plugin:hello` (namespacing prevents conflicts between plugins)\n\n<Tip>\n  Start with standalone configuration in `.claude/` for quick iteration, then [convert to a plugin](#convert-existing-configurations-to-plugins) when you're ready to share.\n</Tip>\n\n## Quickstart\n\nThis quickstart walks you through creating a plugin with a custom slash command. You'll create a manifest (the configuration file that defines your plugin), add a slash command, and test it locally using the `--plugin-dir` flag.\n\n### Prerequisites\n\n* Claude Code [installed and authenticated](/en/quickstart#step-1-install-claude-code)\n* Claude Code version 1.0.33 or later (run `claude --version` to check)\n\n<Note>\n  If you don't see the `/plugin` command, update Claude Code to the latest version. See [Troubleshooting](/en/troubleshooting) for upgrade instructions.\n</Note>\n\n### Create your first plugin\n\n<Steps>\n  <Step title=\"Create the plugin directory\">\n    Every plugin lives in its own directory containing a manifest and your custom commands, agents, or hooks. Create one now:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin\n    ```\n  </Step>\n\n  <Step title=\"Create the plugin manifest\">\n    The manifest file at `.claude-plugin/plugin.json` defines your plugin's identity: its name, description, and version. Claude Code uses this metadata to display your plugin in the plugin manager.\n\n    Create the `.claude-plugin` directory inside your plugin folder:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin/.claude-plugin\n    ```\n\n    Then create `my-first-plugin/.claude-plugin/plugin.json` with this content:\n\n    ```json my-first-plugin/.claude-plugin/plugin.json theme={null}\n    {\n    \"name\": \"my-first-plugin\",\n    \"description\": \"A greeting plugin to learn the basics\",\n    \"version\": \"1.0.0\",\n    \"author\": {\n    \"name\": \"Your Name\"\n    }\n    }\n    ```\n\n    | Field         | Purpose                                                                                                                |\n    | :------------ | :--------------------------------------------------------------------------------------------------------------------- |\n    | `name`        | Unique identifier and slash command namespace. Slash commands are prefixed with this (e.g., `/my-first-plugin:hello`). |\n    | `description` | Shown in the plugin manager when browsing or installing plugins.                                                       |\n    | `version`     | Track releases using [semantic versioning](/en/plugins-reference#version-management).                                  |\n    | `author`      | Optional. Helpful for attribution.                                                                                     |\n\n    For additional fields like `homepage`, `repository`, and `license`, see the [full manifest schema](/en/plugins-reference#plugin-manifest-schema).\n  </Step>\n\n  <Step title=\"Add a slash command\">\n    Slash commands are Markdown files in the `commands/` directory. The filename becomes the slash command name, prefixed with the plugin's namespace (`hello.md` in a plugin named `my-first-plugin` creates `/my-first-plugin:hello`). The Markdown content tells Claude how to respond when someone runs the slash command.\n\n    Create a `commands` directory in your plugin folder:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin/commands\n    ```\n\n    Then create `my-first-plugin/commands/hello.md` with this content:\n\n    ```markdown my-first-plugin/commands/hello.md theme={null}\n    ---\n    description: Greet the user with a friendly message\n    ---\n\n    # Hello Command\n\n    Greet the user warmly and ask how you can help them today.\n    ```\n  </Step>\n\n  <Step title=\"Test your plugin\">\n    Run Claude Code with the `--plugin-dir` flag to load your plugin:\n\n    ```bash  theme={null}\n    claude --plugin-dir ./my-first-plugin\n    ```\n\n    Once Claude Code starts, try your new command:\n\n    ```shell  theme={null}\n    /my-first-plugin:hello\n    ```\n\n    You'll see Claude respond with a greeting. Run `/help` to see your command listed under the plugin namespace.\n\n    <Note>\n      **Why namespacing?** Plugin slash commands are always namespaced (like `/greet:hello`) to prevent conflicts when multiple plugins have commands with the same name.\n\n      To change the namespace prefix, update the `name` field in `plugin.json`.\n    </Note>\n  </Step>\n\n  <Step title=\"Add slash command arguments\">\n    Make your slash command dynamic by accepting user input. The `$ARGUMENTS` placeholder captures any text the user provides after the slash command.\n\n    Update your `hello.md` file:\n\n    ```markdown my-first-plugin/commands/hello.md theme={null}\n    ---\n    description: Greet the user with a personalized message\n    ---\n\n    # Hello Command\n\n    Greet the user named \"$ARGUMENTS\" warmly and ask how you can help them today. Make the greeting personal and encouraging.\n    ```\n\n    Restart Claude Code to pick up the changes, then try the command with your name:\n\n    ```shell  theme={null}\n    /my-first-plugin:hello Alex\n    ```\n\n    Claude will greet you by name. For more argument options like `$1`, `$2` for individual parameters, see [Slash commands](/en/slash-commands).\n  </Step>\n</Steps>\n\nYou've successfully created and tested a plugin with these key components:\n\n* **Plugin manifest** (`.claude-plugin/plugin.json`): describes your plugin's metadata\n* **Commands directory** (`commands/`): contains your custom slash commands\n* **Command arguments** (`$ARGUMENTS`): captures user input for dynamic behavior\n\n<Tip>\n  The `--plugin-dir` flag is useful for development and testing. When you're ready to share your plugin with others, see [Create and distribute a plugin marketplace](/en/plugin-marketplaces).\n</Tip>\n\n## Plugin structure overview\n\nYou've created a plugin with a slash command, but plugins can include much more: custom agents, Skills, hooks, MCP servers, and LSP servers.\n\n<Warning>\n  **Common mistake**: Don't put `commands/`, `agents/`, `skills/`, or `hooks/` inside the `.claude-plugin/` directory. Only `plugin.json` goes inside `.claude-plugin/`. All other directories must be at the plugin root level.\n</Warning>\n\n| Directory         | Location    | Purpose                                         |\n| :---------------- | :---------- | :---------------------------------------------- |\n| `.claude-plugin/` | Plugin root | Contains only `plugin.json` manifest (required) |\n| `commands/`       | Plugin root | Slash commands as Markdown files                |\n| `agents/`         | Plugin root | Custom agent definitions                        |\n| `skills/`         | Plugin root | Agent Skills with `SKILL.md` files              |\n| `hooks/`          | Plugin root | Event handlers in `hooks.json`                  |\n| `.mcp.json`       | Plugin root | MCP server configurations                       |\n| `.lsp.json`       | Plugin root | LSP server configurations for code intelligence |\n\n<Note>\n  **Next steps**: Ready to add more features? Jump to [Develop more complex plugins](#develop-more-complex-plugins) to add agents, hooks, MCP servers, and LSP servers. For complete technical specifications of all plugin components, see [Plugins reference](/en/plugins-reference).\n</Note>\n\n## Develop more complex plugins\n\nOnce you're comfortable with basic plugins, you can create more sophisticated extensions.\n\n### Add Skills to your plugin\n\nPlugins can include [Agent Skills](/en/skills) to extend Claude's capabilities. Skills are model-invoked: Claude automatically uses them based on the task context.\n\nAdd a `skills/` directory at your plugin root with Skill folders containing `SKILL.md` files:\n\n```\nmy-plugin/\n .claude-plugin/\n    plugin.json\n skills/\n     code-review/\n         SKILL.md\n```\n\nEach `SKILL.md` needs frontmatter with `name` and `description` fields, followed by instructions:\n\n```yaml  theme={null}\n---\nname: code-review\ndescription: Reviews code for best practices and potential issues. Use when reviewing code, checking PRs, or analyzing code quality.\n---\n\nWhen reviewing code, check for:\n1. Code organization and structure\n2. Error handling\n3. Security concerns\n4. Test coverage\n```\n\nAfter installing the plugin, restart Claude Code to load the Skills. For complete Skill authoring guidance including progressive disclosure and tool restrictions, see [Agent Skills](/en/skills).\n\n### Add LSP servers to your plugin\n\n<Tip>\n  For common languages like TypeScript, Python, and Rust, install the pre-built LSP plugins from the official marketplace. Create custom LSP plugins only when you need support for languages not already covered.\n</Tip>\n\nLSP (Language Server Protocol) plugins give Claude real-time code intelligence. If you need to support a language that doesn't have an official LSP plugin, you can create your own by adding an `.lsp.json` file to your plugin:\n\n```json .lsp.json theme={null}\n{\n  \"go\": {\n    \"command\": \"gopls\",\n    \"args\": [\"serve\"],\n    \"extensionToLanguage\": {\n      \".go\": \"go\"\n    }\n  }\n}\n```\n\nUsers installing your plugin must have the language server binary installed on their machine.\n\nFor complete LSP configuration options, see [LSP servers](/en/plugins-reference#lsp-servers).\n\n### Organize complex plugins\n\nFor plugins with many components, organize your directory structure by functionality. For complete directory layouts and organization patterns, see [Plugin directory structure](/en/plugins-reference#plugin-directory-structure).\n\n### Test your plugins locally\n\nUse the `--plugin-dir` flag to test plugins during development. This loads your plugin directly without requiring installation.\n\n```bash  theme={null}\nclaude --plugin-dir ./my-plugin\n```\n\nAs you make changes to your plugin, restart Claude Code to pick up the updates. Test your plugin components:\n\n* Try your commands with `/command-name`\n* Check that agents appear in `/agents`\n* Verify hooks work as expected\n\n<Tip>\n  You can load multiple plugins at once by specifying the flag multiple times:\n\n  ```bash  theme={null}\n  claude --plugin-dir ./plugin-one --plugin-dir ./plugin-two\n  ```\n</Tip>\n\n### Debug plugin issues\n\nIf your plugin isn't working as expected:\n\n1. **Check the structure**: Ensure your directories are at the plugin root, not inside `.claude-plugin/`\n2. **Test components individually**: Check each command, agent, and hook separately\n3. **Use validation and debugging tools**: See [Debugging and development tools](/en/plugins-reference#debugging-and-development-tools) for CLI commands and troubleshooting techniques\n\n### Share your plugins\n\nWhen your plugin is ready to share:\n\n1. **Add documentation**: Include a `README.md` with installation and usage instructions\n2. **Version your plugin**: Use [semantic versioning](/en/plugins-reference#version-management) in your `plugin.json`\n3. **Create or use a marketplace**: Distribute through [plugin marketplaces](/en/plugin-marketplaces) for installation\n4. **Test with others**: Have team members test the plugin before wider distribution\n\nOnce your plugin is in a marketplace, others can install it using the instructions in [Discover and install plugins](/en/discover-plugins).\n\n<Note>\n  For complete technical specifications, debugging techniques, and distribution strategies, see [Plugins reference](/en/plugins-reference).\n</Note>\n\n## Convert existing configurations to plugins\n\nIf you already have custom commands, Skills, or hooks in your `.claude/` directory, you can convert them into a plugin for easier sharing and distribution.\n\n### Migration steps\n\n<Steps>\n  <Step title=\"Create the plugin structure\">\n    Create a new plugin directory:\n\n    ```bash  theme={null}\n    mkdir -p my-plugin/.claude-plugin\n    ```\n\n    Create the manifest file at `my-plugin/.claude-plugin/plugin.json`:\n\n    ```json my-plugin/.claude-plugin/plugin.json theme={null}\n    {\n      \"name\": \"my-plugin\",\n      \"description\": \"Migrated from standalone configuration\",\n      \"version\": \"1.0.0\"\n    }\n    ```\n  </Step>\n\n  <Step title=\"Copy your existing files\">\n    Copy your existing configurations to the plugin directory:\n\n    ```bash  theme={null}\n    # Copy commands\n    cp -r .claude/commands my-plugin/\n\n    # Copy agents (if any)\n    cp -r .claude/agents my-plugin/\n\n    # Copy skills (if any)\n    cp -r .claude/skills my-plugin/\n    ```\n  </Step>\n\n  <Step title=\"Migrate hooks\">\n    If you have hooks in your settings, create a hooks directory:\n\n    ```bash  theme={null}\n    mkdir my-plugin/hooks\n    ```\n\n    Create `my-plugin/hooks/hooks.json` with your hooks configuration. Copy the `hooks` object from your `.claude/settings.json` or `settings.local.json`the format is the same:\n\n    ```json my-plugin/hooks/hooks.json theme={null}\n    {\n      \"hooks\": {\n        \"PostToolUse\": [\n          {\n            \"matcher\": \"Write|Edit\",\n            \"hooks\": [{ \"type\": \"command\", \"command\": \"npm run lint:fix $FILE\" }]\n          }\n        ]\n      }\n    }\n    ```\n  </Step>\n\n  <Step title=\"Test your migrated plugin\">\n    Load your plugin to verify everything works:\n\n    ```bash  theme={null}\n    claude --plugin-dir ./my-plugin\n    ```\n\n    Test each component: run your commands, check agents appear in `/agents`, and verify hooks trigger correctly.\n  </Step>\n</Steps>\n\n### What changes when migrating\n\n| Standalone (`.claude/`)       | Plugin                           |\n| :---------------------------- | :------------------------------- |\n| Only available in one project | Can be shared via marketplaces   |\n| Files in `.claude/commands/`  | Files in `plugin-name/commands/` |\n| Hooks in `settings.json`      | Hooks in `hooks/hooks.json`      |\n| Must manually copy to share   | Install with `/plugin install`   |\n\n<Note>\n  After migrating, you can remove the original files from `.claude/` to avoid duplicates. The plugin version will take precedence when loaded.\n</Note>\n\n## Next steps\n\nNow that you understand Claude Code's plugin system, here are suggested paths for different goals:\n\n### For plugin users\n\n* [Discover and install plugins](/en/discover-plugins): browse marketplaces and install plugins\n* [Configure team marketplaces](/en/discover-plugins#configure-team-marketplaces): set up repository-level plugins for your team\n\n### For plugin developers\n\n* [Create and distribute a marketplace](/en/plugin-marketplaces): package and share your plugins\n* [Plugins reference](/en/plugins-reference): complete technical specifications\n* Dive deeper into specific plugin components:\n  * [Slash commands](/en/slash-commands): command development details\n  * [Subagents](/en/sub-agents): agent configuration and capabilities\n  * [Agent Skills](/en/skills): extend Claude's capabilities\n  * [Hooks](/en/hooks): event handling and automation\n  * [MCP](/en/mcp): external tool integration\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt"}]},"uuid":"8b6dac0a-7038-4a7e-82c8-5d76c5f3b387","timestamp":"2026-01-18T08:08:54.633Z","toolUseResult":{"bytes":16908,"code":200,"codeText":"OK","result":"# Create plugins\n\n> Create custom plugins to extend Claude Code with slash commands, agents, hooks, Skills, and MCP servers.\n\nPlugins let you extend Claude Code with custom functionality that can be shared across projects and teams. This guide covers creating your own plugins with slash commands, agents, Skills, hooks, and MCP servers.\n\nLooking to install existing plugins? See [Discover and install plugins](/en/discover-plugins). For complete technical specifications, see [Plugins reference](/en/plugins-reference).\n\n## When to use plugins vs standalone configuration\n\nClaude Code supports two ways to add custom slash commands, agents, and hooks:\n\n| Approach                                                    | Slash command names  | Best for                                                                                        |\n| :---------------------------------------------------------- | :------------------- | :---------------------------------------------------------------------------------------------- |\n| **Standalone** (`.claude/` directory)                       | `/hello`             | Personal workflows, project-specific customizations, quick experiments                          |\n| **Plugins** (directories with `.claude-plugin/plugin.json`) | `/plugin-name:hello` | Sharing with teammates, distributing to community, versioned releases, reusable across projects |\n\n**Use standalone configuration when**:\n\n* You're customizing Claude Code for a single project\n* The configuration is personal and doesn't need to be shared\n* You're experimenting with slash commands or hooks before packaging them\n* You want short slash command names like `/hello` or `/review`\n\n**Use plugins when**:\n\n* You want to share functionality with your team or community\n* You need the same slash commands/agents across multiple projects\n* You want version control and easy updates for your extensions\n* You're distributing through a marketplace\n* You're okay with namespaced slash commands like `/my-plugin:hello` (namespacing prevents conflicts between plugins)\n\n<Tip>\n  Start with standalone configuration in `.claude/` for quick iteration, then [convert to a plugin](#convert-existing-configurations-to-plugins) when you're ready to share.\n</Tip>\n\n## Quickstart\n\nThis quickstart walks you through creating a plugin with a custom slash command. You'll create a manifest (the configuration file that defines your plugin), add a slash command, and test it locally using the `--plugin-dir` flag.\n\n### Prerequisites\n\n* Claude Code [installed and authenticated](/en/quickstart#step-1-install-claude-code)\n* Claude Code version 1.0.33 or later (run `claude --version` to check)\n\n<Note>\n  If you don't see the `/plugin` command, update Claude Code to the latest version. See [Troubleshooting](/en/troubleshooting) for upgrade instructions.\n</Note>\n\n### Create your first plugin\n\n<Steps>\n  <Step title=\"Create the plugin directory\">\n    Every plugin lives in its own directory containing a manifest and your custom commands, agents, or hooks. Create one now:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin\n    ```\n  </Step>\n\n  <Step title=\"Create the plugin manifest\">\n    The manifest file at `.claude-plugin/plugin.json` defines your plugin's identity: its name, description, and version. Claude Code uses this metadata to display your plugin in the plugin manager.\n\n    Create the `.claude-plugin` directory inside your plugin folder:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin/.claude-plugin\n    ```\n\n    Then create `my-first-plugin/.claude-plugin/plugin.json` with this content:\n\n    ```json my-first-plugin/.claude-plugin/plugin.json theme={null}\n    {\n    \"name\": \"my-first-plugin\",\n    \"description\": \"A greeting plugin to learn the basics\",\n    \"version\": \"1.0.0\",\n    \"author\": {\n    \"name\": \"Your Name\"\n    }\n    }\n    ```\n\n    | Field         | Purpose                                                                                                                |\n    | :------------ | :--------------------------------------------------------------------------------------------------------------------- |\n    | `name`        | Unique identifier and slash command namespace. Slash commands are prefixed with this (e.g., `/my-first-plugin:hello`). |\n    | `description` | Shown in the plugin manager when browsing or installing plugins.                                                       |\n    | `version`     | Track releases using [semantic versioning](/en/plugins-reference#version-management).                                  |\n    | `author`      | Optional. Helpful for attribution.                                                                                     |\n\n    For additional fields like `homepage`, `repository`, and `license`, see the [full manifest schema](/en/plugins-reference#plugin-manifest-schema).\n  </Step>\n\n  <Step title=\"Add a slash command\">\n    Slash commands are Markdown files in the `commands/` directory. The filename becomes the slash command name, prefixed with the plugin's namespace (`hello.md` in a plugin named `my-first-plugin` creates `/my-first-plugin:hello`). The Markdown content tells Claude how to respond when someone runs the slash command.\n\n    Create a `commands` directory in your plugin folder:\n\n    ```bash  theme={null}\n    mkdir my-first-plugin/commands\n    ```\n\n    Then create `my-first-plugin/commands/hello.md` with this content:\n\n    ```markdown my-first-plugin/commands/hello.md theme={null}\n    ---\n    description: Greet the user with a friendly message\n    ---\n\n    # Hello Command\n\n    Greet the user warmly and ask how you can help them today.\n    ```\n  </Step>\n\n  <Step title=\"Test your plugin\">\n    Run Claude Code with the `--plugin-dir` flag to load your plugin:\n\n    ```bash  theme={null}\n    claude --plugin-dir ./my-first-plugin\n    ```\n\n    Once Claude Code starts, try your new command:\n\n    ```shell  theme={null}\n    /my-first-plugin:hello\n    ```\n\n    You'll see Claude respond with a greeting. Run `/help` to see your command listed under the plugin namespace.\n\n    <Note>\n      **Why namespacing?** Plugin slash commands are always namespaced (like `/greet:hello`) to prevent conflicts when multiple plugins have commands with the same name.\n\n      To change the namespace prefix, update the `name` field in `plugin.json`.\n    </Note>\n  </Step>\n\n  <Step title=\"Add slash command arguments\">\n    Make your slash command dynamic by accepting user input. The `$ARGUMENTS` placeholder captures any text the user provides after the slash command.\n\n    Update your `hello.md` file:\n\n    ```markdown my-first-plugin/commands/hello.md theme={null}\n    ---\n    description: Greet the user with a personalized message\n    ---\n\n    # Hello Command\n\n    Greet the user named \"$ARGUMENTS\" warmly and ask how you can help them today. Make the greeting personal and encouraging.\n    ```\n\n    Restart Claude Code to pick up the changes, then try the command with your name:\n\n    ```shell  theme={null}\n    /my-first-plugin:hello Alex\n    ```\n\n    Claude will greet you by name. For more argument options like `$1`, `$2` for individual parameters, see [Slash commands](/en/slash-commands).\n  </Step>\n</Steps>\n\nYou've successfully created and tested a plugin with these key components:\n\n* **Plugin manifest** (`.claude-plugin/plugin.json`): describes your plugin's metadata\n* **Commands directory** (`commands/`): contains your custom slash commands\n* **Command arguments** (`$ARGUMENTS`): captures user input for dynamic behavior\n\n<Tip>\n  The `--plugin-dir` flag is useful for development and testing. When you're ready to share your plugin with others, see [Create and distribute a plugin marketplace](/en/plugin-marketplaces).\n</Tip>\n\n## Plugin structure overview\n\nYou've created a plugin with a slash command, but plugins can include much more: custom agents, Skills, hooks, MCP servers, and LSP servers.\n\n<Warning>\n  **Common mistake**: Don't put `commands/`, `agents/`, `skills/`, or `hooks/` inside the `.claude-plugin/` directory. Only `plugin.json` goes inside `.claude-plugin/`. All other directories must be at the plugin root level.\n</Warning>\n\n| Directory         | Location    | Purpose                                         |\n| :---------------- | :---------- | :---------------------------------------------- |\n| `.claude-plugin/` | Plugin root | Contains only `plugin.json` manifest (required) |\n| `commands/`       | Plugin root | Slash commands as Markdown files                |\n| `agents/`         | Plugin root | Custom agent definitions                        |\n| `skills/`         | Plugin root | Agent Skills with `SKILL.md` files              |\n| `hooks/`          | Plugin root | Event handlers in `hooks.json`                  |\n| `.mcp.json`       | Plugin root | MCP server configurations                       |\n| `.lsp.json`       | Plugin root | LSP server configurations for code intelligence |\n\n<Note>\n  **Next steps**: Ready to add more features? Jump to [Develop more complex plugins](#develop-more-complex-plugins) to add agents, hooks, MCP servers, and LSP servers. For complete technical specifications of all plugin components, see [Plugins reference](/en/plugins-reference).\n</Note>\n\n## Develop more complex plugins\n\nOnce you're comfortable with basic plugins, you can create more sophisticated extensions.\n\n### Add Skills to your plugin\n\nPlugins can include [Agent Skills](/en/skills) to extend Claude's capabilities. Skills are model-invoked: Claude automatically uses them based on the task context.\n\nAdd a `skills/` directory at your plugin root with Skill folders containing `SKILL.md` files:\n\n```\nmy-plugin/\n .claude-plugin/\n    plugin.json\n skills/\n     code-review/\n         SKILL.md\n```\n\nEach `SKILL.md` needs frontmatter with `name` and `description` fields, followed by instructions:\n\n```yaml  theme={null}\n---\nname: code-review\ndescription: Reviews code for best practices and potential issues. Use when reviewing code, checking PRs, or analyzing code quality.\n---\n\nWhen reviewing code, check for:\n1. Code organization and structure\n2. Error handling\n3. Security concerns\n4. Test coverage\n```\n\nAfter installing the plugin, restart Claude Code to load the Skills. For complete Skill authoring guidance including progressive disclosure and tool restrictions, see [Agent Skills](/en/skills).\n\n### Add LSP servers to your plugin\n\n<Tip>\n  For common languages like TypeScript, Python, and Rust, install the pre-built LSP plugins from the official marketplace. Create custom LSP plugins only when you need support for languages not already covered.\n</Tip>\n\nLSP (Language Server Protocol) plugins give Claude real-time code intelligence. If you need to support a language that doesn't have an official LSP plugin, you can create your own by adding an `.lsp.json` file to your plugin:\n\n```json .lsp.json theme={null}\n{\n  \"go\": {\n    \"command\": \"gopls\",\n    \"args\": [\"serve\"],\n    \"extensionToLanguage\": {\n      \".go\": \"go\"\n    }\n  }\n}\n```\n\nUsers installing your plugin must have the language server binary installed on their machine.\n\nFor complete LSP configuration options, see [LSP servers](/en/plugins-reference#lsp-servers).\n\n### Organize complex plugins\n\nFor plugins with many components, organize your directory structure by functionality. For complete directory layouts and organization patterns, see [Plugin directory structure](/en/plugins-reference#plugin-directory-structure).\n\n### Test your plugins locally\n\nUse the `--plugin-dir` flag to test plugins during development. This loads your plugin directly without requiring installation.\n\n```bash  theme={null}\nclaude --plugin-dir ./my-plugin\n```\n\nAs you make changes to your plugin, restart Claude Code to pick up the updates. Test your plugin components:\n\n* Try your commands with `/command-name`\n* Check that agents appear in `/agents`\n* Verify hooks work as expected\n\n<Tip>\n  You can load multiple plugins at once by specifying the flag multiple times:\n\n  ```bash  theme={null}\n  claude --plugin-dir ./plugin-one --plugin-dir ./plugin-two\n  ```\n</Tip>\n\n### Debug plugin issues\n\nIf your plugin isn't working as expected:\n\n1. **Check the structure**: Ensure your directories are at the plugin root, not inside `.claude-plugin/`\n2. **Test components individually**: Check each command, agent, and hook separately\n3. **Use validation and debugging tools**: See [Debugging and development tools](/en/plugins-reference#debugging-and-development-tools) for CLI commands and troubleshooting techniques\n\n### Share your plugins\n\nWhen your plugin is ready to share:\n\n1. **Add documentation**: Include a `README.md` with installation and usage instructions\n2. **Version your plugin**: Use [semantic versioning](/en/plugins-reference#version-management) in your `plugin.json`\n3. **Create or use a marketplace**: Distribute through [plugin marketplaces](/en/plugin-marketplaces) for installation\n4. **Test with others**: Have team members test the plugin before wider distribution\n\nOnce your plugin is in a marketplace, others can install it using the instructions in [Discover and install plugins](/en/discover-plugins).\n\n<Note>\n  For complete technical specifications, debugging techniques, and distribution strategies, see [Plugins reference](/en/plugins-reference).\n</Note>\n\n## Convert existing configurations to plugins\n\nIf you already have custom commands, Skills, or hooks in your `.claude/` directory, you can convert them into a plugin for easier sharing and distribution.\n\n### Migration steps\n\n<Steps>\n  <Step title=\"Create the plugin structure\">\n    Create a new plugin directory:\n\n    ```bash  theme={null}\n    mkdir -p my-plugin/.claude-plugin\n    ```\n\n    Create the manifest file at `my-plugin/.claude-plugin/plugin.json`:\n\n    ```json my-plugin/.claude-plugin/plugin.json theme={null}\n    {\n      \"name\": \"my-plugin\",\n      \"description\": \"Migrated from standalone configuration\",\n      \"version\": \"1.0.0\"\n    }\n    ```\n  </Step>\n\n  <Step title=\"Copy your existing files\">\n    Copy your existing configurations to the plugin directory:\n\n    ```bash  theme={null}\n    # Copy commands\n    cp -r .claude/commands my-plugin/\n\n    # Copy agents (if any)\n    cp -r .claude/agents my-plugin/\n\n    # Copy skills (if any)\n    cp -r .claude/skills my-plugin/\n    ```\n  </Step>\n\n  <Step title=\"Migrate hooks\">\n    If you have hooks in your settings, create a hooks directory:\n\n    ```bash  theme={null}\n    mkdir my-plugin/hooks\n    ```\n\n    Create `my-plugin/hooks/hooks.json` with your hooks configuration. Copy the `hooks` object from your `.claude/settings.json` or `settings.local.json`the format is the same:\n\n    ```json my-plugin/hooks/hooks.json theme={null}\n    {\n      \"hooks\": {\n        \"PostToolUse\": [\n          {\n            \"matcher\": \"Write|Edit\",\n            \"hooks\": [{ \"type\": \"command\", \"command\": \"npm run lint:fix $FILE\" }]\n          }\n        ]\n      }\n    }\n    ```\n  </Step>\n\n  <Step title=\"Test your migrated plugin\">\n    Load your plugin to verify everything works:\n\n    ```bash  theme={null}\n    claude --plugin-dir ./my-plugin\n    ```\n\n    Test each component: run your commands, check agents appear in `/agents`, and verify hooks trigger correctly.\n  </Step>\n</Steps>\n\n### What changes when migrating\n\n| Standalone (`.claude/`)       | Plugin                           |\n| :---------------------------- | :------------------------------- |\n| Only available in one project | Can be shared via marketplaces   |\n| Files in `.claude/commands/`  | Files in `plugin-name/commands/` |\n| Hooks in `settings.json`      | Hooks in `hooks/hooks.json`      |\n| Must manually copy to share   | Install with `/plugin install`   |\n\n<Note>\n  After migrating, you can remove the original files from `.claude/` to avoid duplicates. The plugin version will take precedence when loaded.\n</Note>\n\n## Next steps\n\nNow that you understand Claude Code's plugin system, here are suggested paths for different goals:\n\n### For plugin users\n\n* [Discover and install plugins](/en/discover-plugins): browse marketplaces and install plugins\n* [Configure team marketplaces](/en/discover-plugins#configure-team-marketplaces): set up repository-level plugins for your team\n\n### For plugin developers\n\n* [Create and distribute a marketplace](/en/plugin-marketplaces): package and share your plugins\n* [Plugins reference](/en/plugins-reference): complete technical specifications\n* Dive deeper into specific plugin components:\n  * [Slash commands](/en/slash-commands): command development details\n  * [Subagents](/en/sub-agents): agent configuration and capabilities\n  * [Agent Skills](/en/skills): extend Claude's capabilities\n  * [Hooks](/en/hooks): event handling and automation\n  * [MCP](/en/mcp): external tool integration\n\n\n---\n\n> To find navigation and other pages in this documentation, fetch the llms.txt file at: https://code.claude.com/docs/llms.txt","durationMs":134,"url":"https://code.claude.com/docs/en/plugins.md"},"sourceToolAssistantUUID":"cec265c6-45ff-4b49-8ef8-25e80c5c5b0b"}
{"parentUuid":"8b6dac0a-7038-4a7e-82c8-5d76c5f3b387","isSidechain":true,"userType":"external","cwd":"/Users/liuhanwen/.claude","sessionId":"00bc8363-0ddb-40cd-b721-b49a4a97a59f","version":"2.1.12","gitBranch":"","agentId":"a0feadd","message":{"model":"claude-haiku-4-5-20251001","id":"msg_01Lfo7PzNYHJxYEPwnSP4QaL","type":"message","role":"assistant","content":[{"type":"text","text":"Perfect! Now I have comprehensive documentation on all the extension mechanisms. Let me compile this into a detailed, well-organized guide for the user.\n\n## Comprehensive Guide to Enhancing Claude Code\n\nI've gathered detailed information on all the ways to extend Claude Code's capabilities. Here's a comprehensive overview:\n\n---\n\n## 1. MCP (Model Context Protocol) Servers\n\nMCP servers are the most powerful way to extend Claude Code with external tools and data sources.\n\n### What MCP Servers Do\n\nMCP servers connect Claude Code to external tools, databases, and APIs. They allow you to ask Claude to:\n- Implement features from issue trackers (e.g., \"Add the feature from JIRA ENG-4521\")\n- Analyze monitoring data (e.g., query Sentry error logs)\n- Query databases directly (e.g., PostgreSQL, MongoDB)\n- Integrate with design tools (Figma, etc.)\n- Automate workflows (Gmail, Slack, etc.)\n\n### How to Add MCP Servers\n\nThere are three options depending on your needs:\n\n**Option 1: HTTP Remote Server (Recommended)**\n```bash\nclaude mcp add --transport http <name> <url>\n\n# Example\nclaude mcp add --transport http github https://api.githubcopilot.com/mcp/\n```\n\n**Option 2: SSE (Server-Sent Events) Remote Server**\n```bash\n# Deprecated but still supported\nclaude mcp add --transport sse <name> <url>\n```\n\n**Option 3: Local Stdio Server**\n```bash\nclaude mcp add --transport stdio --env KEY=value <name> -- <command> [args]\n\n# Example with npm\nclaude mcp add --transport stdio postgresql \\\n  --env DB_URL=\"postgresql://user:pass@localhost/db\" \\\n  -- npx @bytebase/dbhub\n```\n\n### Managing MCP Servers\n\n```bash\nclaude mcp list                    # List all configured servers\nclaude mcp get <server-name>       # Get details about a server\nclaude mcp remove <server-name>    # Remove a server\n```\n\nWithin Claude Code:\n```\n/mcp    # View, authenticate, and manage all MCP servers\n```\n\n### Installation Scopes\n\nConfigure where MCP servers are stored and who can access them:\n\n**Local Scope (Default)**\n```bash\nclaude mcp add --scope local --transport http myserver https://api.example.com\n```\n- Stored in `~/.claude.json`\n- Private to you, only in current project\n\n**Project Scope**\n```bash\nclaude mcp add --scope project --transport http myserver https://api.example.com\n```\n- Stored in `.mcp.json` at project root\n- Committed to git, shared with team\n- Requires approval before use\n\n**User Scope**\n```bash\nclaude mcp add --scope user --transport http myserver https://api.example.com\n```\n- Stored in `~/.claude.json`\n- Available across all your projects\n\n### Popular MCP Servers\n\nSome commonly used MCP servers include:\n- **GitHub**: Code reviews, PR management, issue tracking\n- **Sentry**: Error monitoring and debugging\n- **Airtable**: Database operations\n- **Notion**: Document management\n- **PostgreSQL**: Direct database queries\n- **Stripe**: Payment processing\n\nVisit https://github.com/modelcontextprotocol/servers for hundreds more.\n\n### MCP Authentication\n\nFor OAuth-enabled servers:\n```\n/mcp\n# Select \"Authenticate\" for the server\n# Complete authentication in browser\n```\n\nTokens are stored securely and refreshed automatically.\n\n### Advanced MCP Configuration\n\n**With Authentication Headers**\n```bash\nclaude mcp add --transport http myapi https://api.example.com \\\n  --header \"Authorization: Bearer your-token\"\n```\n\n**From JSON Configuration**\n```bash\nclaude mcp add-json myserver '{\"type\":\"http\",\"url\":\"https://api.example.com\"}'\n```\n\n**Import from Claude Desktop**\n```bash\nclaude mcp add-from-claude-claude-desktop\n```\n\n---\n\n## 2. Hooks\n\nHooks are shell commands that execute at specific points in Claude Code's lifecycle, providing deterministic control over behavior.\n\n### Hook Events\n\n| Event              | Triggers When                                 | Use Cases                          |\n|------------------|-----------------------------------------------|----------------------------------|\n| `PreToolUse`     | Before Claude uses a tool                     | Block sensitive operations, validate commands |\n| `PostToolUse`    | After a tool completes                        | Auto-format code, post-processing |\n| `PermissionRequest` | When permission dialog appears              | Auto-approve/deny certain actions |\n| `UserPromptSubmit`  | When user submits a prompt                  | Add context, validate input       |\n| `Notification`   | When Claude sends notifications               | Custom notification handling      |\n| `Stop`           | When Claude finishes responding               | Cleanup, logging                  |\n| `SessionStart`   | Session starts or resumes                     | Setup environment variables       |\n| `SessionEnd`     | Session ends                                   | Cleanup, final logging            |\n| `PreCompact`     | Before context compaction                     | Pre-compaction actions           |\n\n### Creating Hooks\n\n**Via Interactive CLI**\n```\n/hooks\n# Select hook event\n# Select tool matcher\n# Add your hook command\n```\n\n**Direct Configuration**\n\nEdit `.claude/settings.json` or `~/.claude/settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"npx prettier --write \\\"$FILE\\\"\"\n          }\n        ]\n      }\n    ],\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 validate_command.py\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Hook Examples\n\n**Code Formatting on Save**\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"jq -r '.tool_input.file_path' | { read f; if [[ \\\"$f\\\" == *.ts ]]; then npx prettier --write \\\"$f\\\"; fi; }\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**File Protection (Block Sensitive Files)**\n```json\n{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 -c \\\"import json, sys; data=json.load(sys.stdin); path=data.get('tool_input',{}).get('file_path',''); sys.exit(2 if any(p in path for p in ['.env', 'package-lock.json']) else 0)\\\"\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n**Command Logging**\n```bash\n/hooks\n# Select PreToolUse\n# Add matcher: Bash\n# Add command: jq -r '.tool_input.command' >> ~/.claude/commands.log\n```\n\n### Scope Levels for Hooks\n\n- **User scope** (`~/.claude/settings.json`): Apply to all projects\n- **Project scope** (`.claude/settings.json`): Apply only in this project\n- **Local scope** (`.claude/settings.local.json`): Personal overrides (not committed)\n\n---\n\n## 3. Custom Slash Commands / Skills\n\nThere are two ways to create reusable capabilities: slash commands (quick, explicit) and Skills (complex, auto-discovered).\n\n### Slash Commands\n\n**Simple, frequently-used prompts that you invoke explicitly with `/command`**\n\n**Location**\n- Project: `.claude/commands/command-name.md`\n- Personal: `~/.claude/commands/command-name.md`\n\n**Basic Example**\n```markdown\n# .claude/commands/optimize.md\n\n---\ndescription: Analyze code for performance issues and suggest optimizations\n---\n\n## Task\n\nAnalyze the provided code for performance bottlenecks and suggest optimizations.\n\nFocus on:\n1. Time complexity\n2. Memory usage\n3. Unnecessary computations\n4. Caching opportunities\n```\n\n**With Arguments**\n```markdown\n# .claude/commands/fix-issue.md\n\n---\ndescription: Fix a GitHub issue\nargument-hint: [issue-number]\n---\n\nFix GitHub issue #$1 following our coding standards.\n\nInclude:\n- Unit tests\n- Updated documentation\n- Changelog entry\n```\n\n**With Bash Execution**\n```markdown\n# .claude/commands/commit.md\n\n---\nallowed-tools: Bash(git:*), Bash(git status:*), Bash(git diff:*)\ndescription: Create a git commit from staged changes\n---\n\n## Context\n\nCurrent status:\n!`git status`\n\nStaged changes:\n!`git diff --staged`\n\n## Task\n\nCreate a meaningful commit message and commit the staged changes.\n```\n\n**Using File References**\n```markdown\n# Review the implementation in @src/utils/helpers.js\n\nCompare @src/old-version.js with @src/new-version.js\n```\n\n### Agent Skills\n\n**Complex, multi-file capabilities that Claude discovers automatically based on context**\n\n**Location**\n- Project: `.claude/skills/skill-name/SKILL.md`\n- Personal: `~/.claude/skills/skill-name/SKILL.md`\n\n**Basic Skill Example**\n```yaml\n# .claude/skills/code-review/SKILL.md\n\n---\nname: code-review\ndescription: Reviews code for best practices, security, and performance. Use when reviewing code, PRs, or analyzing code quality.\nallowed-tools: Read, Grep, Glob\n---\n\n# Code Review Skill\n\nWhen reviewing code, evaluate:\n\n1. **Security**: Potential vulnerabilities, input validation, authentication\n2. **Performance**: Optimization opportunities, complexity analysis\n3. **Maintainability**: Code clarity, documentation, test coverage\n4. **Best Practices**: Style consistency, error handling, patterns\n\nProvide actionable feedback with examples.\n```\n\n**Multi-File Skill with Supporting Documents**\n```\ncode-review/\n SKILL.md (overview and main instructions)\n SECURITY.md (security checklist)\n PATTERNS.md (common patterns and anti-patterns)\n scripts/\n     run-linters.sh\n```\n\n**SKILL.md with Progressive Disclosure**\n```yaml\n---\nname: pdf-processing\ndescription: Extract text, fill forms, merge PDFs. Use when working with PDF files or document processing.\nallowed-tools: Read, Bash(python:*)\n---\n\n# PDF Processing\n\n## Quick Start\n\nExtract text:\n```python\nimport pdfplumber\nwith pdfplumber.open(\"doc.pdf\") as pdf:\n    text = pdf.pages[0].extract_text()\n```\n\n## Advanced Tasks\n\nFor form filling, see [FORMS.md](FORMS.md).\nFor detailed API reference, see [REFERENCE.md](REFERENCE.md).\n```\n\n### Skills vs Slash Commands\n\n| Aspect | Slash Commands | Skills |\n|--------|--------|--------|\n| **Invocation** | Manual `/command` | Auto-discovered by Claude |\n| **Complexity** | Simple single-file prompts | Complex multi-file capabilities |\n| **Use Case** | Quick reminders, templates | Comprehensive workflows |\n| **Files** | One `.md` file | Directory with SKILL.md + resources |\n| **Example** | `/optimize` prompt | PDF processing with validation scripts |\n\n---\n\n## 4. Settings and Configuration\n\nClaude Code's configuration system uses a hierarchical scope approach.\n\n### Configuration Scopes\n\n**Managed (Highest Priority)**\n- System-wide: `/Library/Application Support/ClaudeCode/` (macOS) or `/etc/claude-code/` (Linux)\n- Deployed by IT/DevOps\n- Cannot be overridden\n\n**User**\n- `~/.claude/settings.json`\n- Applies to all projects\n- Personal preferences\n\n**Project**\n- `.claude/settings.json`\n- Shared with team via git\n- Team-specific configuration\n\n**Local (Lowest Priority)**\n- `.claude/settings.local.json`\n- Personal project overrides\n- Not committed (gitignored)\n\n### Key Settings\n\n**Permissions**\n```json\n{\n  \"permissions\": {\n    \"allow\": [\n      \"Bash(npm run lint)\",\n      \"Bash(npm run test:*)\",\n      \"Read(~/.zshrc)\"\n    ],\n    \"deny\": [\n      \"Bash(curl:*)\",\n      \"Read(./.env)\",\n      \"Read(./secrets/**)\"\n    ]\n  }\n}\n```\n\n**Environment Variables**\n```json\n{\n  \"env\": {\n    \"NODE_ENV\": \"development\",\n    \"DEBUG\": \"true\",\n    \"MY_API_KEY\": \"secret\"\n  }\n}\n```\n\n**Attribution**\n```json\n{\n  \"attribution\": {\n    \"commit\": \"Generated with Claude\\n\\nCo-Authored-By: AI <ai@example.com>\",\n    \"pr\": \"Generated with Claude Code\"\n  }\n}\n```\n\n**Status Line (Custom Status Display)**\n```json\n{\n  \"statusLine\": {\n    \"type\": \"command\",\n    \"command\": \"~/.claude/statusline.sh\"\n  }\n}\n```\n\n**Sandbox Configuration**\n```json\n{\n  \"sandbox\": {\n    \"enabled\": true,\n    \"excludedCommands\": [\"docker\", \"git\"],\n    \"network\": {\n      \"allowLocalBinding\": true\n    }\n  }\n}\n```\n\n**File Suggestion (Custom @ Autocomplete)**\n```json\n{\n  \"fileSuggestion\": {\n    \"type\": \"command\",\n    \"command\": \"~/.claude/file-suggestion.sh\"\n  }\n}\n```\n\n### Model Configuration\n\n```json\n{\n  \"model\": \"claude-opus-4-5-20251101\"\n}\n```\n\nOr via environment variable:\n```bash\nexport ANTHROPIC_MODEL=\"claude-opus-4-5-20251101\"\nclaude\n```\n\n### Excluding Sensitive Files\n\n```json\n{\n  \"permissions\": {\n    \"deny\": [\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\",\n      \"Read(./config/credentials.json)\"\n    ]\n  }\n}\n```\n\n### Managed Settings\n\nFor organizations, administrators can deploy:\n\n**managed-settings.json**\n- System-wide policies\n- Can't be overridden by users\n- Path: `/Library/Application Support/ClaudeCode/` (macOS) or `/etc/claude-code/` (Linux)\n\n```json\n{\n  \"allowedMcpServers\": [\n    { \"serverName\": \"github\" },\n    { \"serverUrl\": \"https://mcp.company.com/*\" }\n  ],\n  \"deniedMcpServers\": [\n    { \"serverName\": \"dangerous-server\" }\n  ],\n  \"allowManagedHooksOnly\": true\n}\n```\n\n---\n\n## 5. IDE Integrations\n\n### VS Code Extension (Recommended)\n\nThe VS Code extension provides a native graphical interface integrated directly into your IDE.\n\n**Install**\n```\nCmd+Shift+X (Mac) or Ctrl+Shift+X (Windows/Linux)\nSearch for \"Claude Code\"\nClick Install\n```\n\n**Key Features**\n- Inline diffs for code review\n- @-mention files with line ranges\n- Plan review before executing\n- Multiple conversations in tabs\n- Drag-and-drop panel positioning\n- Terminal mode option\n\n**Keyboard Shortcuts**\n| Shortcut | Action |\n|----------|--------|\n| `Cmd/Ctrl+Esc` | Toggle focus between editor and Claude |\n| `Cmd/Ctrl+Shift+Esc` | Open new conversation in tab |\n| `Alt+K` | Insert @-mention with line numbers |\n| `Cmd/Ctrl+N` | Start new conversation |\n\n**Configuration**\n```\nVS Code Settings (Cmd+,)  Extensions  Claude Code\n```\n\n**Extension Settings**\n- Selected Model\n- Use Terminal\n- Initial Permission Mode\n- Preferred Location\n- Autosave\n- Respect Git Ignore\n\n### JetBrains IDEs (IntelliJ, PyCharm, etc.)\n\n**Install via Marketplace**\n- Open JetBrains IDE\n- Plugins  Browse Repositories\n- Search \"Claude Code\"\n- Install and restart\n\n**Features**\n- Side panel or floating window\n- Terminal integration\n- Git integration for diffs\n\n### Using CLI in IDE\n\n**VS Code**\n```bash\n# Open integrated terminal (Cmd+` on Mac)\nclaude\n```\n\n**JetBrains**\n```bash\n# Terminal in IDE\nclaude\n```\n\nThe CLI automatically integrates with your IDE for features like diff viewing.\n\n---\n\n## 6. Plugins\n\nPlugins bundle multiple extension capabilities together for distribution and sharing.\n\n### Plugin Structure\n\n```\nmy-plugin/\n .claude-plugin/\n    plugin.json          # Required manifest\n commands/\n    hello.md            # Slash commands\n agents/\n    code-reviewer.md    # Custom agents\n skills/\n    code-review/\n        SKILL.md        # Agent Skills\n hooks/\n    hooks.json          # Event hooks\n .mcp.json               # MCP server configs\n README.md               # Documentation\n```\n\n### Plugin Manifest\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"description\": \"A plugin for code review and optimization\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Your Name\",\n    \"email\": \"email@example.com\"\n  },\n  \"homepage\": \"https://github.com/username/my-plugin\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/username/my-plugin.git\"\n  },\n  \"license\": \"MIT\"\n}\n```\n\n### Creating a Plugin\n\n**Step 1: Create structure**\n```bash\nmkdir -p my-plugin/.claude-plugin\nmkdir -p my-plugin/commands\n```\n\n**Step 2: Create manifest**\n```json\n{\n  \"name\": \"my-plugin\",\n  \"description\": \"My custom plugin\",\n  \"version\": \"1.0.0\"\n}\n```\n\n**Step 3: Add commands**\n```markdown\n# my-plugin/commands/review.md\n\n---\ndescription: Review code for quality issues\n---\n\nReview this code for:\n- Security vulnerabilities\n- Performance issues\n- Code style violations\n```\n\n**Step 4: Test locally**\n```bash\nclaude --plugin-dir ./my-plugin\n/my-plugin:review\n```\n\n### Plugin Commands\n\nSlash commands in plugins are namespaced to avoid conflicts:\n```\n/my-plugin:hello      # From plugin \"my-plugin\"\n/my-plugin:review     # Another command from same plugin\n```\n\n### Bundling in Plugins\n\n**Include MCP Servers**\n```json\n{\n  \"mcpServers\": {\n    \"postgres\": {\n      \"command\": \"/usr/local/bin/postgres-mcp\"\n    }\n  }\n}\n```\n\n**Include Skills**\n```\nmy-plugin/\n skills/\n     code-review/\n         SKILL.md\n```\n\n**Include Hooks**\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"npm run format\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Distributing Plugins\n\nCreate a plugin marketplace (GitHub repository) and add to Claude Code:\n\n```bash\n/plugin add-marketplace\n# Select \"GitHub\"\n# Enter repo: username/plugin-repo\n```\n\n---\n\n## 7. Other Extension Mechanisms\n\n### Subagents\n\nDelegate specialized tasks to separate AI contexts:\n\n**Create Custom Subagent**\n```yaml\n# .claude/agents/database-expert.md\n\n---\nname: database-expert\ndescription: Expert in database design and optimization\ncapabilities:\n  - Run SQL queries\n  - Design schemas\n  - Optimize performance\n---\n\nYou are a database expert specializing in query optimization and schema design.\n```\n\n### Memory Files (CLAUDE.md)\n\nStore project context and instructions:\n\n**Project Memory**\n```markdown\n# Project Guidelines\n\n## Coding Standards\n- Use TypeScript strict mode\n- ESLint configuration in `.eslintrc.json`\n- Tests required for all features\n\n## Architecture\n- Service layer pattern\n- React + Next.js frontend\n- Node.js backend\n\n## Important Files\n- Database schema: `/schema.sql`\n- API routes: `/src/pages/api`\n```\n\n**Modular Rules**\n```\n.claude/rules/\n typescript.md      # TypeScript-specific rules\n database.md        # Database guidelines\n frontend/\n     react.md       # React patterns\n```\n\n### Custom Output Styles\n\nControl how Claude formats responses:\n\n```yaml\n# ~/.claude/output-styles/explanatory.md\n\n---\nname: explanatory\n---\n\nProvide thorough explanations with examples.\nInclude:\n- Concept overview\n- Code examples\n- Common pitfalls\n```\n\n---\n\n## Best Practices for Extension\n\n1. **MCP Servers**: Use for external data/tools integration\n2. **Hooks**: Use for deterministic automation (formatting, validation)\n3. **Slash Commands**: Quick, frequently-used prompts you invoke manually\n4. **Skills**: Complex workflows Claude discovers automatically\n5. **Plugins**: Package and share extensions with teams/community\n6. **Settings**: Configure permissions, environment, and behavior\n7. **IDE Integration**: Use for graphical interface and better UX\n\n## Pro Tips\n\n- **Start simple**: Create standalone commands before bundling into plugins\n- **Use scopes**: Keep personal settings in `~/.claude/`, team settings in `.claude/`\n- **Progressive disclosure**: Large Skills should reference external files\n- **Security first**: Always deny sensitive paths in permissions\n- **Test locally**: Use `--plugin-dir` to test plugins before sharing\n- **Documentation**: Include clear descriptions for commands and Skills\n- **Naming**: Use descriptive names that clearly indicate what each extension does\n\nYour environment is already configured with several custom skills (`/init`, `/pr-comments`, `/statusline`, `/review`, `/security-review`) and MCP servers (`serena`, `claude-in-chrome`, `ide`). These demonstrate practical use cases you can learn from!"}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":6,"cache_creation_input_tokens":32984,"cache_read_input_tokens":33964,"cache_creation":{"ephemeral_5m_input_tokens":32984,"ephemeral_1h_input_tokens":0},"output_tokens":1,"service_tier":"standard"}},"requestId":"req_011CXEW67PeYTJqshT8Q75Wi","type":"assistant","uuid":"b6a6d949-7552-4b41-bed8-610f93383891","timestamp":"2026-01-18T08:09:45.006Z"}

---
description: 調查問題根因 - 分析代碼與 Git 歷史找出可疑改動
allowed-tools: Bash, Read, Grep, Glob, Task
argument-hint: [問題描述]
---

# 問題調查任務

## 問題描述
$ARGUMENTS

## 調查步驟

請按照以下流程進行系統性調查：

### 1. 問題理解
- 確認問題現象與重現方式
- 確定影響範圍（哪些檔案/模組）
- 確認問題首次出現的大致時間

### 2. 當前代碼分析
- 定位錯誤發生的代碼位置
- 分析相關函數的調用鏈
- 檢查依賴關係

### 3. Git 歷史追溯
使用以下命令追溯歷史：

```bash
# 查看相關檔案的修改歷史
git log --oneline -20 -- <相關檔案>

# 使用 blame 找出每行的修改來源
git blame -L <起始行>,<結束行> <檔案>

# 搜索特定代碼的改動歷史
git log -S "關鍵代碼" --oneline

# 比較版本差異
git diff <舊版本> <新版本> -- <檔案>
```

### 4. 定位可疑 Commit
- 找出可能造成問題的 commit
- 分析 commit 的改動內容
- 確認改動的時間與作者

### 5. 輸出調查報告

提供結構化報告，包含：
- 可疑 commit 列表（含可疑程度）
- 問題代碼位置
- 改動時間線
- 建議修復方案
